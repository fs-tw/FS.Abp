!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("@angular/common"),require("@angular/core"),require("rxjs"),require("rxjs/operators"),require("@angular/cdk/layout"),require("@delon/theme"),require("@delon/util"),require("@abp/ng.core"),require("snq"),require("@angular/router"),require("@delon/auth"),require("ng-zorro-antd/message"),require("@fs-tw/account"),require("@angular/forms"),require("ng-zorro-antd/core/outlet"),require("ng-zorro-antd/icon"),require("ng-zorro-antd/popover"),require("@delon/abc/reuse-tab"),require("@angular/cdk/drag-drop"),require("@delon/theme/theme-btn"),require("ng-zorro-antd/anchor"),require("ng-zorro-antd/auto-complete"),require("ng-zorro-antd/avatar"),require("ng-zorro-antd/divider"),require("ng-zorro-antd/input"),require("ng-zorro-antd/spin")):"function"==typeof define&&define.amd?define("@fs-tw/theme-alain-ms/layout",["exports","@angular/common","@angular/core","rxjs","rxjs/operators","@angular/cdk/layout","@delon/theme","@delon/util","@abp/ng.core","snq","@angular/router","@delon/auth","ng-zorro-antd/message","@fs-tw/account","@angular/forms","ng-zorro-antd/core/outlet","ng-zorro-antd/icon","ng-zorro-antd/popover","@delon/abc/reuse-tab","@angular/cdk/drag-drop","@delon/theme/theme-btn","ng-zorro-antd/anchor","ng-zorro-antd/auto-complete","ng-zorro-antd/avatar","ng-zorro-antd/divider","ng-zorro-antd/input","ng-zorro-antd/spin"],e):e(((t="undefined"!=typeof globalThis?globalThis:t||self)["fs-tw"]=t["fs-tw"]||{},t["fs-tw"]["theme-alain-ms"]=t["fs-tw"]["theme-alain-ms"]||{},t["fs-tw"]["theme-alain-ms"].layout={}),t.ng.common,t.ng.core,t.rxjs,t.rxjs.operators,t.ng.cdk.layout,t.i1$1,t.i2,t.i1$2,t.snq,t.ng.router,t.auth,t.message,t.account,t.ng.forms,t.outlet,t.icon,t.popover,t.reuseTab,t.ng.cdk.dragDrop,t.themeBtn,t.anchor,t.autoComplete,t.avatar,t.divider,t.input,t.spin)}(this,(function(t,e,n,r,i,a,o,s,c,l,u,p,d,g,h,m,f,v,y,b,_,S,x,C,P,O,k){"use strict";function z(t){return t&&"object"==typeof t&&"default"in t?t:{default:t}}var I=z(l),T=function(){function t(t,e){var n=this;this.settings=e,this.notify$=new r.BehaviorSubject(null),this._isMobile=!1,this.topHeight=50,this.hideNav=!1,e.setLayout(Object.assign(Object.assign({},e.layout),{hasTopbar:!0,hasSidebar:!1,hasFixed:!1}));var i="only screen and (max-width: 767.99px)";t.observe(i).subscribe((function(t){return n.checkMedia(t.matches)})),this.checkMedia(t.isMatched(i))}return Object.defineProperty(t.prototype,"notify",{get:function(){return this.notify$.asObservable()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isMobile",{get:function(){return this._isMobile},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"layout",{get:function(){return this.settings.layout},enumerable:!1,configurable:!0}),t.prototype.checkMedia=function(t){this._isMobile=t,this.layout.collapsed=this._isMobile,this.notify$.next("mobile")},t.prototype.setLayout=function(t,e){this.settings.setLayout(t,e),this.notify$.next("layout")},t.prototype.setTopbar=function(t){this.setLayout("hasTopbar",t)},t.prototype.setSidebar=function(t){this.setLayout("hasSidebar",t)},t.prototype.setFixed=function(t){this.setLayout("hasFixed",t)},t.prototype.triggerNotify=function(t){void 0===t&&(t="custom"),this.notify$.next(t)},t.prototype.ngOnDestroy=function(){this.notify$.unsubscribe()},t}();T.ɵprov=n.ɵɵdefineInjectable({factory:function(){return new T(n.ɵɵinject(a.BreakpointObserver),n.ɵɵinject(o.SettingsService))},token:T,providedIn:"root"}),T.decorators=[{type:n.Injectable,args:[{providedIn:"root"}]}],T.ctorParameters=function(){return[{type:a.BreakpointObserver},{type:o.SettingsService}]};function j(t,e,n,r){var i,a=arguments.length,o=a<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(o=(a<3?i(o):a>3?i(e,n,o):i(e,n))||o);return a>3&&o&&Object.defineProperty(e,n,o),o}function w(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)}Object.create;function N(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,i,a=n.call(t),o=[];try{for(;(void 0===e||e-- >0)&&!(r=a.next()).done;)o.push(r.value)}catch(t){i={error:t}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(i)throw i.error}}return o}function M(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(N(arguments[e]));return t}Object.create;var D=function(){function t(t,e){this.http=t,this.arrSrv=e}return Object.defineProperty(t.prototype,"allL2",{get:function(){return this._data.nav.filter((function(t){return t.children&&t.children.length>0}))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"allPanel",{get:function(){return this._data.nav.reduce((function(t,e){return t.concat(e.children?e.children:e)}),[])},enumerable:!1,configurable:!0}),t.prototype.getData=function(){return this._data?r.of(this._data):this.getByHttp()},t.prototype.fixData=function(t){var e=function(t){if(t.left){t.leftColumn=t.leftColumn||4;var e=new Array(t.leftColumn).fill({}).map((function(t,e){return{list:[],count:0,idx:e}}));t.left.filter((function(t){return t.list})).forEach((function(t){var n=M(e).sort((function(t,e){return t.count-e.count}))[0].idx;e[n].list.push(t),e[n].count+=t.list.length})),t._left=e}};return t.nav.forEach((function(t){t.level=1,t.children?t.children.forEach((function(n){n.parent=t,n.level=2,e(n)})):e(t)})),t},t.prototype.getByHttp=function(){var t=this;return this.http.get("./assets/tmp/all-nav-zh-TW.json").pipe(i.map((function(e){return t._data=t.fixData(e),t._data})))},t.prototype.refreshActive=function(t){for(this.arrSrv.visitTree(this._data.nav,(function(t){t.active=!1}));t;)t.active=!0,t=t.parent},t}();D.ɵprov=n.ɵɵdefineInjectable({factory:function(){return new D(n.ɵɵinject(o._HttpClient),n.ɵɵinject(s.ArrayService))},token:D,providedIn:"root"}),D.decorators=[{type:n.Injectable,args:[{providedIn:"root"}]}],D.ctorParameters=function(){return[{type:o._HttpClient},{type:s.ArrayService}]};var L=function(){function t(t,e,n,i){this.srv=t,this.brandSrv=e,this.cdr=n,this.doc=i,this.unsubscribe$=new r.Subject,this.loading=!1,this.$mouse=new r.Subject,this.open=!1}return Object.defineProperty(t.prototype,"allL2",{get:function(){return this.srv.allL2},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"allPanel",{get:function(){return this.srv.allPanel},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"validOpen",{get:function(){return this.data&&this.open},enumerable:!1,configurable:!0}),t.prototype.handleOpen=function(t){this.doc.body.classList[t?"add":"remove"]("alain-ms__an-body"),this.open=t,this.cdr.markForCheck(),this.updateHeight().load()},t.prototype.load=function(){var t=this;this.loading||this.data||(this.loading=!0,this.srv.getData().subscribe((function(e){t.data=e,t.cdr.markForCheck()})))},t.prototype.updateHeight=function(){var t=window.innerHeight-this.brandSrv.topHeight;return this.dropdownEl.nativeElement.style.height=t+"px",this},t.prototype._enter=function(){this.validOpen||this.handleOpen(!0)},t.prototype._leave=function(){this.handleOpen(!1)},t.prototype.mouseHandle=function(t,e){this.$mouse.next({i:t,status:e})},t.prototype.handleMouse=function(t){this.srv.refreshActive(t),this.cdr.detectChanges()},t.prototype.ngOnInit=function(){var t=this,e=this.$mouse,n=this.unsubscribe$;e.asObservable().pipe(i.takeUntil(n),i.auditTime(150)).subscribe((function(e){return t.handleMouse(e.i)}))},t.prototype.ngOnDestroy=function(){var t=this.unsubscribe$;t.next(),t.complete()},t}();L.decorators=[{type:n.Component,args:[{selector:"ms-all-nav",template:'<div class="alain-ms__an-trigger">\r\n  <i nz-icon nzType="bars"></i>\r\n  <nz-spin *ngIf="open && !data"></nz-spin>\r\n</div>\r\n<ng-template #menuTpl let-ls>\r\n  <ul class="alain-ms__an-menu">\r\n    <li\r\n      *ngFor="let i of ls"\r\n      class="alain-ms__an-menu-item"\r\n      [ngClass]="{ \'alain-ms__an-menu-item--active\': i.active }"\r\n      (mouseenter)="mouseHandle(i, true)"\r\n    >\r\n      {{ i.text }}\r\n      <i nz-icon nzType="right"></i>\r\n    </li>\r\n  </ul>\r\n</ng-template>\r\n<ng-template #categoryTpl let-ls>\r\n  <div *ngFor="let p of ls" class="alain-ms__an-category">\r\n    <h3 class="alain-ms__an-category-title">{{ p.text }}</h3>\r\n    <div class="alain-ms__an-category-list">\r\n      <a *ngFor="let i of p.list" [link-to]="i" (linkToChanged)="_leave()" class="alain-ms__an-category-link">\r\n        {{ i.text }}\r\n        <span *ngIf="i.tip" class="alain-ms__an-category-tip">{{ i.tip }}</span>\r\n      </a>\r\n    </div>\r\n  </div>\r\n</ng-template>\r\n<div #dropdown class="alain-ms__an-dropdown">\r\n  <div *ngIf="data" class="alain-ms__an">\r\n    <div class="alain-ms__an-panel alain-ms__an-panel-active alain-ms__an-level1">\r\n      <div class="alain-ms__an-panel-inner">\r\n        <ng-template [ngTemplateOutlet]="menuTpl" [ngTemplateOutletContext]="{ $implicit: data.nav }"></ng-template>\r\n        <div *ngIf="data.navBottom" class="alain-ms__an-menu-bottom">\r\n          <a *ngFor="let i of data.navBottom" [link-to]="i" (linkToChanged)="_leave()">\r\n            {{ i.text }}\r\n            <i nz-icon nzType="share-alt"></i>\r\n          </a>\r\n        </div>\r\n        <div *ngIf="data.bottomText" class="alain-ms__an-bottom">{{ data.bottomText }}</div>\r\n      </div>\r\n    </div>\r\n    <div\r\n      *ngFor="let p of allL2"\r\n      class="alain-ms__an-panel alain-ms__an-level2"\r\n      [ngClass]="{ \'alain-ms__an-level2-active\': p.active }"\r\n    >\r\n      <div class="alain-ms__an-panel-inner">\r\n        <ng-template [ngTemplateOutlet]="menuTpl" [ngTemplateOutletContext]="{ $implicit: p.children }"></ng-template>\r\n      </div>\r\n    </div>\r\n    <div\r\n      *ngFor="let i of allPanel"\r\n      class="alain-ms__an-content alain-ms__an-level{{ i.level }}-content alain-ms__an-left-col-{{ i.leftColumn }}"\r\n      [ngClass]="{ \'alain-ms__an-content-active\': i.active }"\r\n    >\r\n      <div *ngIf="i._left && i._left.length > 0" class="alain-ms__an-left">\r\n        <div *ngFor="let col of i._left" class="alain-ms__an-left-col">\r\n          <ng-template\r\n            [ngTemplateOutlet]="categoryTpl"\r\n            [ngTemplateOutletContext]="{ $implicit: col.list }"\r\n          ></ng-template>\r\n        </div>\r\n      </div>\r\n      <div *ngIf="i.right && i.right.length > 0" class="alain-ms__an-right">\r\n        <ng-template [ngTemplateOutlet]="categoryTpl" [ngTemplateOutletContext]="{ $implicit: i.right }"></ng-template>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</div>\r\n',host:{"[class.alain-ms__an-active]":"validOpen"},changeDetection:n.ChangeDetectionStrategy.OnPush}]}],L.ctorParameters=function(){return[{type:D},{type:T},{type:n.ChangeDetectorRef},{type:void 0,decorators:[{type:n.Inject,args:[e.DOCUMENT]}]}]},L.propDecorators={dropdownEl:[{type:n.ViewChild,args:["dropdown",{static:!0}]}],_enter:[{type:n.HostListener,args:["mouseenter"]}],_leave:[{type:n.HostListener,args:["mouseleave"]}]};var R=function(){function t(t,e){this.configState=t,this.sessionState=e,this.languages$=this.configState.getDeep$("localization.languages")}return Object.defineProperty(t.prototype,"defaultLanguage$",{get:function(){var t=this;return this.languages$.pipe(i.map((function(e){var n=I.default((function(){return e.find((function(e){return e.cultureName===t.selectedLangCulture}))}),{});return{displayName:n.displayName||"",flagIcon:n.flagIcon}})))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"dropdownLanguages$",{get:function(){var t=this;return this.languages$.pipe(i.map((function(e){return I.default((function(){return e.filter((function(e){return e.cultureName!==t.selectedLangCulture}))}))}),[]))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"selectedLangCulture",{get:function(){return this.sessionState.getLanguage()},enumerable:!1,configurable:!0}),t.prototype.change=function(t){this.sessionState.setLanguage(t)},t}();R.decorators=[{type:n.Component,args:[{selector:"ms-langs",template:'<ng-container *ngIf="defaultLanguage$ | async as defaultLang">\r\n  <span class="alain-ms__topbar-item-btn" >\r\n    <span >{{ defaultLang.displayName }}</span>\r\n  </span>\r\n  <ul class="alain-ms__topbar-dd-menu">\r\n    <li *ngFor="let lang of (dropdownLanguages$ | async)" (click)="change(lang.cultureName)">\r\n      <a class="alain-ms__topbar-dd-item">{{ lang?.displayName }}</a>\r\n    </li>\r\n  </ul>\r\n</ng-container>\r\n\r\n',host:{"[class.alain-ms__topbar-item]":"true","[class.alain-ms__topbar-dd]":"true"},changeDetection:n.ChangeDetectionStrategy.OnPush}]}],R.ctorParameters=function(){return[{type:c.ConfigStateService},{type:c.SessionStateService}]};var $=function(){function t(t){this.http=t}return Object.defineProperty(t.prototype,"data",{get:function(){return this._data},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"messages",{get:function(){return this._data.messagess},enumerable:!1,configurable:!0}),t.prototype.getData=function(){return this._data?r.of(this._data):this.getByHttp()},t.prototype.getNav=function(t){return this._data.navLinks[t]||{}},t.prototype.getByHttp=function(){var t=this;return this.http.get("./assets/tmp/topbar-zh-TW.json").pipe(i.tap((function(e){t._data=e})))},t}();$.ɵprov=n.ɵɵdefineInjectable({factory:function(){return new $(n.ɵɵinject(o._HttpClient))},token:$,providedIn:"root"}),$.decorators=[{type:n.Injectable,args:[{providedIn:"root"}]}],$.ctorParameters=function(){return[{type:o._HttpClient}]};var F=function(){function t(t,e,n,r,i){this.srv=t,this.router=e,this.tokenService=n,this.settings=r,this.msg=i}return Object.defineProperty(t.prototype,"list",{get:function(){var t=this;return this.srv.messages.map((function(e){return e.link=t.l.messageUrl+e.id,e}))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"l",{get:function(){return this.srv.getNav("message")},enumerable:!1,configurable:!0}),t.prototype.logout=function(){this.tokenService.clear(),this.router.navigateByUrl(this.tokenService.login_url)},t}();F.decorators=[{type:n.Component,args:[{selector:"ms-notice",template:'<span class="alain-ms__topbar-item-btn">\r\n  <span class="position-relative">\r\n    {{ l.titleText }}<em *ngIf="list.length > 0" class="alain-ms__topbar-item-num">{{ list.length }}</em>\r\n  </span>\r\n</span>\r\n<div class="alain-ms__topbar-dd-menu">\r\n  <div class="alain-ms__notice-hd">\r\n    {{ l.title }}\r\n    <a class="brand-color" [link-to]="l.subscribe">{{ l.subscribe.title }}</a>\r\n  </div>\r\n  <a class="alain-ms__notice-item" *ngFor="let i of list" [link-to]="i">\r\n    <div class="alain-ms__notice-item--title">{{ i.title }}</div>\r\n    <span class="alain-ms__notice-item--time">{{ i.time }}</span>\r\n  </a>\r\n  <div class="alain-ms__notice-fd">\r\n    <a class="d-block pt-sm pb-xs text-center" [link-to]="l">{{ l.text }}</a>\r\n  </div>\r\n</div>\r\n',host:{"[class.alain-ms__topbar-item]":"true","[class.alain-ms__topbar-dd]":"true","[class.alain-ms__notice]":"true"},changeDetection:n.ChangeDetectionStrategy.OnPush}]}],F.ctorParameters=function(){return[{type:$},{type:u.Router},{type:void 0,decorators:[{type:n.Inject,args:[p.DA_SERVICE_TOKEN]}]},{type:o.SettingsService},{type:d.NzMessageService}]};var A=function(){function t(t){this.http=t}return Object.defineProperty(t.prototype,"platList",{get:function(){return this._data.reduce((function(t,e){return t.concat(e.list)}),[])},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"item",{get:function(){return this.platList.find((function(t){return t.selected}))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"list",{get:function(){return this._data},enumerable:!1,configurable:!0}),t.prototype.getByHttp=function(){return this.http.get("/region").pipe(i.tap((function(t){})))},t.prototype.getData=function(){return this._data?r.of(null):this.getByHttp()},t.prototype.setSelected=function(t){this.platList.find((function(t){return t.selected})).selected=!1,t.selected=!0},t}();A.ɵprov=n.ɵɵdefineInjectable({factory:function(){return new A(n.ɵɵinject(o._HttpClient))},token:A,providedIn:"root"}),A.decorators=[{type:n.Injectable,args:[{providedIn:"root"}]}],A.ctorParameters=function(){return[{type:o._HttpClient}]};var E=function(){function t(t,e){this.srv=t,this.cdr=e,this.inited=!1}return t.prototype.ngOnInit=function(){var t=this;this.srv.getData().subscribe((function(){t.inited=!0,t.cdr.detectChanges()}))},t.prototype.selected=function(t){this.srv.setSelected(t),this.cdr.detectChanges()},t}();E.decorators=[{type:n.Component,args:[{selector:"ms-region",template:'<ng-container *ngIf="inited">\r\n  <span class="alain-ms__topbar-item-btn">\r\n    <i class="icon icon-{{ srv.item.country }}"></i>\r\n    <span class="text-xs px-xs">{{ srv.item.name }}</span>\r\n    <i nz-icon nzType="caret-up" class="alain-ms__topbar-item-btn-arrow"></i>\r\n  </span>\r\n  <div class="alain-ms__topbar-dd-menu alain-ms__topbar-dd-left alain-ms__region--wrap clearfix">\r\n    <dl *ngFor="let p of srv.list" class="alain-ms__region--list">\r\n      <dt class="mb-sm">{{ p.name }}</dt>\r\n      <dd *ngFor="let i of p.list" (click)="selected(i)">\r\n        <a class="d-block" [ngClass]="{ \'brand-color\': i.selected }">\r\n          <i class="icon icon-{{ i.country }}"></i>{{ i.name }}\r\n        </a>\r\n      </dd>\r\n    </dl>\r\n  </div>\r\n</ng-container>\r\n',host:{"[class.alain-ms__topbar-item]":"true","[class.alain-ms__topbar-dd]":"true","[class.alain-ms__region]":"true"},changeDetection:n.ChangeDetectionStrategy.OnPush}]}],E.ctorParameters=function(){return[{type:A},{type:n.ChangeDetectorRef}]};var q=function(){function t(t,e,n){var a=this;this.srv=e,this.cdr=n,this.show=!1,this.q="",this.search$=new r.Subject,this.list=[],this.search$.pipe(i.debounceTime(300),i.distinctUntilChanged(),i.switchMap((function(e){return t.get("/user",{no:e,pi:1,ps:5})}))).subscribe((function(t){a.list=t.list,a.cdr.detectChanges()}))}return Object.defineProperty(t.prototype,"l",{get:function(){return this.srv.getNav("search")},enumerable:!1,configurable:!0}),t.prototype._click=function(){this.ipt.nativeElement.focus(),this.show=!0},t.prototype.ngOnDestroy=function(){this.search$.unsubscribe()},t}();q.decorators=[{type:n.Component,args:[{selector:"ms-search",template:'<div class="alain-ms__search" [ngClass]="{ \'alain-ms__search-active\': show }">\r\n  <input\r\n    class="alain-ms__search-ipt"\r\n    #ipt\r\n    placeholder="{{ l.placeholder }}"\r\n    nz-input\r\n    [(ngModel)]="q"\r\n    (input)="search$.next($event.target?.value)"\r\n    [nzAutocomplete]="searchAuto"\r\n    (blur)="show = false"\r\n  />\r\n  <i class="alain-ms__search-icon" nz-icon nzType="search"></i>\r\n  <i class="alain-ms__search-outline"></i>\r\n  <nz-autocomplete #searchAuto class="asdlfkjlj">\r\n    <nz-auto-option *ngFor="let item of list" [nzValue]="item">\r\n      {{ item }}\r\n    </nz-auto-option>\r\n  </nz-autocomplete>\r\n</div>\r\n',host:{"[class.alain-ms__topbar-item]":"true","[class.mr-md]":"true"},changeDetection:n.ChangeDetectionStrategy.OnPush}]}],q.ctorParameters=function(){return[{type:o._HttpClient},{type:$},{type:n.ChangeDetectorRef}]},q.propDecorators={ipt:[{type:n.ViewChild,args:["ipt",{static:!0}]}],_click:[{type:n.HostListener,args:["click"]}]};var H=function(){function t(t,e,n,r,i){this.authService=t,this.router=e,this.configStateService=n,this.settings=i,this.currentUser$=this.configStateService.getOne$("currentUser")}return t.prototype.initLogin=function(){this.authService.initLogin()},t.prototype.logout=function(){var t=this;this.authService.logout().subscribe((function(){t.router.navigate(["/"],{state:{redirectUrl:t.router.url}})}))},t}();H.decorators=[{type:n.Component,args:[{selector:"ms-user",template:'<ng-template #loginBtnTpl>\r\n  <a (click)="initLogin()"  class="alain-ms__topbar-item-btn">{{\'AbpAccount::Login\' | abpLocalization}}</a>\r\n</ng-template>\r\n\r\n<div *ngIf="(currentUser$ | async) as currentUser">\r\n  <div *ngIf="currentUser.isAuthenticated; else loginBtnTpl">\r\n\r\n\r\n    <span class="alain-ms__topbar-item-btn">\r\n      \x3c!-- <nz-avatar [nzSrc]="settings.user.avatar" nzSize="small"></nz-avatar> --\x3e\r\n      {{ currentUser.userName }}\r\n    </span>\r\n    <div class="alain-ms__topbar-dd-menu width-md">\r\n      <div class="alain-ms__user-hd">\r\n        <div class="d-flex">\r\n          \x3c!-- <nz-avatar [nzSrc]="settings.user.avatar" nzSize="small"></nz-avatar> --\x3e\r\n          <span class="ml-md">{{ currentUser.userName }}</span>\r\n        </div>\r\n        \x3c!-- <div class="mt-sm">\r\n          <ng-container *ngFor="let i of mainLinks; let last = last">\r\n            <a [link-to]="i">{{ i.text }}</a>\r\n            <nz-divider *ngIf="!last" nzType="vertical"></nz-divider>\r\n          </ng-container>\r\n        </div> --\x3e\r\n      </div>\r\n      <div class="alain-ms__user-bd">\r\n        \x3c!-- <a *ngFor="let i of subLinks" [link-to]="i" class="alain-ms__user-bd-item">\r\n          <i nz-icon nzType="safety"></i>{{ i.text }}\r\n        </a> --\x3e\r\n        <a routerLink="/account/manage-profile" class="alain-ms__user-bd-item">\r\n          <i nz-icon nzType="safety"></i>{{ \'AbpAccount::ManageYourProfile\' | abpLocalization }}\r\n        </a>\r\n      </div>\r\n      <div class="alain-ms__user-fd">\r\n        <a (click)="logout()" class="d-block pt-sm pb-xs text-center">{{ \'AbpUi::Logout\' | abpLocalization }}</a>\r\n      </div>\r\n    </div>\r\n\r\n\r\n  </div>\r\n</div>\r\n\r\n',host:{"[class.alain-ms__topbar-item]":"true","[class.alain-ms__topbar-dd]":"true","[class.alain-ms__user]":"true"},changeDetection:n.ChangeDetectionStrategy.OnPush}]}],H.ctorParameters=function(){return[{type:g.AuthService},{type:u.Router},{type:c.ConfigStateService},{type:$},{type:o.SettingsService}]};var B=function(){function t(t){this.injector=t}return Object.defineProperty(t.prototype,"routesService",{get:function(){return this.injector.get(c.RoutesService)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"localizationPipe",{get:function(){return this.injector.get(c.LocalizationPipe)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"CurrentUrl",{get:function(){var t=this.RouterState.url.split("?")[0];return decodeURI(t)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"CurrentRoute",{get:function(){var t=this;return this.routesService.find((function(e){return t.formatParams(e.path)===t.CurrentUrl}))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"NavConfigs",{get:function(){var t=[],e=this.CurrentRoute;if(!e)return[];for(n(e);e.parent;)n(e=e.parent);return t;function n(e){e&&e.navConfig&&t.push(e)}},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"CurrentNavConfig",{get:function(){for(var t={parentName:null,name:this.CurrentRoute.parentName},e=this.NavConfigs;0!==e.length;){var n=e.pop();t=Object.assign(Object.assign({},t),n.navConfig)}return t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"Category$",{get:function(){var t=this;return this.routesService.visible$.pipe(i.map((function(e){if(0!==e.length)return e.filter((function(e){return"AbpUiNavigation::Menu:Administration"===e.name&&!t.routesService.hide(e)})).map((function(t){return t.children})).reduce((function(t,e){return t.concat(e)})).map((function(e){var n={id:e.name,name:t.localizationPipe.transform(e.name),icon:e.iconClass,products:[],link:e.path};return n.products=e.children.filter((function(e){return!t.routesService.hide(e)})).map((function(e){return{productId:e.name,name:t.localizationPipe.transform(e.name),link:e.path,icon:e.iconClass,id:e.name}})),n}))})))},enumerable:!1,configurable:!0}),t.prototype.GetPageNavs=function(t,e){var n=this;if(!this.CurrentRoute)return[];var r,i=[];return this.RouterState=t,this.routesService.tree.filter((function(t){return!n.routesService.hide(t)})).find((function(t){var i=n.searchRoute(t,e);i&&(r=i)})),r&&i.push.apply(i,M(this.transMenu(r))),i},t.prototype.searchRoute=function(t,e){var n=!!t.children&&t.children.length>0,r=this.formatParams(e.parentName),i=!!r;if(!i&&t.name==e.name)return t;if(i&&t.name===r&&n){var a=t.children.find((function(t){return t.name===e.name}));if(a)return a}if(null!=t.children){var o,s=null;for(o=0;null==s&&o<t.children.length;o++)s=this.searchRoute(t.children[o],e);return s}},t.prototype.transMenu=function(t){var e=this,n=[];return t.children.filter((function(t){return!e.routesService.hide(t)})).forEach((function(t){var r,i={text:t.displayName||e.localizationPipe.transform(t.name),link:e.formatParams(t.path),icon:t.iconClass,children:[]};(null===(r=null==t?void 0:t.children)||void 0===r?void 0:r.length)>0&&(i.children=e.transMenu(t)),n.push(i)})),n},t.prototype.formatParams=function(t){var e=this;if(!t)return"";var n=/:([^(:\/\-\ )]+)/g,r=t;return t.match(n)&&t.match(n).forEach((function(t){var n=t.substr(1),i=e.getParamKeyValue(n);r=r.replace(":"+n,i)})),r},t.prototype.getParamKeyValue=function(t){var e=this.searchRouter(this.RouterState.root,t);return e?e.params[t]:null},t.prototype.searchRouter=function(t,e){if(e in t.params)return t;if(null!=t.children){var n,r=null;for(n=0;null==r&&n<t.children.length;n++)r=this.searchRouter(t.children[n],e);return r}return null},t}(),U=function(){function t(t,e){this.injector=t,this.localizationPipe=e,this.store=new c.InternalStore({routerState:null,isFetching:!1,hasSidebar:!0,hasAllNav:!1,categories:[],navConfig:{nav:"",title:"系統管理",doc:"系統管理"},hasPageNav:!0,pageNavs:[]}),this.routesProcessor=new B(this.injector),this.listenRoutes()}return t.prototype.getStore$=function(){return this.store.sliceState((function(t){return t}))},t.prototype.getFetching$=function(){return this.store.sliceState((function(t){return t.isFetching}))},t.prototype.getCategories=function(){return this.store.state.categories},t.prototype.getCategories$=function(){return this.store.sliceState((function(t){return t.categories}))},t.prototype.getShortcuts=function(){var t=this.getCategories(),e=[];return t.forEach((function(t){e.push(t)})),e},t.prototype.getShortcuts$=function(){return this.getCategories$().pipe(i.map((function(t){var e=[];return t.forEach((function(t){e.push(t)})),e})))},t.prototype.getNavConfig=function(){return this.store.state.navConfig},t.prototype.getNavConfig$=function(){return this.store.sliceState((function(t){return t.navConfig}))},t.prototype.getPageNavs$=function(){return this.store.sliceState((function(t){return t.pageNavs}))},t.prototype.getPageNavs=function(){return this.store.state.pageNavs},t.prototype.setStore=function(t){this.store.patch(Object.assign({},t))},t.prototype.setFetching=function(t){this.store.patch({isFetching:t})},t.prototype.fetchPageNavs=function(t){this.routesProcessor.RouterState=t;var e=this.routesProcessor.CurrentNavConfig;this.store.patch({navConfig:e});var n=this.routesProcessor.GetPageNavs(t,e);this.store.patch({pageNavs:n})},t.prototype.listenRoutes=function(){var t=this;this.routesProcessor.Category$.subscribe((function(e){t.store.patch({categories:e})}))},t}();U.ɵprov=n.ɵɵdefineInjectable({factory:function(){return new U(n.ɵɵinject(n.INJECTOR),n.ɵɵinject(c.LocalizationPipe))},token:U,providedIn:"root"}),U.decorators=[{type:n.Injectable,args:[{providedIn:"root"}]}],U.ctorParameters=function(){return[{type:n.Injector},{type:c.LocalizationPipe}]};var V=function(){function t(t){this.layoutSateService=t}return Object.defineProperty(t.prototype,"data",{get:function(){return this._data},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"i18n",{get:function(){return{showAll:!0,keywords:"請輸入關鍵詞",allProduct:"查詢全部産品",show:!0,hasResult:"以下是與“<strong>{filterTxt}</strong>”相關的産品：",noResult:"未找到與“<strong>{filterTxt}</strong>”相關的産品。",text:"産品與服務",recent:"最近訪問"}},enumerable:!1,configurable:!0}),t.prototype.getData=function(){var t=this;return this.layoutSateService.getCategories$().pipe(i.tap((function(e){t._data=e})))},t.prototype.search=function(t){var e=[[],[],[]],n=s.deepCopy(this._data);t&&(n=n.map((function(e){var n;return e.products=null===(n=e.products)||void 0===n?void 0:n.filter((function(e){return e.name.includes(t)||e.id.includes(t)})),e})));var r=[],i=0;return n.filter((function(t){return t.products.length>0})).forEach((function(t,n){t._id=++i,e[n%3].push(t),-1===r.findIndex((function(e){return e.name===t.name}))&&r.push({_id:t._id,name:t.name})})),{list:e,categories:r}},t}();V.ɵprov=n.ɵɵdefineInjectable({factory:function(){return new V(n.ɵɵinject(U))},token:V,providedIn:"root"}),V.decorators=[{type:n.Injectable,args:[{providedIn:"root"}]}],V.ctorParameters=function(){return[{type:U}]};var W=function(){function t(t,e,n,r){this.layoutStateService=t,this.brand=e,this.srv=n,this.cdr=r,this.showProduct=!1,this.inited=!1,this.q="",this.searchCategories=[],e.setSidebar(!0)}return Object.defineProperty(t.prototype,"shortcuts$",{get:function(){return this.layoutStateService.getShortcuts$()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"l",{get:function(){return this.srv.i18n},enumerable:!1,configurable:!0}),t.prototype.search=function(t){var e=this;void 0===t&&(t=!0);var n=this.srv.search(this.q);this.searchList=n.list,this.searchCategories=n.categories,this.cdr.detectChanges(),t&&setTimeout((function(){e.categoryEl.nativeElement.scrollTop=0}))},t.prototype.ngAfterViewInit=function(){var t=this;this.srv.getData().subscribe((function(e){t.inited=!0,t.search()}))},t.prototype.ngOnDestroy=function(){this.brand.setSidebar(!1)},t}();W.decorators=[{type:n.Component,args:[{selector:"ms-sidebar",template:'<ng-container *ngIf="inited">\r\n  <div class="alain-ms__sidebar-wrap">\r\n    <div class="alain-ms__sidebar-product-all" (click)="showProduct = !showProduct">\r\n      <div class="alain-ms__sidebar-product alain-ms__sidebar-product-all-wrap">\r\n        <i class="alain-ms__sidebar-product-icon" nz-icon nzType="appstore"></i>\r\n        <span class="alain-ms__sidebar-product-name">{{ l.text }}</span>\r\n        <span class="alain-ms__sidebar-product-toolbar">\r\n          <i nz-icon nzType="right"></i>\r\n        </span>\r\n      </div>\r\n    </div>\r\n    <ul class="alain-ms__sidebar-product-quick">\r\n      <li class="alain-ms__sidebar-product" *ngFor="let i of shortcuts$|async; let idx = index">\r\n        <i class="alain-ms__sidebar-product-icon {{ i.icon }} " [link-to]="i" (linkToChanged)="showProduct = false"></i>\r\n        <a class="alain-ms__sidebar-product-name" [link-to]="i" (linkToChanged)="showProduct = false">\r\n          {{ i.name }}\r\n        </a>\r\n      </li>\r\n    </ul>\r\n  </div>\r\n  <div class="alain-ms__sidebar-products">\r\n    <div class="alain-ms__products">\r\n      <div class="alain-ms__products-close" (click)="showProduct = false">\r\n        <i nz-icon nzType="close"></i>\r\n      </div>\r\n      <div class="alain-ms__products-left">\r\n        <div class="alain-ms__products-category-wrap" #categoryEl>\r\n          <div class="d-flex">\r\n            <div *ngFor="let c of searchList" class="alain-ms__products-category-column">\r\n              <div *ngFor="let p of c" class="alain-ms__products-category">\r\n                <h3 class="alain-ms__products-category-title" id="product-cat-{{ p._id }}">{{ p.name }}</h3>\r\n                <ul class="list-unstyled">\r\n                  <li\r\n                    *ngFor="let i of p.products"\r\n                    class="alain-ms__products-category-item"\r\n                    [ngClass]="{ \'alain-ms__products-category-item-active\': i.shortcut }"\r\n                  >\r\n                    <a [link-to]="i" (linkToChanged)="showProduct = false" class="alain-ms__products-category-item-link">{{ i.name }}</a>\r\n                  </li>\r\n                </ul>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</ng-container>\r\n',host:{"[class.alain-ms__sidebar]":"true","[class.alain-ms__sidebar-showproduct]":"showProduct"},changeDetection:n.ChangeDetectionStrategy.OnPush}]}],W.ctorParameters=function(){return[{type:U},{type:T},{type:V},{type:n.ChangeDetectorRef}]},W.propDecorators={categoryEl:[{type:n.ViewChild,args:["categoryEl",{static:!1}]}]};var G=function(){function t(t,e,n){this.srv=t,this.cdr=e,this.environment=n,this.inited=!1,this.allNav=!1}return Object.defineProperty(t.prototype,"appInfo",{get:function(){return this.environment.getEnvironment().application},enumerable:!1,configurable:!0}),t.prototype.ngOnInit=function(){var t=this;this.srv.getData().subscribe((function(){t.inited=!0,t.mergeLinks(),t.cdr.detectChanges()}))},t.prototype.mergeLinks=function(){var t=this.srv.data.navLinks;this.links=[t.finance,t.workorder,t.support].map((function(t){return null==t.className&&(t.className=""),t.links&&0!==t.links.length?t.className+=" alain-ms__topbar-dd":t.links=void 0,t}))},t}();G.decorators=[{type:n.Component,args:[{selector:"ms-topbar",template:'<ng-template #defaultLogo>\r\n  <img src="./assets/logo-color.svg" />\r\n</ng-template>\r\n<div class="alain-ms__topbar-main">\r\n  <ms-all-nav *ngIf="allNav"></ms-all-nav>\r\n  <div class="alain-ms__topbar-logo">\r\n    <a routerLink="/" class="alain-ms__topbar-logo-img">\r\n      <img *ngIf="appInfo.logoUrl; else defaultLogo" [src]="appInfo.logoUrl"/>\r\n    </a>\r\n    <a routerLink="/" class="alain-ms__topbar-logo-link">\r\n      {{ appInfo.name }}\r\n    </a>\r\n  </div>\r\n  \x3c!-- <ms-region *ngIf="userSrv?.isLogin" class="hidden-md"></ms-region> --\x3e\r\n</div>\r\n<div class="alain-ms__topbar-widget" *ngIf="inited">\r\n  \x3c!-- 搜索 --\x3e\r\n  \x3c!-- <ms-search class="hidden-xs"></ms-search> --\x3e\r\n  \x3c!-- 消息 --\x3e\r\n  \x3c!-- <ms-notice></ms-notice> --\x3e\r\n  \x3c!-- 菜单 --\x3e\r\n  \x3c!-- <div *ngFor="let p of links" class="alain-ms__topbar-item" [ngClass]="p.className">\r\n    <a class="alain-ms__topbar-item-btn" [link-to]="p">{{ p.text }}</a>\r\n    <ul class="alain-ms__topbar-dd-menu" *ngIf="p.links">\r\n      <li *ngFor="let i of p.links">\r\n        <a class="alain-ms__topbar-dd-item" [link-to]="i">{{ i.text }}</a>\r\n      </li>\r\n    </ul>\r\n  </div> --\x3e\r\n  \x3c!-- 购物车 --\x3e\r\n  \x3c!-- <div class="alain-ms__topbar-item hidden-mobile" class="hidden-xs">\r\n    <a class="alain-ms__topbar-item-btn alain-ms__topbar-item-icon" routerLink="/">\r\n      <i nz-icon nzType="shopping-cart"></i>\r\n    </a>\r\n  </div> --\x3e\r\n  \x3c!-- 语言 --\x3e\r\n  <ms-langs></ms-langs>\r\n  \x3c!-- 用户 --\x3e\r\n  <ms-user></ms-user>\r\n</div>\r\n',host:{"[class.alain-ms__topbar]":"true","[class.alain-ms__topbar-single]":"allNav"},changeDetection:n.ChangeDetectionStrategy.OnPush}]}],G.ctorParameters=function(){return[{type:$},{type:n.ChangeDetectorRef},{type:c.EnvironmentService}]},G.propDecorators={allNav:[{type:n.Input}]};var K=function(){};K.decorators=[{type:n.Component,args:[{selector:"help",template:'<div class="ms-help__wrap" nz-popover nzPopoverTrigger="click" [nzPopoverContent]="helpTpl">\r\n  <span class="ms-help__text">\r\n    咨询·建议\r\n  </span>\r\n</div>\r\n<ng-template #helpTpl>\r\n  <div class="d-flex align-items-center mb-sm">\r\n    <i nz-icon nzType="phone" class="mr-sm text-xl"></i>\r\n    <a routerLink="/">\r\n      售前咨询电话\r\n      <div class="text-orange text-xs">xxxx 转 1</div>\r\n    </a>\r\n  </div>\r\n  <div class="d-flex align-items-center mb-sm">\r\n    <i nz-icon nzType="customer-service" class="mr-sm text-xl"></i>\r\n    <a routerLink="/smart">\r\n      智能顾问\r\n      <div class="text-grey text-xs">智能诊断，秒级解答</div>\r\n    </a>\r\n  </div>\r\n  <div class="d-flex align-items-center">\r\n    <i nz-icon nzType="edit" class="mr-sm text-xl"></i>\r\n    <a routerLink="/">\r\n      建议反馈\r\n      <div class="text-grey text-xs">XXX不是完美的，我们渴望您的建议</div>\r\n    </a>\r\n  </div>\r\n</ng-template>\r\n',host:{"[class.ms-help]":"true"},changeDetection:n.ChangeDetectionStrategy.OnPush}]}];var X=function(){function t(t){this.router=t,this.linkToChanged=new n.EventEmitter}return t.prototype._click=function(t){var e=this,n=this.i,r=n.link,i=n.target;if(null!=i)return"_blank"===i?window.open(r):window.location.href=r,void this.linkToChanged.emit(t);setTimeout((function(){e.router.navigateByUrl(r).then((function(){return e.linkToChanged.emit(t)}))}))},t}();X.decorators=[{type:n.Directive,args:[{selector:"[link-to]"}]}],X.ctorParameters=function(){return[{type:u.Router}]},X.propDecorators={i:[{type:n.Input,args:["link-to"]}],linkToChanged:[{type:n.Output}],_click:[{type:n.HostListener,args:["click",["$event"]]}]};var J=function(){function t(t,e,n,r){this.router=t,this.srv=e,this.menuSrv=n,this.cdr=r,this._menus=null,this.autoTitle=!0,this.recursiveBreadcrumb=!0}return Object.defineProperty(t.prototype,"menus",{get:function(){return this._menus||(this._menus=this.menuSrv.getPathByUrl(this.router.url.split("?")[0],this.recursiveBreadcrumb)),this._menus},enumerable:!1,configurable:!0}),t.prototype.setTitle=function(){if(void 0===this.title&&this.autoTitle&&this.menus.length>0){var t=this.menus[this.menus.length-1];this.title=t.text}this.cdr.detectChanges()},t.prototype.ngAfterViewInit=function(){var t=this;this.router$=r.merge(this.router.events.pipe(i.filter((function(t){return t instanceof u.NavigationEnd}))),this.srv.notify,this.menuSrv.change).subscribe((function(){t._menus=null,t.setTitle()}))},t.prototype.ngOnDestroy=function(){this.router$.unsubscribe()},t}();J.decorators=[{type:n.Component,args:[{selector:"page-bar",template:'<div class="ms-page-bar__title">\r\n  <h2 *ngIf="title" class="ms-page-bar__title-main">\r\n    <ng-container *nzStringTemplateOutlet="title">{{ title }}</ng-container>\r\n  </h2>\r\n  <div *ngIf="subTitle" class="ms-page-bar__title-sub">\r\n    <ng-container *nzStringTemplateOutlet="subTitle">{{ subTitle }}</ng-container>\r\n  </div>\r\n</div>\r\n<div class="ms-page-bar__action">\r\n  <ng-content></ng-content>\r\n</div>\r\n',host:{"[class.ms-page-bar]":"true"},changeDetection:n.ChangeDetectionStrategy.OnPush}]}],J.ctorParameters=function(){return[{type:u.Router},{type:T},{type:o.MenuService},{type:n.ChangeDetectorRef}]},J.propDecorators={autoTitle:[{type:n.Input}],recursiveBreadcrumb:[{type:n.Input}],title:[{type:n.Input}],subTitle:[{type:n.Input}]},j([s.InputBoolean(),w("design:type",Object)],J.prototype,"autoTitle",void 0),j([s.InputBoolean(),w("design:type",Object)],J.prototype,"recursiveBreadcrumb",void 0);var Y=function(){function t(t,e,n,r,i){this.srv=t,this.router=e,this.titSrv=n,this.menuSrv=r,this.cdr=i,this._config={},this._menus=[]}return Object.defineProperty(t.prototype,"config",{get:function(){return this._config},set:function(t){var e=t.title,n=(t.titleI18n,t.backHref);t.doc,t.docI18n;this._config.title=e,this._config.backHref=n||""},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"list",{get:function(){return this._menus},set:function(t){this.menuSrv.add(t),this.menuSrv.visit(t,(function(t){return t.active=!0})),this._menus=this.menuSrv.menus},enumerable:!1,configurable:!0}),t.prototype.to=function(t,e){e.preventDefault(),t&&this.router.navigateByUrl(t)},t.prototype.toggle=function(){this.srv.hideNav=!this.srv.hideNav,this.srv.triggerNotify("page-nav")},t.prototype.ngOnChanges=function(){this.cdr.detectChanges()},t}();Y.decorators=[{type:n.Component,args:[{selector:"page-nav",template:'<div class="ms-page-nav__body">\r\n  <div class="ms-page-nav__stage">\r\n    <div class="ms-page-nav__scene ms-page-nav__scene-main">\r\n      <div\r\n        class="ms-page-nav__title"\r\n        [ngClass]="{ \'ms-page-nav__back\': config.backHref }"\r\n        (click)="to(config.backHref!, $event)"\r\n        [title]="config.backHref ? (\'ms.page-nav.back\' | i18n) : \'\'"\r\n      >\r\n        <i *ngIf="config.backHref" nz-icon nzType="left"></i>\r\n        {{ config.title }}\r\n      </div>\r\n      <div class="ms-page-nav__list scrollbar">\r\n        <ng-template #treeTpl let-ls let-level="level">\r\n          <li *ngFor="let i of ls">\r\n            <ng-container *ngIf="i.children.length == 0">\r\n              <div\r\n                *ngIf="i.link"\r\n                class="ms-page-nav__item"\r\n                role="treeitem"\r\n                routerLink="{{ i.link }}"\r\n                routerLinkActive="ms-page-nav__item-active"\r\n              >\r\n                <span class="ms-page-nav__item-icon"></span>\r\n                <span class="ms-page-nav__item-tit">{{ i.text }}</span>\r\n                <span *ngIf="i.badge" class="ms-page-nav__item-badge">{{ i.badge }}</span>\r\n              </div>\r\n              <a *ngIf="!i.link" [href]="i.externalLink" [target]="i.target" class="ms-page-nav__item" role="treeitem">\r\n                <span class="ms-page-nav__item-icon"></span>\r\n                <span class="ms-page-nav__item-tit">{{ i.text }}</span>\r\n                <span *ngIf="i.badge" class="ms-page-nav__item-badge">{{ i.badge }}</span>\r\n              </a>\r\n            </ng-container>\r\n            <ng-container *ngIf="i.children.length > 0">\r\n              <div class="ms-page-nav__item" role="treeitem" (click)="i.active = !i.active">\r\n                <span class="ms-page-nav__item-icon">\r\n                  <i nz-icon [nzType]="i.active ? \'caret-down\' : \'caret-right\'"></i>\r\n                </span>\r\n                <span class="ms-page-nav__item-tit">{{ i.text }}</span>\r\n              </div>\r\n              <ul role="tree" class="list-unstyled" [ngClass]="{ \'d-none\': !i.active }">\r\n                <ng-container *ngTemplateOutlet="treeTpl; context: { $implicit: i.children, level: level + 1 }"></ng-container>\r\n              </ul>\r\n            </ng-container>\r\n          </li>\r\n        </ng-template>\r\n        <ul role="tree" class="list-unstyled">\r\n          <ng-container *ngTemplateOutlet="treeTpl; context: { $implicit: list, level: 1 }"></ng-container>\r\n        </ul>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</div>\r\n<div class="ms-page-nav__control" (click)="toggle()">\r\n  <div class="ms-page-nav__control-wrap">\r\n    <div class="ms-page-nav__control-bg"></div>\r\n    <div class="ms-page-nav__control-btn">\r\n      <i nz-icon nzType="menu-fold"></i>\r\n    </div>\r\n  </div>\r\n</div>\r\n',changeDetection:n.ChangeDetectionStrategy.OnPush}]}],Y.ctorParameters=function(){return[{type:T},{type:u.Router},{type:o.TitleService},{type:o.MenuService},{type:n.ChangeDetectorRef}]},Y.propDecorators={config:[{type:n.Input}],list:[{type:n.Input}]};var Z=function(){function t(t){this.brand=t,this.wide=!0,this.fixed=!1}return t.prototype.ngOnInit=function(){},t.prototype.ngOnChanges=function(){this.brand.setFixed(this.fixed)},t.prototype.ngOnDestroy=function(){this.brand.setFixed(!1)},t}();Z.decorators=[{type:n.Component,args:[{selector:"page-single",template:'<div class="ms-page-single__bar">\r\n  <div class="ms-page-single__wrap" [ngClass]="{ \'ms-page-single__wide\': wide }">\r\n    <div class="ms-page-single__bar-desc">\r\n      <div *ngIf="title" class="ms-page-single__bar-title">\r\n        <ng-container *nzStringTemplateOutlet="title">{{ title }}</ng-container>\r\n      </div>\r\n      <div *ngIf="subTitle" class="ms-page-single__bar-sub-title">\r\n        <ng-container *nzStringTemplateOutlet="subTitle">{{ subTitle }}</ng-container>\r\n      </div>\r\n    </div>\r\n    <div *ngIf="extra" class="ms-page-single__bar-extra">\r\n      <ng-container *nzStringTemplateOutlet="extra">{{ extra }}</ng-container>\r\n    </div>\r\n  </div>\r\n</div>\r\n<div class="ms-page-single__wrap ms-page-single__body" [ngClass]="{ \'ms-page-single__wide\': wide }">\r\n  <ng-content></ng-content>\r\n</div>\r\n',host:{"[class.ms-page-single]":"true"},changeDetection:n.ChangeDetectionStrategy.OnPush}]}],Z.ctorParameters=function(){return[{type:T}]},Z.propDecorators={wide:[{type:n.Input}],fixed:[{type:n.Input}],title:[{type:n.Input}],subTitle:[{type:n.Input}],extra:[{type:n.Input}]},j([s.InputBoolean(),w("design:type",Object)],Z.prototype,"wide",void 0),j([s.InputBoolean(),w("design:type",Object)],Z.prototype,"fixed",void 0);var Q=function(){};Q.decorators=[{type:n.Component,args:[{selector:"panel",template:'<div class="ms-panel__hd">\r\n  <div *ngIf="title" class="ms-panel__hd-title">\r\n    <ng-container *nzStringTemplateOutlet="title">{{ title }}</ng-container>\r\n  </div>\r\n  <div *ngIf="extra" class="ms-panel__hd-extra">\r\n    <ng-container *nzStringTemplateOutlet="extra">{{ extra }}</ng-container>\r\n  </div>\r\n</div>\r\n<div class="ms-panel__bd">\r\n  <ng-content></ng-content>\r\n</div>\r\n',host:{"[class.ms-panel]":"true"},changeDetection:n.ChangeDetectionStrategy.OnPush}]}],Q.propDecorators={title:[{type:n.Input}],extra:[{type:n.Input}]};var tt=function(){function t(t){this.srv=t,this.nav=!1,this.navConfig={},this.navList=[]}return Object.defineProperty(t.prototype,"hideNav",{get:function(){return this.srv.hideNav},enumerable:!1,configurable:!0}),t}();tt.decorators=[{type:n.Component,args:[{selector:"service-layout",template:'<div class="alain-ms__product" [ngClass]="{ \'alain-ms__product-col-1\': nav && !hideNav }">\r\n  <page-nav *ngIf="nav" [config]="navConfig" [list]="navList"></page-nav>\r\n  <div class="alain-ms__product-body scrollbar">\r\n    <div class="alain-ms__console">\r\n      <ng-content></ng-content>\r\n    </div>\r\n  </div>\r\n</div>\r\n'}]}],tt.ctorParameters=function(){return[{type:T}]},tt.propDecorators={nav:[{type:n.Input}],navConfig:[{type:n.Input}],navList:[{type:n.Input}]},j([s.InputBoolean(),w("design:type",Object)],tt.prototype,"nav",void 0);var et=[K,X,J,Y,Z,Q,tt],nt=function(){};nt.decorators=[{type:n.NgModule,args:[{imports:[e.CommonModule,u.RouterModule,h.FormsModule,o.AlainThemeModule.forChild(),v.NzPopoverModule,f.NzIconModule,m.NzOutletModule],declarations:et,exports:et}]}];var rt=function(){function t(t,e,n,r,i,a,o,s,c,l){var p=this;this.el=o,this.renderer=s,this.srv=c,this.doc=l,this.isFetching=!1,this.hasAllNav=!1,this.hasSidebar=!0;var d=Object.assign({hasAllNav:!1,hasSidebar:!0},r.snapshot.data);this.hasAllNav=!0===d.hasAllNav,this.hasSidebar=!0===d.hasSidebar,n.events.subscribe((function(t){if(!p.isFetching&&t instanceof u.RouteConfigLoadStart&&(p.isFetching=!0,p.scrollToTop()),t instanceof u.NavigationError)return p.isFetching=!1,void i.error("无法加载"+t.url+"路由",{nzDuration:3e3});t instanceof u.NavigationEnd&&(p.isFetching=!1,a.exists(t.url)||p.scrollToTop())}));var g={"screen-xs":"(max-width: 575px)","screen-sm":"(min-width: 576px) and (max-width: 767px)","screen-md":"(min-width: 768px) and (max-width: 991px)","screen-lg":"(min-width: 992px) and (max-width: 1199px)","screen-xl":"(min-width: 1200px)"};t.observe(["(min-width: 1200px)","(min-width: 992px) and (max-width: 1199px)","(min-width: 768px) and (max-width: 991px)","(min-width: 576px) and (max-width: 767px)","(max-width: 575px)"]).subscribe((function(){p.queryCls=Object.keys(g).find((function(t){return e.matchMedia(g[t]).matches})),p.setClass()}))}return Object.defineProperty(t.prototype,"isMobile",{get:function(){return this.srv.isMobile},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"body",{get:function(){return this.doc.body},enumerable:!1,configurable:!0}),t.prototype.scrollToTop=function(){var t=this.doc.querySelector(".alain-ms__product-body");t&&(t.scrollTop=0)},t.prototype.setClass=function(){var t,e=this,n=e.el,r=e.renderer,i=e.queryCls;s.updateHostClass(n.nativeElement,r,((t={})["alain-ms"]=!0,t[i]=!0,t),!0)},t.prototype.setBodyClass=function(){var t,e=this.srv.layout,n=e.hasTopbar,r=e.hasSidebar,i=e.hasFixed,a=e.colorWeak;s.updateHostClass(this.body,this.renderer,((t={"color-weak":a})["alain-ms__has-topbar"]=n,t["alain-ms__has-sidebar"]=r,t["alain-ms__has-fixed"]=i,t))},t.prototype.ngOnInit=function(){var t=this;this.notify$=this.srv.notify.subscribe((function(){t.setClass(),t.setBodyClass()}))},t.prototype.ngOnDestroy=function(){this.notify$.unsubscribe(),this.body.classList.remove("alain-ms__has-topbar","alain-ms__has-sidebar","alain-ms__has-fixed")},t}();rt.decorators=[{type:n.Component,args:[{selector:"layout-ms",template:'<ms-topbar [allNav]="hasAllNav"></ms-topbar>\r\n<ms-sidebar *ngIf="hasSidebar"></ms-sidebar>\r\n<div class="brand-page-loading" [hidden]="!isFetching">\r\n  <nz-spin nzSpinning></nz-spin>\r\n</div>\r\n<div class="alain-ms__body" [hidden]="isFetching">\r\n  <router-outlet></router-outlet>\r\n</div>\r\n<help></help>\r\n<theme-btn></theme-btn>\r\n'}]}],rt.ctorParameters=function(){return[{type:a.BreakpointObserver},{type:a.MediaMatcher},{type:u.Router},{type:u.ActivatedRoute},{type:d.NzMessageService},{type:y.ReuseTabService},{type:n.ElementRef},{type:n.Renderer2},{type:T},{type:void 0,decorators:[{type:n.Inject,args:[e.DOCUMENT]}]}]};var it=[{provide:n.APP_INITIALIZER,useFactory:at,deps:[n.Injector],multi:!0}];function at(t){return function(){!function(t){var e=t.get(u.Router),n=t.get(U);e.events.pipe(i.filter((function(t){return t instanceof u.ResolveEnd}))).subscribe((function(t){n.fetchPageNavs(t.state)}))}(t)}}var ot=[L,q,R,H,F,E],st=M([rt,W,G],ot),ct=[K,Y,J,Z,Q,tt,X],lt=function(){function t(){}return t.forRoot=function(){return{ngModule:t,providers:[it]}},t}();lt.decorators=[{type:n.NgModule,args:[{imports:[c.CoreModule,u.RouterModule,h.FormsModule,b.DragDropModule,nt,k.NzSpinModule,S.NzAnchorModule,x.NzAutocompleteModule,C.NzAvatarModule,P.NzDividerModule,O.NzInputModule,f.NzIconModule,o.AlainThemeModule.forChild(),_.ThemeBtnModule],declarations:M(st),exports:M(st,[ct])}]}],lt.ctorParameters=function(){return[]},t.BrandService=T,t.LayoutModule=lt,t.LayoutStateService=U,t.MSAllNavComponent=L,t.MSAllNavService=D,t.MSHelpComponent=K,t.MSLangsComponent=R,t.MSLayoutComponent=rt,t.MSLinkToDirective=X,t.MSNoticeComponent=F,t.MSPageBarComponent=J,t.MSPageNavComponent=Y,t.MSPageSingleComponent=Z,t.MSPanelComponent=Q,t.MSProductService=V,t.MSRegionComponent=E,t.MSRegionService=A,t.MSSearchComponent=q,t.MSServiceLayoutComponent=tt,t.MSSharedModule=nt,t.MSSidebarComponent=W,t.MSTopbarComponent=G,t.MSTopbarService=$,t.MSUserComponent=H,t.MS_COMPONENTS=st,t.MS_SHARED_COMPONENTS=ct,t.MS_WIDGETS=ot,t.RoutesProcessor=B,t.ɵa=it,t.ɵb=at,Object.defineProperty(t,"__esModule",{value:!0})}));
//# sourceMappingURL=fs-tw-theme-alain-ms-layout.umd.min.js.map