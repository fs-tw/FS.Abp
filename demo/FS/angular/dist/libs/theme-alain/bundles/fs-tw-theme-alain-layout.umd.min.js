!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@abp/ng.core"),require("@angular/core"),require("@angular/forms"),require("@angular/router"),require("@delon/theme/layout-default"),require("ng-zorro-antd/dropdown"),require("ng-zorro-antd/icon"),require("@abp/ng.theme.shared"),require("rxjs/operators"),require("screenfull"),require("@delon/util"),require("snq"),require("@fs-tw/account"),require("@delon/auth"),require("@delon/theme")):"function"==typeof define&&define.amd?define("@fs-tw/theme-alain/layout",["exports","@abp/ng.core","@angular/core","@angular/forms","@angular/router","@delon/theme/layout-default","ng-zorro-antd/dropdown","ng-zorro-antd/icon","@abp/ng.theme.shared","rxjs/operators","screenfull","@delon/util","snq","@fs-tw/account","@delon/auth","@delon/theme"],t):t(((e="undefined"!=typeof globalThis?globalThis:e||self)["fs-tw"]=e["fs-tw"]||{},e["fs-tw"]["theme-alain"]=e["fs-tw"]["theme-alain"]||{},e["fs-tw"]["theme-alain"].layout={}),e.ng_core,e.ng.core,e.ng.forms,e.ng.router,e.layoutDefault,e.dropdown,e.icon,e.ng_theme_shared,e.rxjs.operators,e.screenfull,e.util,e.snq,e.account,e.auth,e.theme)}(this,(function(e,t,n,r,o,a,i,s,u,c,l,d,p,g,f,m){"use strict";function h(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}function y(e){if(e&&e.__esModule)return e;var t=Object.create(null);return e&&Object.keys(e).forEach((function(n){if("default"!==n){var r=Object.getOwnPropertyDescriptor(e,n);Object.defineProperty(t,n,r.get?r:{enumerable:!0,get:function(){return e[n]}})}})),t.default=e,Object.freeze(t)}var v=y(l),b=h(p);Object.create;function z(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i}function w(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(z(arguments[t]));return e}Object.create;var x=function(e){this.navItems=e,this.trackByFn=function(e,t){return null==t?void 0:t.id},this.options={logoExpanded:"./assets/logo-full.svg",logoCollapsed:"./assets/logo.svg"},this.navItems$=this.navItems.items$.pipe(c.map((function(e){return e.map((function(e){return e}))})))};x.decorators=[{type:n.Component,args:[{selector:"layout-basic",template:'<layout-default [options]="options" [asideUser]="asideUserTpl" [content]="contentTpl">\r\n    <ng-container *ngFor="let item of navItems$ | async; trackBy: trackByFn">\r\n\r\n        <layout-default-header-item [direction]="item?.data?.direction || \'right\'">\r\n            <ng-container [ngComponentOutlet]="item.component">\r\n            </ng-container>\r\n        </layout-default-header-item>\r\n\r\n    </ng-container>\r\n    <ng-template #asideUserTpl>\r\n\r\n    </ng-template>\r\n    <ng-template #contentTpl>\r\n        <router-outlet></router-outlet>\r\n    </ng-template>\r\n</layout-default>'}]}],x.ctorParameters=function(){return[{type:u.NavItemsService}]};var S=function(){function e(){this.status=!1}return Object.defineProperty(e.prototype,"sf",{get:function(){return v},enumerable:!1,configurable:!0}),e.prototype._resize=function(){this.status=this.sf.isFullscreen},e.prototype._click=function(){this.sf.isEnabled&&this.sf.toggle()},e}();S.decorators=[{type:n.Component,args:[{selector:"header-fullscreen",template:"\n  <div layout-default-header-item-trigger nzPlacement=\"bottomRight\">\n    <i nz-icon [nzType]=\"status ? 'fullscreen-exit' : 'fullscreen'\"></i>\n  </div>\n  ",host:{"[class.d-block]":"true"},changeDetection:n.ChangeDetectionStrategy.OnPush}]}],S.propDecorators={_resize:[{type:n.HostListener,args:["window:resize"]}],_click:[{type:n.HostListener,args:["click"]}]};var L=function(){function e(e,t){this.configState=e,this.sessionState=t,this.showLangText=!0,this.languages$=this.configState.getDeep$("localization.languages")}return Object.defineProperty(e.prototype,"defaultLanguage$",{get:function(){var e=this;return this.languages$.pipe(c.map((function(t){var n=b.default((function(){return t.find((function(t){return t.cultureName===e.selectedLangCulture}))}),{});return{displayName:n.displayName||"",flagIcon:n.flagIcon}})))},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"dropdownLanguages$",{get:function(){var e=this;return this.languages$.pipe(c.map((function(t){return b.default((function(){return t.filter((function(t){return t.cultureName!==e.selectedLangCulture}))}))}),[]))},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"selectedLangCulture",{get:function(){return this.sessionState.getLanguage()},enumerable:!1,configurable:!0}),e.prototype.change=function(e){this.sessionState.setLanguage(e)},e}();L.decorators=[{type:n.Component,args:[{selector:"header-i18n",template:'<ng-container *ngIf="defaultLanguage$ | async as defaultLang">\r\n    <i *ngIf="!showLangText" nz-dropdown [nzDropdownMenu]="langMenu" nzPlacement="bottomRight" nz-icon\r\n        nzType="global"></i>\r\n    <div *ngIf="showLangText" nz-dropdown [nzDropdownMenu]="langMenu" nzPlacement="bottomRight">\r\n        <i nz-icon nzType="global"></i>\r\n        {{ defaultLang.displayName }}\r\n        <i nz-icon nzType="down"></i>\r\n    </div>\r\n    <nz-dropdown-menu #langMenu="nzDropdownMenu">\r\n        <ul nz-menu>\r\n            <li nz-menu-item *ngFor="let lang of (dropdownLanguages$ | async)"\r\n                [nzSelected]="lang.displayName === defaultLang.displayName" (click)="change(lang.cultureName)">\r\n                {{ lang?.displayName }}\r\n            </li>\r\n        </ul>\r\n    </nz-dropdown-menu>\r\n</ng-container>',changeDetection:n.ChangeDetectionStrategy.OnPush}]}],L.ctorParameters=function(){return[{type:t.ConfigStateService},{type:t.SessionStateService}]},L.propDecorators={showLangText:[{type:n.Input}]},function(e,t,n,r){var o,a=arguments.length,i=a<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(i=(a<3?o(i):a>3?o(t,n,i):o(t,n))||i);a>3&&i&&Object.defineProperty(t,n,i)}([d.InputBoolean(),function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}("design:type",Object)],L.prototype,"showLangText",void 0);var P=function(){function e(e,t,n){this.authService=e,this.router=t,this.configStateService=n,this.currentUser$=this.configStateService.getOne$("currentUser")}return e.prototype.initLogin=function(){this.authService.initLogin()},e.prototype.logout=function(){var e=this;this.authService.logout().subscribe((function(){e.router.navigate(["/"],{state:{redirectUrl:e.router.url}})}))},e}();P.decorators=[{type:n.Component,args:[{selector:"header-user",template:'<ng-template #loginBtnTpl>\r\n    <div class="alain-default__nav-item d-flex align-items-center px-sm" nz-dropdown nzPlacement="bottomRight"\r\n        (click)="initLogin()">\r\n        {{\'AbpAccount::Login\' | abpLocalization}}\r\n    </div>\r\n</ng-template>\r\n<ng-container *ngIf="(currentUser$ | async)?.isAuthenticated; else loginBtnTpl">\r\n    <div class="alain-default__nav-item d-flex align-items-center px-sm" nz-dropdown nzPlacement="bottomRight"\r\n        [nzDropdownMenu]="userMenu">\r\n        \x3c!-- <nz-avatar [nzSrc]="user.avatar" nzSize="small" class="mr-sm"></nz-avatar> --\x3e\r\n        {{ (currentUser$ | async)?.userName }}\r\n    </div>\r\n    <nz-dropdown-menu #userMenu="nzDropdownMenu">\r\n        <div nz-menu class="width-sm">\r\n            <div nz-menu-item routerLink="/account/manage-profile">\r\n                <i nz-icon nzType="user" class="mr-sm"></i>\r\n                {{ \'AbpAccount::ManageYourProfile\' | abpLocalization }}\r\n            </div>\r\n            <li nz-menu-divider></li> \r\n            <div nz-menu-item (click)="logout()">\r\n                <i nz-icon nzType="logout" class="mr-sm"></i>\r\n                {{ \'AbpUi::Logout\' | abpLocalization }}\r\n            </div>\r\n        </div>\r\n    </nz-dropdown-menu>\r\n</ng-container>',changeDetection:n.ChangeDetectionStrategy.OnPush}]}],P.ctorParameters=function(){return[{type:g.AuthService},{type:o.Router},{type:t.ConfigStateService}]};var k=function(){};k.decorators=[{type:n.Component,args:[{selector:"layout-blank",template:"<router-outlet></router-outlet> ",host:{"[class.alain-blank]":"true"}}]}];var j=function(){function e(e){this.tokenService=e,this.links=[{title:"帮助",href:""},{title:"隐私",href:""},{title:"条款",href:""}]}return e.prototype.ngOnInit=function(){this.tokenService.clear()},e}();j.decorators=[{type:n.Component,args:[{selector:"layout-passport",template:'<div class="container">\r\n  <header-i18n showLangText="false" class="langs"></header-i18n>\r\n  <div class="wrap">\r\n    <div class="top">\r\n      <div class="head">\r\n        <img class="logo" src="./assets/logo-color.svg" />\r\n        <span class="title">ng-alain</span>\r\n      </div>\r\n      <div class="desc">FS Demo</div>\r\n    </div>\r\n    <router-outlet></router-outlet>\r\n  </div>\r\n</div>\r\n',styles:[":host ::ng-deep .container{background:#f0f2f5;display:flex;flex-direction:column;min-height:100%}:host ::ng-deep .langs{height:40px;line-height:44px;text-align:right;width:100%}:host ::ng-deep .langs .anticon{cursor:pointer;font-size:14px;margin-right:24px;margin-top:24px;vertical-align:top}:host ::ng-deep .wrap{flex:1;padding:32px 0}:host ::ng-deep .ant-form-item{display:flex;justify-content:space-between;margin-bottom:24px}@media (min-width:768px){:host ::ng-deep .container{background-image:url(https://gw.alipayobjects.com/zos/rmsportal/TVYTbAXWheQpRcWDaDMu.svg);background-position:center 110px;background-repeat:no-repeat;background-size:100%}:host ::ng-deep .wrap{padding:32px 0 24px}}:host ::ng-deep .top{text-align:center}:host ::ng-deep .header{height:44px;line-height:44px}:host ::ng-deep .header a{text-decoration:none}:host ::ng-deep .logo{height:44px;margin-right:16px}:host ::ng-deep .title{color:rgba(0,0,0,.85);font-family:Myriad Pro,Helvetica Neue,Arial,Helvetica,sans-serif;font-size:33px;font-weight:600;position:relative;vertical-align:middle}:host ::ng-deep .desc{color:rgba(0,0,0,.45);font-size:14px;margin-bottom:40px;margin-top:12px}[data-theme=dark] :host ::ng-deep .container{background:#141414}[data-theme=dark] :host ::ng-deep .title{color:hsla(0,0%,100%,.85)}[data-theme=dark] :host ::ng-deep .desc{color:hsla(0,0%,100%,.45)}@media (min-width:768px){[data-theme=dark] :host ::ng-deep .container{background-image:none}}[data-theme=compact] :host ::ng-deep .ant-form-item{margin-bottom:16px}"]}]}],j.ctorParameters=function(){return[{type:void 0,decorators:[{type:n.Inject,args:[f.DA_SERVICE_TOKEN]}]}]};var M=[{provide:n.APP_INITIALIZER,useFactory:C,deps:[n.Injector],multi:!0}];function C(e){return function(){var n=e.get(m.MenuService),r=e.get(t.RoutesService),o=e.get(t.LocalizationPipe),a=e.get(t.PermissionService),i=e.get(m.SettingsService);function s(e){var t={text:o.transform(e.name),link:e.path,icon:e.iconClass,children:[]};return e.children.filter((function(e){return u(e.requiredPolicy)})).length>0&&(t.children=e.children.map((function(e){return s(e)}))),t}function u(e){return!e||a.getGrantedPolicy(e)}r.visible$.subscribe((function(e){n.clear();var t=e.filter((function(e){return"AbpUiNavigation::Menu:Administration"==e.name&&u(e.requiredPolicy)})).map((function(e){return s(e)}));n.add(t)})),i.notify.subscribe((function(e){setTimeout((function(){window.dispatchEvent(new Event("resize"))}),0)}))}}var T=[x,k,j],D=[L,P,S],O=function(){function e(){}return e.forRoot=function(){return{ngModule:e,providers:[M]}},e}();O.decorators=[{type:n.NgModule,args:[{imports:[t.CoreModule,r.FormsModule,o.RouterModule,a.LayoutDefaultModule,i.NzDropDownModule,s.NzIconModule],declarations:w(T,D),exports:w(T,D)}]}],e.HeaderFullScreenComponent=S,e.HeaderI18nComponent=L,e.HeaderUserComponent=P,e.LayoutBasicComponent=x,e.LayoutBlankComponent=k,e.LayoutModule=O,e.LayoutPassportComponent=j,e.ɵa=M,e.ɵb=C,Object.defineProperty(e,"__esModule",{value:!0})}));
//# sourceMappingURL=fs-tw-theme-alain-layout.umd.min.js.map