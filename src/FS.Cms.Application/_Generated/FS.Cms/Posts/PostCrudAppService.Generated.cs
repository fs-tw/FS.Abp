//------------------------------------------------------------------------------
// This is auto-generated code.
//------------------------------------------------------------------------------
// This code was generated by Entity Developer tool using the template for generating CrudApplication.
// 1.102.0.0
//
// Changes to this file may cause incorrect behavior and will be lost if
// the code is regenerated.
//------------------------------------------------------------------------------
using System;
using System.Collections.Generic;
using System.Linq;
using System.Threading.Tasks;
using Volo.Abp.Application.Dtos;
using Volo.Abp.Application.Services;

namespace FS.Cms.Posts
{
    public partial class PostCrudAppService : 
        FS.Abp.Application.Services.CrudAppService<FS.Cms.Posts.Post, FS.Cms.Posts.Dtos.PostDto, Guid, FS.Cms.Posts.Dtos.PostGetListInput, FS.Cms.Posts.Dtos.PostCreateInput, FS.Cms.Posts.Dtos.PostUpdateInput>,
        IPostCrudAppService
    {
        private readonly IPostRepository _repository;

        public PostCrudAppService(IPostRepository repository) : base(repository)
        {
            this._repository = repository;
        }

        public async Task<PagedResultDto<FS.Cms.Posts.Dtos.PostDto>> GetBlogAsync(FS.Cms.Blogs.Dtos.BlogPrimaryKeyDto foreignKey, FS.Abp.Application.Dtos.SearchResultRequestDto searchInput)
        {
            await CheckGetListPolicyAsync().ConfigureAwait(false);
            var foreignKeySpec = new FS.Abp.Specifications.PropertiesEqualitySpecification<Post>(foreignKey);
            var query = this.Repository.WithDetails().Where(foreignKeySpec);
            var result = await this.SearchedAndPagedAndSortedOperation.ListAsync(searchInput, (input) => query).ConfigureAwait(false);
            return CreatePagedResultDto<FS.Cms.Posts.Dtos.PostDto>(result);
        }


    }
}
