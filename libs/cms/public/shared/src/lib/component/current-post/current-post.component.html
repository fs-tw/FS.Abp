<!--template-1 -->
<div class="row" *ngIf="!displayType || displayType == 'list' ">
  <aside class="col-lg-4 ml-lg-auto">
    <div class="sidebar">
      <div class="clearfix">
        <h3 class="title">文章類型</h3>
        <div class="separator-2"></div>
        <nav>
          <ul class="nav flex-column list-style-icons">
            <li class="nav-item">
              <a class="nav-link pointer" (click)="selectNews(null)"
                [ngClass]="params.blogCodeId == null ? 'active':''">
                <i class="fa fa-caret-right pr-10"></i>
                全部
              </a>
            </li>
            <li class="nav-item" *ngFor="let news of newsDefinition">
              <a class="nav-link pointer" (click)="selectNews(news.codes)"
                [ngClass]="params.blogCodeId == news.codes.id ?'active':''">
                <i class="fa fa-caret-right pr-10"></i>
                {{ news.codes.displayName }}
              </a>
            </li>
          </ul>
        </nav>
      </div>
    </div>
  </aside>

  <div class="col-lg-8">
    <div class="clearfix">
      <h3 class="title">
        {{selectedPostType?.displayName || '全部'}}
      </h3>
      <div class="separator-2"></div>
    </div>
    <ng-container *ngIf="datas.length > 0 && !loading; else noPostData">
      <div class="tab-content clear-style" *ngFor="let post of datas;">
        <div class="tab-pane active" id="pill-1">
          <div class="listing-item mb-20">
            <div class="row grid-space-0">
              <div class="col-md-6 col-lg-4 col-xl-3" *ngIf="showImg">
                <div style="height: 100%;">
                  <img *ngIf="post.coverImage" [src]="baseUrl+post.coverImage.url" style="height: 121px;"
                    alt="{{post.title}}" class="img-cover" />
                  <img *ngIf="!post.coverImage" src='https://dummyimage.com/600x400/000/fff' style="height: 121px;"
                    alt="{{post.title}}" />
                </div>
              </div>
              <div [ngClass]="{'col-md-6 col-lg-8 col-xl-9':showImg,'col-xs-12 col-md-12 col-lg-12 col-xl-12':!showImg}"
                style="padding-left: 1em">

                <h3 class="margin-clear">
                  <a style="color: #09afdf;cursor: pointer;" [href]="post.url"
                    *ngIf="post.displayMode == 1">{{ post.title }}</a>
                  <a style="color: #09afdf;cursor: pointer;" (click)="goToItems(post.id)" *ngIf="post.displayMode == 0"
                    target="_blank">{{ post.title }}</a>
                </h3>
                <p class="margin-clear">更新日期:{{post.lastModificationTime | date:'yyyy-MM-dd HH:mm:ss'}}</p>
                <div>
                  {{ (post.subtitle?post.subtitle:'') | textOverflow: 12 }}
                </div>
                <div class="text-right" *ngIf="post.displayMode == 1">
                  <a [href]="post.url" target="_blank" class="btn btn-sm btn-default">
                    點選連結
                  </a>
                </div>
                <div class="text-right" *ngIf="post.displayMode == 0">
                  <div class="btn btn-sm btn-default" (click)="goToItems(post.id)">
                    閱讀更多
                  </div>
                </div>

              </div>
            </div>
          </div>
        </div>
      </div>
    </ng-container>

    <button class="btn btn-default btn-block" (click)="goToItems(null,selectedPostType)">閱讀更多</button>
    <ng-template #noPostData>
      <p *ngIf="!loading">目前沒有資料 <a (click)="selectNews(null)" class="pointer color-default">點我查看最新消息</a></p>
      <h3 class="text-center" *ngIf="loading">讀取中 </h3>
    </ng-template>
  </div>
</div>

<!--template-2: card list -->
<ng-container *ngIf="displayType == 'card'">
  <div class="row"  *ngIf="datas.length > 0 && !loading; else noData">
    <div class="col-md-3" *ngFor="let post of datas;">
      <div class="image-box style-2 mb-20" style="border:1px solid rgba(0,0,0,.1)">
        <div class="overlay-container overlay-visible">
          <a href="javascript:void(0)" (click)="goToItems(post.id)">
          <img *ngIf="post.coverImage" [src]="baseUrl+post.coverImage.url" alt="{{post.title}}" class="img-cover" />
          <img *ngIf="!post.coverImage" src='https://dummyimage.com/600x400/000/fff' alt="{{post.title}}" />
        </a>
        </div>
        <div style="margin-left:1em;margin-top: 1em">
          <h4> <a href="javascript:void(0)" (click)="goToItems(post.id)">{{post.title}}</a></h4>
          <p style="color: black" style="min-height: 44px">{{post.subtitle}}</p>
        </div>
      </div>
    </div>
  </div>
  <ng-template #noData>
      <h3 class="text-center" *ngIf="!loading">目前沒有資料 </h3>
      <h3 class="text-center" *ngIf="loading">讀取中 </h3>
    </ng-template>
  <div class="row" *ngIf="datas.length > 0">
    <div class="col-md-12 text-center">
      <button class="btn btn-default" (click)="goToItems(null,selectedPostType)">閱讀更多</button>
    </div>
  </div>
</ng-container>