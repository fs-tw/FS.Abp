<section class="section light-gray-bg clearfix" style="min-height:80vh">
  <div class="container">
    <div class="row">
      <aside class="col-lg-4 ml-lg-auto">
        <div class="sidebar">
          <div class="clearfix">
            <h3 class="title">文章類型</h3>
            <div class="separator-2"></div>
            <nav>
              <ul class="nav flex-column list-style-icons">
                <li class="nav-item">
                  <a class="nav-link pointer" (click)="selectBlog(null)" [ngClass]="{ 'active': !selectedBlogId }">
                    <i class="fa fa-caret-right pr-10"></i>
                    全部
                  </a>
                </li>
                
                <li class="nav-item" *ngFor="let blog of blogDatas">
                  <a class="nav-link pointer" (click)="selectBlog(blog)"
                    [ngClass]="{ 'active': blog.codesId==selectedBlogId }">
                    <i class="fa fa-caret-right pr-10"></i>
                    {{ blog.displayName }}
                  </a>
                </li>                            
              </ul>
            </nav>


            <div class="block clearfix" style="margin-top: 50px;">
              <div>
                <div class="form-group has-feedback">
                  <input type="text" class="form-control" [(ngModel)]="keyword" [ngModelOptions]="{ standalone: true }"
                    placeholder="請輸入文字">
                  <button class="btn btn-default form-control-feedback" (click)="search()"><i
                      style="color: white;margin-left: -5px;margin-top: -10px;" class="fa fa-search"></i></button>
                </div>
              </div>
            </div>

          </div>
        </div>
      </aside>
      <div class="col-lg-8">
        <div class="clearfix">
          <h3 class="title">
            {{title}}列表
          </h3>
          <div class="separator-2"></div>
        </div>
        <ng-container *ngIf="(postsData$ | async).length > 0; else noPostData">
          <div class="tab-content clear-style" *ngFor="let post of (postsData$ | async)">
            <div class="tab-pane active" id="pill-1">
              <div class="listing-item mb-20">
                <div class="row grid-space-0">
                  <div class="col-md-6 col-lg-4 col-xl-3">
                    <div>
                      <img *ngIf="post.coverImage" [src]="getUrl(post.coverImage.url)" style="height: 121px;"
                        alt="{{post.title}}" />

                   
                      <img *ngIf="!post.coverImage" src='https://dummyimage.com/600x400/000/fff' style="height: 121px;"
                        alt="{{post.title}}" />

                    </div>
                  </div>
                  <div class="col-md-6 col-lg-8 col-xl-9">
                    <div class="body">
                      <h3 class="margin-clear">
                        <a [href]="post.url" *ngIf="post.displayMode == 1">{{ post.title }}</a>
                        <a [routerLink]="[post.id]" *ngIf="post.displayMode == 0">{{ post.title }}</a>
                      </h3>
                      <p class="margin-clear">分類：{{post.blogDisplayName}}</p>
                      <p class="margin-clear" *ngIf="post.lastModificationTime">更新日期：{{post.lastModificationTime | date:'yyyy-MM-dd HH:mm:ss'}}</p>

                      <div>
                        <p class="margin-clear" *ngIf="post.subtitle">
                          {{ (post.subtitle?post.subtitle:'') | textOverflow: 20 }}
                        </p>
                      </div>



                      <div class="text-right" *ngIf="post.displayMode == 1">
                        <a [href]="post.url" target="_blank" class="btn btn-sm btn-default-transparent">
                          點選連結
                        </a>
                      </div>
                      <div class="text-right" *ngIf="post.displayMode == 0">
                        <a [routerLink]="[post.id]" class="btn btn-sm btn-default-transparent">
                          閱讀更多
                        </a>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </ng-container>
        <ng-template #noPostData>
          <p>目前沒有資料 <a (click)="selectBlog(null)" class="pointer color-default">點我查看最新消息</a></p>
        </ng-template>
        <fs-pagination [totalCount]="totalCount$ | async" [pageSize]="5" (onChangePage)="changPostPage($event)">
        </fs-pagination>
      </div>
    </div>
  </div>
</section>