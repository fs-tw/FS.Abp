!function(){function e(a,i,o){return(e=t()?Reflect.construct:function(e,t,a){var i=[null];i.push.apply(i,t);var o=new(Function.bind.apply(e,i));return a&&n(o,a.prototype),o}).apply(null,arguments)}function t(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}function n(e,t){return(n=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function a(e){return function(e){if(Array.isArray(e))return i(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return i(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return i(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function r(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function c(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(window.webpackJsonp=window.webpackJsonp||[]).push([[3],{"F/qr":function(t,n,i){"use strict";i.r(n),i.d(n,"CreateEdition",function(){return We}),i.d(n,"CreateTenant",function(){return Qe}),i.d(n,"DEFAULT_SAAS_CREATE_FORM_PROPS",function(){return Ct}),i.d(n,"DEFAULT_SAAS_EDIT_FORM_PROPS",function(){return Ot}),i.d(n,"DEFAULT_SAAS_ENTITY_ACTIONS",function(){return yt}),i.d(n,"DEFAULT_SAAS_ENTITY_PROPS",function(){return Tt}),i.d(n,"DEFAULT_SAAS_TOOLBAR_ACTIONS",function(){return St}),i.d(n,"DeleteEdition",function(){return Xe}),i.d(n,"DeleteTenant",function(){return $e}),i.d(n,"EditionService",function(){return tt}),i.d(n,"EditionsComponent",function(){return ot}),i.d(n,"EditionsUsageWidgetComponent",function(){return ct}),i.d(n,"GetEditionById",function(){return He}),i.d(n,"GetEditions",function(){return Ke}),i.d(n,"GetLatestTenants",function(){return et}),i.d(n,"GetTenantById",function(){return Pe}),i.d(n,"GetTenants",function(){return qe}),i.d(n,"GetUsageStatistics",function(){return Je}),i.d(n,"LatestTenantsWidgetComponent",function(){return st}),i.d(n,"SAAS_CREATE_FORM_PROP_CONTRIBUTORS",function(){return Et}),i.d(n,"SAAS_EDIT_FORM_PROP_CONTRIBUTORS",function(){return Nt}),i.d(n,"SAAS_ENTITY_ACTION_CONTRIBUTORS",function(){return kt}),i.d(n,"SAAS_ENTITY_PROP_CONTRIBUTORS",function(){return jt}),i.d(n,"SAAS_TOOLBAR_ACTION_CONTRIBUTORS",function(){return Ft}),i.d(n,"SaasExtensionsGuard",function(){return wt}),i.d(n,"SaasModule",function(){return Gt}),i.d(n,"SaasState",function(){return at}),i.d(n,"SaasStateService",function(){return Mt}),i.d(n,"TenantService",function(){return nt}),i.d(n,"TenantsComponent",function(){return rt}),i.d(n,"UpdateEdition",function(){return Ye}),i.d(n,"UpdateTenant",function(){return ze}),i.d(n,"\u02750",function(){return it}),i.d(n,"\u0275a",function(){return rt}),i.d(n,"\u0275ba",function(){return jt}),i.d(n,"\u0275bb",function(){return Et}),i.d(n,"\u0275bc",function(){return Nt}),i.d(n,"\u0275c",function(){return at}),i.d(n,"\u0275d",function(){return nt}),i.d(n,"\u0275e",function(){return tt}),i.d(n,"\u0275f",function(){return qe}),i.d(n,"\u0275g",function(){return Qe}),i.d(n,"\u0275h",function(){return ze}),i.d(n,"\u0275i",function(){return $e}),i.d(n,"\u0275j",function(){return Ke}),i.d(n,"\u0275k",function(){return We}),i.d(n,"\u0275l",function(){return Ye}),i.d(n,"\u0275m",function(){return Xe}),i.d(n,"\u0275n",function(){return Je}),i.d(n,"\u0275o",function(){return et}),i.d(n,"\u0275t",function(){return ot}),i.d(n,"\u0275u",function(){return ct}),i.d(n,"\u0275v",function(){return st}),i.d(n,"\u0275w",function(){return At}),i.d(n,"\u0275x",function(){return wt}),i.d(n,"\u0275y",function(){return kt}),i.d(n,"\u0275z",function(){return Ft});var r=i("mrSG"),u=i("HmNo"),l=i("1REP"),d=i("J7bl"),p=i("fXoL"),b=i("AcyG"),f=i("vkgz"),v=i("nYR2"),h=i("eIep"),g=i("IzEk"),m=i("lJxs"),y=i("CqXF"),S=i("3Pt+"),T=i("LRne"),C=i("2Vo4"),O=i("rBLV"),k=i("1kSV"),F=i("ofXK");function j(e,t){1&e&&(p.ac(0,"h3"),p.Sc(1),p.pc(2,"abpLocalization"),p.Zb()),2&e&&(p.Gb(1),p.Tc(p.qc(2,1,"AbpFeatureManagement::Features")))}function E(e,t){1&e&&p.Wb(0)}var N=function(e){return{$implicit:e}};function w(e,t){if(1&e){var n=p.bc();p.Yb(0),p.ac(1,"div",22),p.ac(2,"input",23),p.kc("ngModelChange",function(e){return p.Ic(n),p.oc().$implicit.value=e})("ngModelChange",function(e){p.Ic(n);var t=p.oc().$implicit;return p.oc(5).onCheckboxClick(e,t)}),p.Zb(),p.ac(3,"label",24),p.Sc(4),p.Zb(),p.Qc(5,E,1,0,"ng-container",25),p.Zb(),p.Xb()}if(2&e){var a=p.oc().$implicit;p.oc(3);var i=p.Fc(6);p.Gb(2),p.vc("id",a.name)("ngModel",a.value),p.Gb(1),p.vc("htmlFor",a.name),p.Gb(1),p.Tc(a.displayName),p.Gb(1),p.vc("ngTemplateOutlet",i)("ngTemplateOutletContext",p.zc(6,N,a.description))}}function I(e,t){1&e&&p.Wb(0)}function A(e,t){if(1&e){var n=p.bc();p.Yb(0),p.ac(1,"div",26),p.ac(2,"label",27),p.Sc(3),p.Zb(),p.ac(4,"input",28),p.kc("ngModelChange",function(e){return p.Ic(n),p.oc().$implicit.value=e}),p.Zb(),p.Qc(5,I,1,0,"ng-container",25),p.Zb(),p.Xb()}if(2&e){var a=p.oc().$implicit;p.oc(3);var i=p.Fc(6);p.Gb(2),p.vc("htmlFor",a.name),p.Gb(1),p.Tc(a.displayName),p.Gb(1),p.vc("id",a.name)("ngModel",a.value)("abpFeatureManagementFreeText",a),p.Gb(1),p.vc("ngTemplateOutlet",i)("ngTemplateOutletContext",p.zc(7,N,a.description))}}function G(e,t){if(1&e&&(p.ac(0,"option",32),p.Sc(1),p.pc(2,"abpLocalization"),p.Zb()),2&e){var n=t.$implicit;p.vc("ngValue",n.value),p.Gb(1),p.Uc(" ",p.qc(2,2,(null==n.displayText?null:n.displayText.resourceName)+"::"+(null==n.displayText?null:n.displayText.name)),"")}}function M(e,t){1&e&&p.Wb(0)}function Z(e,t){if(1&e){var n=p.bc();p.Yb(0),p.ac(1,"div",26),p.ac(2,"label",27),p.Sc(3),p.Zb(),p.ac(4,"select",30),p.kc("ngModelChange",function(e){return p.Ic(n),p.oc(2).$implicit.value=e}),p.Qc(5,G,3,4,"option",31),p.Zb(),p.Qc(6,M,1,0,"ng-container",25),p.Zb(),p.Xb()}if(2&e){var a=p.oc(2).$implicit;p.oc(3);var i=p.Fc(6),o=p.oc(2);p.Gb(2),p.vc("htmlFor",a.name),p.Gb(1),p.Tc(a.displayName),p.Gb(1),p.vc("id",a.name)("ngModel",a.value),p.Gb(1),p.vc("ngForOf",null==a.valueType.itemSource?null:a.valueType.itemSource.items)("ngForTrackBy",o.track.by("value")),p.Gb(1),p.vc("ngTemplateOutlet",i)("ngTemplateOutletContext",p.zc(8,N,a.description))}}function R(e,t){if(1&e&&(p.Yb(0),p.Qc(1,Z,7,10,"ng-container",29),p.Xb()),2&e){var n=p.oc().$implicit;p.Gb(1),p.vc("ngIf",null==n.valueType.itemSource||null==n.valueType.itemSource.items?null:n.valueType.itemSource.items.length)}}function U(e,t){if(1&e&&(p.Yb(0),p.Sc(1),p.Xb()),2&e){var n=p.oc().$implicit;p.Gb(1),p.Tc(n.displayName)}}function B(e,t){if(1&e){var n=p.bc();p.ac(0,"div",19),p.kc("keyup.enter",function(){return p.Ic(n),p.oc(5).save()}),p.Qc(1,w,6,8,"ng-container",20),p.Qc(2,A,6,9,"ng-container",20),p.Qc(3,R,2,1,"ng-container",20),p.Qc(4,U,2,1,"ng-container",21),p.Zb()}if(2&e){var a=t.$implicit,i=p.oc(5);p.vc("ngStyle",a.style)("ngSwitch",null==a.valueType?null:a.valueType.name),p.Gb(1),p.vc("ngSwitchCase",i.valueTypes.ToggleStringValueType),p.Gb(1),p.vc("ngSwitchCase",i.valueTypes.FreeTextStringValueType),p.Gb(1),p.vc("ngSwitchCase",i.valueTypes.SelectionStringValueType)}}function D(e,t){if(1&e&&(p.ac(0,"h4"),p.Sc(1),p.Zb(),p.Vb(2,"hr",17),p.Qc(3,B,5,5,"div",18)),2&e){var n=p.oc().$implicit,a=p.oc(3);p.Gb(1),p.Tc(a.selectedGroupDisplayName),p.Gb(2),p.vc("ngForOf",a.features[n.name])("ngForTrackBy",a.track.by("id"))}}function x(e,t){if(1&e&&(p.ac(0,"li",14),p.ac(1,"a",15),p.Sc(2),p.Zb(),p.Qc(3,D,4,3,"ng-template",16),p.Zb()),2&e){var n=t.$implicit;p.vc("ngbNavItem",n.displayName),p.Gb(2),p.Tc(n.displayName)}}function L(e,t){if(1&e&&(p.ac(0,"small",34),p.Sc(1),p.Zb()),2&e){var n=p.oc().$implicit;p.Gb(1),p.Tc(n)}}function V(e,t){1&e&&p.Qc(0,L,2,1,"small",33),2&e&&p.vc("ngIf",t.$implicit)}function _(e,t){1&e&&(p.ac(0,"div",35),p.Sc(1),p.pc(2,"abpLocalization"),p.Zb()),2&e&&(p.Gb(1),p.Uc(" ",p.qc(2,1,"AbpFeatureManagement::NoFeatureFoundMessage")," "))}function q(e,t){if(1&e){var n=p.bc();p.ac(0,"div",5),p.ac(1,"div",6),p.ac(2,"ul",7,8),p.kc("activeIdChange",function(e){return p.Ic(n),p.oc(2).selectedGroupDisplayName=e}),p.Qc(4,x,4,2,"li",9),p.Zb(),p.Zb(),p.Qc(5,V,1,1,"ng-template",null,10,p.Rc),p.ac(7,"div",11),p.Vb(8,"div",12),p.Zb(),p.Qc(9,_,3,3,"div",13),p.Zb()}if(2&e){var a=p.Fc(3),i=p.oc(2);p.Gb(2),p.vc("activeId",i.selectedGroupDisplayName),p.Gb(2),p.vc("ngForOf",i.groups)("ngForTrackBy",i.track.by("name")),p.Gb(4),p.vc("ngbNavOutlet",a),p.Gb(1),p.vc("ngIf",!i.groups.length)}}function P(e,t){if(1&e){var n=p.bc();p.ac(0,"abp-button",39),p.kc("click",function(){return p.Ic(n),p.oc(3).save()}),p.Sc(1),p.pc(2,"abpLocalization"),p.Zb()}if(2&e){var a=p.oc(3);p.vc("disabled",a.modalBusy),p.Gb(1),p.Uc(" ",p.qc(2,2,"AbpFeatureManagement::Save")," ")}}function Q(e,t){if(1&e&&(p.ac(0,"button",36,37),p.Sc(2),p.pc(3,"abpLocalization"),p.Zb(),p.Qc(4,P,3,4,"abp-button",38)),2&e){var n=p.oc(2);p.Gb(2),p.Uc(" ",p.qc(3,2,"AbpFeatureManagement::Cancel")," "),p.Gb(2),p.vc("ngIf",n.groups.length)}}function z(e,t){if(1&e){var n=p.bc();p.ac(0,"abp-modal",1),p.kc("visibleChange",function(e){return p.Ic(n),p.oc().visible=e}),p.Qc(1,j,3,3,"ng-template",null,2,p.Rc),p.Qc(3,q,10,5,"ng-template",null,3,p.Rc),p.Qc(5,Q,5,4,"ng-template",null,4,p.Rc),p.Zb()}if(2&e){var a=p.oc();p.vc("visible",a.visible)("busy",a.modalBusy)}}var $,K,H=(($=function e(t){var n=this;s(this,e),this.restService=t,this.apiName="AbpFeatureManagement",this.get=function(e,t){return n.restService.request({method:"GET",url:"/api/feature-management/features",params:{providerName:e,providerKey:t}},{apiName:n.apiName})},this.update=function(e,t,a){return n.restService.request({method:"PUT",url:"/api/feature-management/features",params:{providerName:e,providerKey:t},body:a},{apiName:n.apiName})}}).\u0275fac=function(e){return new(e||$)(p.hc(u.U))},$.\u0275prov=Object(p.Qb)({factory:function(){return new $(Object(p.hc)(u.U))},token:$,providedIn:"root"}),$),W=function(e){return e.ToggleStringValueType="ToggleStringValueType",e.FreeTextStringValueType="FreeTextStringValueType",e.SelectionStringValueType="SelectionStringValueType",e}({}),Y=((K=function(){function e(t,n,a,i,o){s(this,e),this.track=t,this.service=n,this.store=a,this.configState=i,this.appConfigService=o,this.groups=[],this.valueTypes=W,this.visibleChange=new p.q,this.modalBusy=!1}return c(e,[{key:"visible",get:function(){return this._visible},set:function(e){this._visible!==e&&(this._visible=e,this.visibleChange.emit(e),e&&this.openModal())}},{key:"openModal",value:function(){if(!this.providerName)throw new Error("providerName is required.");this.getFeatures()}},{key:"getFeatures",value:function(){var e=this;this.service.get(this.providerName,this.providerKey).subscribe(function(t){e.groups=t.groups.map(function(e){return{name:e.name,displayName:e.displayName}}),e.selectedGroupDisplayName=e.groups[0].displayName,e.features=t.groups.reduce(function(e,t){return Object.assign(Object.assign({},e),o({},t.name,(n=t.features,a=document.body.dir,i="margin-".concat("rtl"===a?"right":"left",".px"),n.map(function(e){var t,n=(null===(t=e.valueType)||void 0===t?void 0:t.name)===W.ToggleStringValueType?"true"===(e.value||"").toLowerCase():e.value;return Object.assign(Object.assign({},e),{value:n,initialValue:n,style:o({},i,20*e.depth)})}))));var n,a,i},{})})}},{key:"save",value:function(){var e=this;if(!this.modalBusy){var t=[];Object.keys(this.features).forEach(function(n){e.features[n].forEach(function(e){e.value!==e.initialValue&&t.push({name:e.name,value:"".concat(e.value)})})}),t.length?(this.modalBusy=!0,this.service.update(this.providerName,this.providerKey,{features:t}).pipe(Object(v.a)(function(){return e.modalBusy=!1})).subscribe(function(){e.visible=!1,e.providerKey||e.appConfigService.get().pipe(Object(f.a)(function(t){return e.configState.setState(t)})).subscribe()})):this.visible=!1}}},{key:"onCheckboxClick",value:function(e,t){e?this.checkToggleAncestors(t):this.uncheckToggleDescendants(t)}},{key:"uncheckToggleDescendants",value:function(e){var t=this;this.findAllDescendantsOfByType(e,W.ToggleStringValueType).forEach(function(e){return t.setFeatureValue(e,!1)})}},{key:"checkToggleAncestors",value:function(e){var t=this;this.findAllAncestorsOfByType(e,W.ToggleStringValueType).forEach(function(e){return t.setFeatureValue(e,!0)})}},{key:"findAllAncestorsOfByType",value:function(e,t){for(var n=this.findParentByType(e,t),a=[];n;)a.push(n),n=this.findParentByType(n,t);return a}},{key:"findAllDescendantsOfByType",value:function(e,t){for(var n=[],i=[e];i.length;){var o=i.pop(),r=this.findChildrenByType(o,t);n.push.apply(n,a(r)),i.push.apply(i,a(r))}return n}},{key:"findParentByType",value:function(e,t){return this.getCurrentGroup().find(function(n){return n.valueType.name===t&&n.name===e.parentName})}},{key:"findChildrenByType",value:function(e,t){return this.getCurrentGroup().filter(function(n){return n.valueType.name===t&&n.parentName===e.name})}},{key:"getCurrentGroup",value:function(){var e;return null!==(e=this.features[this.selectedGroupDisplayName])&&void 0!==e?e:[]}},{key:"setFeatureValue",value:function(e,t){e.value=t}}]),e}()).\u0275fac=function(e){return new(e||K)(p.Ub(u.eb),p.Ub(H),p.Ub(b.g),p.Ub(u.m),p.Ub(u.b))},K.\u0275cmp=p.Ob({type:K,selectors:[["abp-feature-management"]],inputs:{visible:"visible",providerKey:"providerKey",providerName:"providerName"},outputs:{visibleChange:"visibleChange"},exportAs:["abpFeatureManagement"],decls:1,vars:1,consts:[["size","lg",3,"visible","busy","visibleChange",4,"ngIf"],["size","lg",3,"visible","busy","visibleChange"],["abpHeader",""],["abpBody",""],["abpFooter",""],[1,"row"],[1,"col-md-4"],["ngbNav","","orientation","vertical",1,"nav-pills",3,"activeId","activeIdChange"],["nav","ngbNav"],[3,"ngbNavItem",4,"ngFor","ngForOf","ngForTrackBy"],["descTmp",""],[1,"col-md-8"],[3,"ngbNavOutlet"],["class","mx-3",4,"ngIf"],[3,"ngbNavItem"],["ngbNavLink",""],["ngbNavContent",""],[1,"mt-2","mb-3"],["class","mt-2",3,"ngStyle","ngSwitch","keyup.enter",4,"ngFor","ngForOf","ngForTrackBy"],[1,"mt-2",3,"ngStyle","ngSwitch","keyup.enter"],[4,"ngSwitchCase"],[4,"ngSwitchDefault"],[1,"custom-checkbox","custom-control"],["type","checkbox",1,"custom-control-input",3,"id","ngModel","ngModelChange"],[1,"custom-control-label",3,"htmlFor"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"form-group"],[3,"htmlFor"],["type","text",1,"form-control",3,"id","ngModel","abpFeatureManagementFreeText","ngModelChange"],[4,"ngIf"],[1,"form-control","custom-select",3,"id","ngModel","ngModelChange"],[3,"ngValue",4,"ngFor","ngForOf","ngForTrackBy"],[3,"ngValue"],["class","form-text text-muted",4,"ngIf"],[1,"form-text","text-muted"],[1,"mx-3"],["type","button",1,"btn","btn-secondary"],["abpClose",""],["iconClass","fa fa-check",3,"disabled","click",4,"ngIf"],["iconClass","fa fa-check",3,"disabled","click"]],template:function(e,t){1&e&&p.Qc(0,z,7,2,"abp-modal",0),2&e&&p.vc("ngIf",t.visible)},directives:function(){return[F.q,l.i,k.l,F.p,k.q,k.n,k.o,k.m,F.r,F.s,F.t,F.u,S.c,S.q,S.t,F.v,S.e,te,S.y,S.u,S.B,l.b]},pipes:function(){return[u.H]},encapsulation:2}),K);var X,J,ee={numeric:"number",default:"text"},te=((J=function(){function e(){s(this,e)}return c(e,[{key:"feature",get:function(){return this._feature},set:function(e){this._feature=e,this.setInputType()}},{key:"setInputType",value:function(){var e,t,n,a,i=null===(n=null===(t=null===(e=this.feature)||void 0===e?void 0:e.valueType)||void 0===t?void 0:t.validator)||void 0===n?void 0:n.name.toLowerCase();this.type=null!==(a=ee[i])&&void 0!==a?a:ee.default}}]),e}()).\u0275fac=function(e){return new(e||J)},J.\u0275dir=p.Pb({type:J,selectors:[["input","abpFeatureManagementFreeText",""]],hostVars:1,hostBindings:function(e,t){2&e&&p.dc("type",t.type)},inputs:{feature:["abpFeatureManagementFreeText","feature"]},exportAs:["inputAbpFeatureManagementFreeText"]}),J),ne=((X=function e(){s(this,e)}).\u0275fac=function(e){return new(e||X)},X.\u0275mod=p.Sb({type:X}),X.\u0275inj=p.Rb({imports:[[u.o,l.o,k.p,b.c.forFeature([])]]}),X),ae=i("iWZL"),ie=i("tyNb");function oe(e,t){if(1&e){var n=p.bc();p.Yb(0),p.ac(1,"div",6),p.ac(2,"div",7),p.ac(3,"h1",8),p.Sc(4),p.pc(5,"abpLocalization"),p.Zb(),p.Zb(),p.ac(6,"div",9),p.Vb(7,"abp-breadcrumb"),p.Zb(),p.ac(8,"div",10),p.Vb(9,"abp-page-toolbar",11),p.Zb(),p.Zb(),p.ac(10,"div",12),p.ac(11,"div",13),p.ac(12,"div",14),p.ac(13,"div",15),p.ac(14,"div",10),p.ac(15,"div",16),p.ac(16,"input",17),p.kc("ngModelChange",function(e){return p.Ic(n),p.oc().list.filter=e}),p.pc(17,"abpLocalization"),p.Zb(),p.ac(18,"div",18),p.ac(19,"button",19),p.kc("click",function(){return p.Ic(n),p.oc().list.get()}),p.Vb(20,"i",20),p.Zb(),p.Zb(),p.Zb(),p.Zb(),p.Zb(),p.Zb(),p.Zb(),p.ac(21,"div",13),p.Vb(22,"abp-extensible-table",21),p.pc(23,"async"),p.Zb(),p.Zb(),p.Xb()}if(2&e){var a=t.ngIf,i=p.oc();p.Gb(4),p.Tc(p.qc(5,7,"Saas::Editions")),p.Gb(5),p.vc("record",a),p.Gb(7),p.vc("placeholder",p.qc(17,9,"AbpUi::PagerSearch"))("ngModel",i.list.filter),p.Gb(6),p.vc("data",a)("recordsTotal",p.qc(23,11,i.totalCount$))("list",i.list)}}function re(e,t){if(1&e&&(p.ac(0,"h3"),p.Sc(1),p.pc(2,"abpLocalization"),p.Zb()),2&e){var n=p.oc();p.Gb(1),p.Tc(p.qc(2,1,null!=n.selected&&n.selected.id?"Saas::Edit":"Saas::NewEdition"))}}function ce(e,t){if(1&e){var n=p.bc();p.ac(0,"form",22),p.kc("ngSubmit",function(){return p.Ic(n),p.oc().save()}),p.ac(1,"div",23),p.Vb(2,"abp-extensible-form",24),p.Zb(),p.Zb()}if(2&e){var a=p.oc();p.vc("formGroup",a.editionForm),p.Gb(2),p.vc("selectedRecord",a.selected)}}function se(e,t){if(1&e){var n=p.bc();p.ac(0,"button",25,26),p.Sc(2),p.pc(3,"abpLocalization"),p.Zb(),p.ac(4,"abp-button",27),p.kc("click",function(){return p.Ic(n),p.oc().save()}),p.Sc(5),p.pc(6,"abpLocalization"),p.Zb()}if(2&e){var a=p.oc();p.Gb(2),p.Uc(" ",p.qc(3,3,"Saas::Cancel")," "),p.Gb(2),p.vc("disabled",null==a.editionForm?null:a.editionForm.invalid),p.Gb(1),p.Tc(p.qc(6,5,"AbpIdentity::Save"))}}function ue(e,t){if(1&e){var n=p.bc();p.ac(0,"abp-feature-management",28),p.kc("visibleChange",function(e){return p.Ic(n),p.oc().visibleFeatures=e}),p.Zb()}if(2&e){var a=p.oc();p.vc("visible",a.visibleFeatures)("providerKey",a.providerKey)}}var le=function(){return{value:"E"}},de=function(e){return{value:e}},pe=function(e){return{value:e,twoWay:!0}},be=function(e,t,n){return{providerName:e,providerKey:t,visible:n}},fe=function(e){return{visibleChange:e}},ve=function(e,t){return{inputs:e,outputs:t,componentKey:"FeatureManagement.FeatureManagementComponent"}},he=["tenantModalTemplate"],ge=["connectionStringModalTemplate"];function me(e,t){if(1&e){var n=p.bc();p.Yb(0),p.ac(1,"div",8),p.ac(2,"div",9),p.ac(3,"h1",10),p.Sc(4),p.pc(5,"abpLocalization"),p.Zb(),p.Zb(),p.ac(6,"div",11),p.Vb(7,"abp-breadcrumb"),p.Zb(),p.ac(8,"div",12),p.Vb(9,"abp-page-toolbar",13),p.Zb(),p.Zb(),p.ac(10,"div",14),p.ac(11,"div",15),p.ac(12,"div",16),p.ac(13,"div",17),p.ac(14,"div",12),p.ac(15,"div",18),p.ac(16,"input",19),p.kc("ngModelChange",function(e){return p.Ic(n),p.oc().list.filter=e}),p.pc(17,"abpLocalization"),p.Zb(),p.ac(18,"div",20),p.ac(19,"button",21),p.kc("click",function(){return p.Ic(n),p.oc().list.get()}),p.Vb(20,"i",22),p.Zb(),p.Zb(),p.Zb(),p.Zb(),p.Zb(),p.Zb(),p.Zb(),p.ac(21,"div",15),p.Vb(22,"abp-extensible-table",23),p.pc(23,"async"),p.Zb(),p.Zb(),p.Xb()}if(2&e){var a=t.ngIf,i=p.oc();p.Gb(4),p.Tc(p.qc(5,7,"Saas::Tenants")),p.Gb(5),p.vc("record",a),p.Gb(7),p.vc("placeholder",p.qc(17,9,"AbpUi::PagerSearch"))("ngModel",i.list.filter),p.Gb(6),p.vc("data",a)("recordsTotal",p.qc(23,11,i.totalCount$))("list",i.list)}}function ye(e,t){if(1&e&&(p.ac(0,"h3"),p.Sc(1),p.pc(2,"abpLocalization"),p.Zb()),2&e){var n=p.oc();p.Gb(1),p.Tc(p.qc(2,1,n.selectedModalContent.title))}}function Se(e,t){1&e&&p.Wb(0)}function Te(e,t){if(1&e&&p.Qc(0,Se,1,0,"ng-container",24),2&e){var n=p.oc();p.vc("ngTemplateOutlet",null==n.selectedModalContent?null:n.selectedModalContent.template)}}function Ce(e,t){if(1&e){var n=p.bc();p.ac(0,"button",25,26),p.Sc(2),p.pc(3,"abpLocalization"),p.Zb(),p.ac(4,"abp-button",27),p.kc("click",function(){return p.Ic(n),p.oc().save()}),p.Sc(5),p.pc(6,"abpLocalization"),p.Zb()}if(2&e){var a=p.oc();p.Gb(2),p.Uc(" ",p.qc(3,3,"Saas::Cancel")," "),p.Gb(2),p.vc("disabled",a.isDisabledSaveButton),p.Gb(1),p.Tc(p.qc(6,5,"AbpIdentity::Save"))}}function Oe(e,t){if(1&e){var n=p.bc();p.ac(0,"form",29),p.kc("ngSubmit",function(){return p.Ic(n),p.oc(2).save()}),p.ac(1,"div",30),p.Vb(2,"abp-extensible-form",31),p.Zb(),p.Zb()}if(2&e){var a=p.oc(2);p.vc("formGroup",a.tenantForm),p.Gb(2),p.vc("selectedRecord",a.selected)}}function ke(e,t){if(1&e&&p.Qc(0,Oe,3,2,"form",28),2&e){var n=p.oc();p.vc("ngIf",n.tenantForm)}}function Fe(e,t){1&e&&(p.ac(0,"div",33),p.ac(1,"label",38),p.Sc(2),p.pc(3,"abpLocalization"),p.Zb(),p.Vb(4,"input",39),p.Zb()),2&e&&(p.Gb(2),p.Tc(p.qc(3,1,"Saas::DisplayName:DefaultConnectionString")))}function je(e,t){if(1&e){var n=p.bc();p.ac(0,"form",32),p.kc("ngSubmit",function(){return p.Ic(n),p.oc().save()}),p.ac(1,"div",30),p.ac(2,"div",33),p.ac(3,"div",34),p.ac(4,"input",35),p.kc("ngModelChange",function(e){return p.Ic(n),p.oc().onSharedDatabaseChange(e)}),p.Zb(),p.ac(5,"label",36),p.Sc(6),p.pc(7,"abpLocalization"),p.Zb(),p.Zb(),p.Zb(),p.Qc(8,Fe,5,3,"div",37),p.Zb(),p.Zb()}if(2&e){var a=p.oc();p.vc("formGroup",a.defaultConnectionStringForm),p.Gb(6),p.Tc(p.qc(7,3,"Saas::DisplayName:UseSharedDatabase")),p.Gb(2),p.vc("ngIf",!a.useSharedDatabase)}}function Ee(e,t){if(1&e){var n=p.bc();p.ac(0,"abp-feature-management",40),p.kc("visibleChange",function(e){return p.Ic(n),p.oc().visibleFeatures=e}),p.Zb()}if(2&e){var a=p.oc();p.vc("visible",a.visibleFeatures)("providerKey",a.providerKey)}}var Ne=function(){return{value:"T"}};function we(e,t){if(1&e){var n=p.bc();p.ac(0,"div",1),p.ac(1,"div",2),p.ac(2,"div",3),p.ac(3,"h5",4),p.Sc(4),p.pc(5,"abpLocalization"),p.Zb(),p.Zb(),p.ac(6,"div",5),p.ac(7,"div",6),p.ac(8,"abp-chart",7,8),p.kc("initialized",function(e){return p.Ic(n),p.oc().initialize(e)}),p.Zb(),p.Zb(),p.Zb(),p.Zb(),p.Zb()}if(2&e){var a=p.oc();p.Gb(4),p.Tc(p.qc(5,4,"Saas::EditionUsageStatistics")),p.Gb(4),p.vc("data",a.chartData)("width",a.width)("height",a.height)}}function Ie(e,t){if(1&e&&(p.ac(0,"tr"),p.ac(1,"th"),p.Sc(2),p.Zb(),p.ac(3,"td"),p.Sc(4),p.Zb(),p.ac(5,"td"),p.Sc(6),p.Zb(),p.Zb()),2&e){var n=t.$implicit,a=t.index;p.Gb(2),p.Tc(a+1),p.Gb(2),p.Tc(n.name),p.Gb(2),p.Tc(n.editionName)}}function Ae(e,t){if(1&e&&(p.ac(0,"div",1),p.ac(1,"div",2),p.ac(2,"div",3),p.ac(3,"h5",4),p.Sc(4,"Latest tenants"),p.Zb(),p.Zb(),p.ac(5,"div",5),p.ac(6,"div"),p.ac(7,"table",6),p.ac(8,"thead"),p.ac(9,"tr"),p.ac(10,"th"),p.Sc(11,"#"),p.Zb(),p.ac(12,"th"),p.Sc(13),p.pc(14,"abpLocalization"),p.Zb(),p.ac(15,"th"),p.Sc(16),p.pc(17,"abpLocalization"),p.Zb(),p.Zb(),p.Zb(),p.ac(18,"tbody"),p.Qc(19,Ie,7,3,"tr",7),p.pc(20,"async"),p.Zb(),p.Zb(),p.Zb(),p.Zb(),p.Zb(),p.Zb()),2&e){var n=p.oc();p.Gb(6),p.Nc("min-height",n.minHeight,"px"),p.Gb(7),p.Tc(p.qc(14,6,"Saas::Name")),p.Gb(3),p.Tc(p.qc(17,8,"Saas::EditionName")),p.Gb(3),p.vc("ngForOf",p.qc(20,10,n.datas$))("ngForTrackBy",n.trackByFn)}}var Ge,Me,Ze,Re,Ue,Be,De,xe,Le,Ve,_e,qe=function(){var e=function e(t){s(this,e),this.payload=t};return e.type="[Saas] Get Tenant",e}(),Pe=function(){var e=function e(t){s(this,e),this.payload=t};return e.type="[Saas] Get Tenant By Id",e}(),Qe=function(){var e=function e(t){s(this,e),this.payload=t};return e.type="[Saas] Create Tenant",e}(),ze=function(){var e=function e(t){s(this,e),this.payload=t};return e.type="[Saas] Update Tenant",e}(),$e=function(){var e=function e(t){s(this,e),this.payload=t};return e.type="[Saas] Delete Tenant",e}(),Ke=function(){var e=function e(t){s(this,e),this.payload=t};return e.type="[Saas] Get Edition",e}(),He=function(){var e=function e(t){s(this,e),this.payload=t};return e.type="[Saas] Get Edition By Id",e}(),We=function(){var e=function e(t){s(this,e),this.payload=t};return e.type="[Saas] Create Edition",e}(),Ye=function(){var e=function e(t){s(this,e),this.payload=t};return e.type="[Saas] Update Edition",e}(),Xe=function(){var e=function e(t){s(this,e),this.payload=t};return e.type="[Saas] Delete Edition",e}(),Je=function(){var e=function e(){s(this,e)};return e.type="[Saas] Get Usage Statistics",e}(),et=function(){var e=function e(){s(this,e)};return e.type="[Saas] Get Latest Tenatns",e}(),tt=((Ze=function e(t){var n=this;s(this,e),this.restService=t,this.apiName="SaasHost",this.create=function(e){return n.restService.request({method:"POST",url:"/api/saas/editions",body:e},{apiName:n.apiName})},this.delete=function(e){return n.restService.request({method:"DELETE",url:"/api/saas/editions/".concat(e)},{apiName:n.apiName})},this.get=function(e){return n.restService.request({method:"GET",url:"/api/saas/editions/".concat(e)},{apiName:n.apiName})},this.getList=function(e){return n.restService.request({method:"GET",url:"/api/saas/editions",params:{filter:e.filter,sorting:e.sorting,skipCount:e.skipCount,maxResultCount:e.maxResultCount}},{apiName:n.apiName})},this.getUsageStatistics=function(){return n.restService.request({method:"GET",url:"/api/saas/editions/statistics/usage-statistic"},{apiName:n.apiName})},this.update=function(e,t){return n.restService.request({method:"PUT",url:"/api/saas/editions/".concat(e),body:t},{apiName:n.apiName})}}).\u0275fac=function(e){return new(e||Ze)(p.hc(u.U))},Ze.\u0275prov=Object(p.Qb)({factory:function(){return new Ze(Object(p.hc)(u.U))},token:Ze,providedIn:"root"}),Ze),nt=((Me=function e(t){var n=this;s(this,e),this.restService=t,this.apiName="SaasHost",this.create=function(e){return n.restService.request({method:"POST",url:"/api/saas/tenants",body:e},{apiName:n.apiName})},this.delete=function(e){return n.restService.request({method:"DELETE",url:"/api/saas/tenants/".concat(e)},{apiName:n.apiName})},this.deleteDefaultConnectionString=function(e){return n.restService.request({method:"DELETE",url:"/api/saas/tenants/".concat(e,"/default-connection-string")},{apiName:n.apiName})},this.get=function(e){return n.restService.request({method:"GET",url:"/api/saas/tenants/".concat(e)},{apiName:n.apiName})},this.getDefaultConnectionString=function(e){return n.restService.request({method:"GET",url:"/api/saas/tenants/".concat(e,"/default-connection-string"),responseType:"text"},{apiName:n.apiName})},this.getList=function(e){return n.restService.request({method:"GET",url:"/api/saas/tenants",params:{filter:e.filter,getEditionNames:e.getEditionNames,sorting:e.sorting,skipCount:e.skipCount,maxResultCount:e.maxResultCount}},{apiName:n.apiName})},this.update=function(e,t){return n.restService.request({method:"PUT",url:"/api/saas/tenants/".concat(e),body:t},{apiName:n.apiName})},this.updateDefaultConnectionString=function(e,t){return n.restService.request({method:"PUT",url:"/api/saas/tenants/".concat(e,"/default-connection-string"),params:{defaultConnectionString:t}},{apiName:n.apiName})}}).\u0275fac=function(e){return new(e||Me)(p.hc(u.U))},Me.\u0275prov=Object(p.Qb)({factory:function(){return new Me(Object(p.hc)(u.U))},token:Me,providedIn:"root"}),Me),at=((Ge=function(){function e(t,n){s(this,e),this.tenantService=t,this.editionService=n}return c(e,[{key:"getTenants",value:function(e,t){var n=e.patchState,a=t.payload;return this.tenantService.getList(a).pipe(Object(f.a)(function(e){return n({tenants:e})}))}},{key:"deleteTenant",value:function(e,t){var n=t.payload;return this.tenantService.delete(n)}},{key:"createTenant",value:function(e,t){var n=t.payload;return this.tenantService.create(n)}},{key:"updateTenant",value:function(e,t){var n=t.payload,a=n.id,i=Object(r.e)(n,["id"]);return this.tenantService.update(a,i)}},{key:"getEditions",value:function(e,t){var n=e.patchState,a=t.payload;return this.editionService.getList(a).pipe(Object(f.a)(function(e){return n({editions:e})}))}},{key:"deleteEdition",value:function(e,t){var n=t.payload;return this.editionService.delete(n)}},{key:"createEdition",value:function(e,t){var n=t.payload;return this.editionService.create(n)}},{key:"updateEdition",value:function(e,t){var n=t.payload,a=n.id,i=Object(r.e)(n,["id"]);return this.editionService.update(a,i)}},{key:"getUsage",value:function(e){var t=e.patchState;return this.editionService.getUsageStatistics().pipe(Object(f.a)(function(e){t({usageStatistics:e.data})}))}},{key:"getLatestTenants",value:function(e){var t=e.patchState;return this.tenantService.getList({getEditionNames:!0,maxResultCount:6,skipCount:0,sorting:"CreationTime desc"}).pipe(Object(f.a)(function(e){t({latestTenants:e.items})}))}}],[{key:"getTenants",value:function(e){return e.tenants.items||[]}},{key:"getLatestTenants",value:function(e){return e.latestTenants}},{key:"getTenantsTotalCount",value:function(e){return e.tenants.totalCount||0}},{key:"getEditions",value:function(e){return e.editions.items||[]}},{key:"getEditionsTotalCount",value:function(e){return e.editions.totalCount||0}},{key:"getUsageStatistics",value:function(e){return e.usageStatistics}}]),e}()).\u0275fac=function(e){return new(e||Ge)(p.hc(nt),p.hc(tt))},Ge.\u0275prov=p.Qb({token:Ge,factory:function(e){return Ge.\u0275fac(e)}}),Object(r.b)([Object(b.a)(qe)],Ge.prototype,"getTenants",null),Object(r.b)([Object(b.a)($e)],Ge.prototype,"deleteTenant",null),Object(r.b)([Object(b.a)(Qe)],Ge.prototype,"createTenant",null),Object(r.b)([Object(b.a)(ze)],Ge.prototype,"updateTenant",null),Object(r.b)([Object(b.a)(Ke)],Ge.prototype,"getEditions",null),Object(r.b)([Object(b.a)(Xe)],Ge.prototype,"deleteEdition",null),Object(r.b)([Object(b.a)(We)],Ge.prototype,"createEdition",null),Object(r.b)([Object(b.a)(Ye)],Ge.prototype,"updateEdition",null),Object(r.b)([Object(b.a)(Je)],Ge.prototype,"getUsage",null),Object(r.b)([Object(b.a)(et)],Ge.prototype,"getLatestTenants",null),Object(r.b)([Object(b.e)()],Ge,"getTenants",null),Object(r.b)([Object(b.e)()],Ge,"getLatestTenants",null),Object(r.b)([Object(b.e)()],Ge,"getTenantsTotalCount",null),Object(r.b)([Object(b.e)()],Ge,"getEditions",null),Object(r.b)([Object(b.e)()],Ge,"getEditionsTotalCount",null),Object(r.b)([Object(b.e)()],Ge,"getUsageStatistics",null),Ge=Object(r.b)([Object(b.f)({name:"SaasState",defaults:{tenants:{},editions:{},latestTenants:[],usageStatistics:{}}})],Ge)),it="Saas.EditionsComponent",ot=((De=function(){function e(t,n,a,i,o){var r=this;s(this,e),this.list=t,this.confirmationService=n,this.editionService=a,this.store=i,this.injector=o,this.visibleFeatures=!1,this.modalBusy=!1,this.onVisibleFeaturesChange=function(e){r.visibleFeatures=e}}return c(e,[{key:"ngOnInit",value:function(){this.hookToQuery()}},{key:"hookToQuery",value:function(){var e=this;this.list.hookToQuery(function(t){return e.store.dispatch(new Ke(t))}).subscribe()}},{key:"createEditionForm",value:function(){var e=new d.k(this.injector,this.selected);this.editionForm=Object(d.p)(e)}},{key:"onAddEdition",value:function(){this.selected={},this.createEditionForm(),this.isModalVisible=!0}},{key:"onEditEdition",value:function(e){var t=this;this.editionService.get(e).subscribe(function(e){t.selected=e,t.createEditionForm(),t.isModalVisible=!0})}},{key:"save",value:function(){var e=this;this.editionForm.valid&&(this.modalBusy=!0,this.store.dispatch(this.selected.id?new Ye(Object.assign(Object.assign(Object.assign({},this.selected),this.editionForm.value),{id:this.selected.id})):new We(this.editionForm.value)).pipe(Object(v.a)(function(){return e.modalBusy=!1})).subscribe(function(){e.list.get(),e.isModalVisible=!1}))}},{key:"delete",value:function(e){var t=this,n=e.id,a=e.displayName;this.confirmationService.warn("Saas::EditionDeletionConfirmationMessage","Saas::AreYouSure",{messageLocalizationParams:[a]}).subscribe(function(e){e===l.d.Status.confirm&&t.store.dispatch(new Xe(n)).subscribe(function(){return t.list.get()})})}},{key:"openFeaturesModal",value:function(e){var t=this;this.providerKey=e,setTimeout(function(){t.visibleFeatures=!0},0)}}]),e}()).\u0275fac=function(e){return new(e||De)(p.Ub(u.F),p.Ub(l.f),p.Ub(tt),p.Ub(b.g),p.Ub(p.w))},De.\u0275cmp=p.Ob({type:De,selectors:[["abp-editions"]],features:[p.Fb([u.F,{provide:d.d,useValue:it}])],decls:10,vars:20,consts:[[4,"ngIf"],[3,"visible","busy","visibleChange","disappear"],["abpHeader",""],["abpBody",""],["abpFooter",""],["providerName","E",3,"visible","providerKey","visibleChange",4,"abpReplaceableTemplate"],[1,"row","entry-row"],[1,"col-auto"],[1,"content-header-title"],[1,"col-lg-auto","pl-lg-0"],[1,"col"],[3,"record"],["id","wrapper"],[1,"card"],[1,"card-body"],[1,"row"],[1,"input-group"],["type","search",1,"form-control",3,"placeholder","ngModel","ngModelChange"],[1,"input-group-append"],[1,"btn","btn-primary",3,"click"],[1,"fas","fa-search"],[3,"data","recordsTotal","list"],["validateOnSubmit","",3,"formGroup","ngSubmit"],[1,"mt-2"],[3,"selectedRecord"],["type","button",1,"btn","btn-secondary"],["abpClose",""],["iconClass","fa fa-check",3,"disabled","click"],["providerName","E",3,"visible","providerKey","visibleChange"]],template:function(e,t){1&e&&(p.Qc(0,oe,24,13,"ng-container",0),p.pc(1,"async"),p.ac(2,"abp-modal",1),p.kc("visibleChange",function(e){return t.isModalVisible=e})("disappear",function(){return t.editionForm=null}),p.Qc(3,re,3,3,"ng-template",null,2,p.Rc),p.Qc(5,ce,3,2,"ng-template",null,3,p.Rc),p.Qc(7,se,7,7,"ng-template",null,4,p.Rc),p.Zb(),p.Qc(9,ue,1,2,"abp-feature-management",5)),2&e&&(p.vc("ngIf",p.qc(1,4,t.data$)),p.Gb(2),p.vc("visible",t.isModalVisible)("busy",t.modalBusy),p.Gb(7),p.vc("abpReplaceableTemplate",p.Ac(17,ve,p.Bc(11,be,p.yc(6,le),p.zc(7,de,t.providerKey),p.zc(9,pe,t.visibleFeatures)),p.zc(15,fe,t.onVisibleFeaturesChange))))},directives:[F.q,l.i,u.S,l.a,d.m,S.e,S.q,S.t,d.h,S.C,S.r,u.w,ae.j,S.k,d.g,l.b,Y],pipes:[F.b,u.H],encapsulation:2}),Object(r.b)([Object(b.d)(at.getEditions)],De.prototype,"data$",void 0),Object(r.b)([Object(b.d)(at.getEditionsTotalCount)],De.prototype,"totalCount$",void 0),De),rt=((Be=function(){function e(t,n,a,i,o,r){var c=this;s(this,e),this.list=t,this.confirmationService=n,this.tenantService=a,this.fb=i,this.store=o,this.injector=r,this.selectedModalContent={},this.visibleFeatures=!1,this.modalBusy=!1,this.onVisibleFeaturesChange=function(e){c.visibleFeatures=e}}return c(e,[{key:"useSharedDatabase",get:function(){return this.defaultConnectionStringForm.get("useSharedDatabase").value}},{key:"connectionString",get:function(){return this.defaultConnectionStringForm.get("defaultConnectionString").value}},{key:"hasSelectedTenant",get:function(){return Boolean(this.selected.id)}},{key:"isDisabledSaveButton",get:function(){return!(!this.selectedModalContent||!("saveConnStr"===this.selectedModalContent.type&&this.defaultConnectionStringForm&&this.defaultConnectionStringForm.invalid||"saveTenant"===this.selectedModalContent.type&&this.tenantForm&&this.tenantForm.invalid))}},{key:"ngOnInit",value:function(){this.hookToQuery()}},{key:"hookToQuery",value:function(){var e=this;this.list.hookToQuery(function(t){return e.store.dispatch(new qe(t))}).subscribe()}},{key:"createTenantForm",value:function(){var e=this;this.store.select(at.getEditions).pipe(Object(h.a)(function(t){return t.length?Object(T.a)(t):e.store.dispatch(new Ke({maxResultCount:1e3}))})).subscribe(function(){var t=new d.k(e.injector,e.selected);e.tenantForm=Object(d.p)(t)})}},{key:"createDefaultConnectionStringForm",value:function(){this.defaultConnectionStringForm=this.fb.group({useSharedDatabase:this._useSharedDatabase,defaultConnectionString:this.defaultConnectionString||""})}},{key:"openModal",value:function(e,t,n){this.selectedModalContent={title:e,template:t,type:n},this.isModalVisible=!0}},{key:"onEditConnectionString",value:function(e){var t=this;this.tenantService.get(e).pipe(Object(f.a)(function(e){return t.selected=e}),Object(h.a)(function(){return t.tenantService.getDefaultConnectionString(e)})).subscribe(function(e){t._useSharedDatabase=!e,t.defaultConnectionString=e||"",t.createDefaultConnectionStringForm(),t.openModal("Saas::ConnectionStrings",t.connectionStringModalTemplate,"saveConnStr")})}},{key:"onAddTenant",value:function(){this.selected={},this.createTenantForm(),this.openModal("Saas::NewTenant",this.tenantModalTemplate,"saveTenant")}},{key:"onEditTenant",value:function(e){var t=this;this.tenantService.get(e).subscribe(function(e){t.selected=e,t.createTenantForm(),t.openModal("Saas::Edit",t.tenantModalTemplate,"saveTenant")})}},{key:"save",value:function(){var e=this.selectedModalContent.type;e&&("saveTenant"===e?this.saveTenant():"saveConnStr"===e&&this.saveConnectionString())}},{key:"saveConnectionString",value:function(){var e=this;this.modalBusy||(this.modalBusy=!0,this.useSharedDatabase||!this.useSharedDatabase&&!this.connectionString?this.tenantService.deleteDefaultConnectionString(this.selected.id).pipe(Object(g.a)(1),Object(v.a)(function(){return e.modalBusy=!1})).subscribe(function(){e.isModalVisible=!1}):this.tenantService.updateDefaultConnectionString(this.selected.id,this.connectionString).pipe(Object(g.a)(1),Object(v.a)(function(){return e.modalBusy=!1})).subscribe(function(){e.isModalVisible=!1}))}},{key:"saveTenant",value:function(){var e=this;this.tenantForm.valid&&!this.modalBusy&&(this.modalBusy=!0,this.store.dispatch(this.selected.id?new ze(Object.assign(Object.assign(Object.assign({},this.selected),this.tenantForm.value),{id:this.selected.id})):new Qe(this.tenantForm.value)).pipe(Object(v.a)(function(){return e.modalBusy=!1})).subscribe(function(){e.list.get(),e.isModalVisible=!1}))}},{key:"delete",value:function(e,t){var n=this;this.confirmationService.warn("Saas::TenantDeletionConfirmationMessage","Saas::AreYouSure",{messageLocalizationParams:[t]}).subscribe(function(t){t===l.d.Status.confirm&&n.store.dispatch(new $e(e)).subscribe(function(){return n.list.get()})})}},{key:"onSharedDatabaseChange",value:function(e){e||setTimeout(function(){var e=document.getElementById("defaultConnectionString");e&&e.focus()},0)}},{key:"openFeaturesModal",value:function(e){var t=this;this.providerKey=e,setTimeout(function(){t.visibleFeatures=!0},0)}}]),e}()).\u0275fac=function(e){return new(e||Be)(p.Ub(u.F),p.Ub(l.f),p.Ub(nt),p.Ub(S.f),p.Ub(b.g),p.Ub(p.w))},Be.\u0275cmp=p.Ob({type:Be,selectors:[["abp-tenants"]],viewQuery:function(e,t){var n;1&e&&(p.Wc(he,1),p.Wc(ge,1)),2&e&&(p.Ec(n=p.lc())&&(t.tenantModalTemplate=n.first),p.Ec(n=p.lc())&&(t.connectionStringModalTemplate=n.first))},features:[p.Fb([u.F,{provide:d.d,useValue:"Saas.TenantsComponent"}])],decls:14,vars:20,consts:[[4,"ngIf"],[3,"visible","busy","visibleChange","disappear"],["abpHeader",""],["abpBody",""],["abpFooter",""],["tenantModalTemplate",""],["connectionStringModalTemplate",""],["providerName","T",3,"visible","providerKey","visibleChange",4,"abpReplaceableTemplate"],[1,"row","entry-row"],[1,"col-auto"],[1,"content-header-title"],[1,"col-lg-auto","pl-lg-0"],[1,"col"],[3,"record"],["id","wrapper"],[1,"card"],[1,"card-body"],[1,"row"],[1,"input-group"],["type","search",1,"form-control",3,"placeholder","ngModel","ngModelChange"],[1,"input-group-append"],[1,"btn","btn-primary",3,"click"],[1,"fas","fa-search"],[3,"data","recordsTotal","list"],[4,"ngTemplateOutlet"],["type","button",1,"btn","btn-secondary"],["abpClose",""],["iconClass","fa fa-check",3,"disabled","click"],["validateOnSubmit","",3,"formGroup","ngSubmit",4,"ngIf"],["validateOnSubmit","",3,"formGroup","ngSubmit"],[1,"mt-2"],[3,"selectedRecord"],[3,"formGroup","ngSubmit"],[1,"form-group"],[1,"custom-checkbox","custom-control","mb-2"],["id","useSharedDatabase","type","checkbox","formControlName","useSharedDatabase","autofocus","",1,"custom-control-input",3,"ngModelChange"],["for","useSharedDatabase",1,"custom-control-label"],["class","form-group",4,"ngIf"],["for","defaultConnectionString"],["type","text","id","defaultConnectionString","formControlName","defaultConnectionString",1,"form-control"],["providerName","T",3,"visible","providerKey","visibleChange"]],template:function(e,t){1&e&&(p.Qc(0,me,24,13,"ng-container",0),p.pc(1,"async"),p.ac(2,"abp-modal",1),p.kc("visibleChange",function(e){return t.isModalVisible=e})("disappear",function(){return t.tenantForm=null,t.defaultConnectionStringForm=null}),p.Qc(3,ye,3,3,"ng-template",null,2,p.Rc),p.Qc(5,Te,1,1,"ng-template",null,3,p.Rc),p.Qc(7,Ce,7,7,"ng-template",null,4,p.Rc),p.Zb(),p.Qc(9,ke,1,1,"ng-template",null,5,p.Rc),p.Qc(11,je,9,5,"ng-template",null,6,p.Rc),p.Qc(13,Ee,1,2,"abp-feature-management",7)),2&e&&(p.vc("ngIf",p.qc(1,4,t.tenants$)),p.Gb(2),p.vc("visible",t.isModalVisible)("busy",t.modalBusy),p.Gb(11),p.vc("abpReplaceableTemplate",p.Ac(17,ve,p.Bc(11,be,p.yc(6,Ne),p.zc(7,de,t.providerKey),p.zc(9,pe,t.visibleFeatures)),p.zc(15,fe,t.onVisibleFeaturesChange))))},directives:[F.q,l.i,u.S,l.a,d.m,S.e,S.q,S.t,d.h,F.v,l.b,S.C,S.r,u.w,ae.j,S.k,d.g,S.c,ae.h,S.i,u.i,Y],pipes:[F.b,u.H],encapsulation:2}),Object(r.b)([Object(b.d)(at.getTenants)],Be.prototype,"tenants$",void 0),Object(r.b)([Object(b.d)(at.getTenantsTotalCount)],Be.prototype,"totalCount$",void 0),Object(r.b)([Object(b.d)(at.getEditions)],Be.prototype,"editions$",void 0),Be),ct=((Ue=function(){function e(t,n,a){var i=this;s(this,e),this.store=t,this.subscription=n,this.permissionService=a,this.initialized=new C.a(this),this.width=273,this.height=136,this.chartData={},this.draw=function(){i.permissionService.getGrantedPolicy("Saas.Editions")&&i.store.dispatch(new Je)},this.listenToData()}return c(e,[{key:"initialize",value:function(e){this.chart=e}},{key:"listenToData",value:function(){var e=this;this.subscription.addOne(this.data$,function(t){if(t&&"{}"!==JSON.stringify(t)){var n=Object.keys(t);setTimeout(function(){e.chartData={labels:n,datasets:[{data:n.map(function(e){return t[e]}),backgroundColor:Object(l.u)(Object.keys(t).length)}]},e.chart.refresh()},0)}else e.chartData={}})}}]),e}()).\u0275fac=function(e){return new(e||Ue)(p.Ub(b.g),p.Ub(u.db),p.Ub(u.O))},Ue.\u0275cmp=p.Ob({type:Ue,selectors:[["abp-editions-usage-widget"]],inputs:{width:"width",height:"height"},outputs:{initialized:"initialized"},features:[p.Fb([u.db])],decls:1,vars:1,consts:[["class","abp-widget-wrapper",4,"abpPermission"],[1,"abp-widget-wrapper"],[1,"card"],[1,"card-header"],[1,"card-title"],[1,"card-body"],[1,"row"],["type","pie",1,"w-100",3,"data","width","height","initialized"],["chart",""]],template:function(e,t){1&e&&p.Qc(0,we,10,6,"div",0),2&e&&p.vc("abpPermission","Saas.Editions")},directives:[u.M,l.c],pipes:[u.H],encapsulation:2}),Object(r.b)([Object(b.d)(at.getUsageStatistics)],Ue.prototype,"data$",void 0),Ue),st=((Re=function e(t,n){var a=this;s(this,e),this.store=t,this.permissionService=n,this.minHeight=136,this.trackByFn=function(e,t){return t.id},this.draw=function(){a.permissionService.getGrantedPolicy("Saas.Tenants")&&a.store.dispatch(new et)}}).\u0275fac=function(e){return new(e||Re)(p.Ub(b.g),p.Ub(u.O))},Re.\u0275cmp=p.Ob({type:Re,selectors:[["abp-latest-tenants-widget"]],inputs:{minHeight:"minHeight"},decls:1,vars:1,consts:[["class","abp-widget-wrapper","data-widget-name","SaasLatestTenantsWidget","data-refresh-url","SaasWidgets/LatestTenants",4,"abpPermission"],["data-widget-name","SaasLatestTenantsWidget","data-refresh-url","SaasWidgets/LatestTenants",1,"abp-widget-wrapper"],[1,"card"],[1,"card-header"],[1,"card-title"],[1,"card-body"],[1,"table","table-hover","table-sm"],[4,"ngFor","ngForOf","ngForTrackBy"]],template:function(e,t){1&e&&p.Qc(0,Ae,21,12,"div",0),2&e&&p.vc("abpPermission","Saas.Tenants")},directives:[u.M,F.p],pipes:[u.H,F.b],encapsulation:2}),Object(r.b)([Object(b.d)(at.getLatestTenants)],Re.prototype,"datas$",void 0),Re),ut=d.e.createMany([{text:"Saas::Edit",action:function(e){e.getInjected(ot).onEditEdition(e.record.id)},permission:"Saas.Editions.Update"},{text:"Saas::Features",action:function(e){e.getInjected(ot).openFeaturesModal(e.record.id)},permission:"Saas.Editions.ManageFeatures"},{text:"Saas::ChangeHistory",action:function(e){e.getInjected(O.c)(e.record.id,"Volo.Saas.Edition")},permission:"Saas.Editions.ViewChangeHistory",visible:function(e){return Boolean(e.getInjected(O.c,null))}},{text:"Saas::Delete",action:function(e){e.getInjected(ot).delete(e.record)},permission:"Saas.Editions.Delete"}]),lt=d.f.createMany([{type:"string",name:"displayName",displayName:"Saas::EditionName",sortable:!0}]),dt=d.j.createMany([{type:"string",name:"displayName",displayName:"Saas::EditionName",validators:function(){return[S.A.required,S.A.maxLength(256)]}}]),pt=dt,bt=d.n.createMany([{text:"Saas::NewEdition",action:function(e){e.getInjected(ot).onAddEdition()},permission:"Saas.Editions.Create",icon:"fa fa-plus"}]),ft=d.e.createMany([{text:"Saas::Edit",action:function(e){e.getInjected(rt).onEditTenant(e.record.id)},permission:"Saas.Tenants.Update"},{text:"Saas::ConnectionStrings",action:function(e){e.getInjected(rt).onEditConnectionString(e.record.id)},permission:"Saas.Tenants.ManageConnectionStrings"},{text:"Saas::Features",action:function(e){e.getInjected(rt).openFeaturesModal(e.record.id)},permission:"Saas.Tenants.ManageFeatures"},{text:"Saas::ChangeHistory",action:function(e){e.getInjected(O.c)(e.record.id,"Volo.Saas.Tenant")},permission:"Saas.Tenants.ViewChangeHistory",visible:function(e){return Boolean(e.getInjected(O.c,null))}},{text:"Saas::Delete",action:function(e){e.getInjected(rt).delete(e.record.id,e.record.name)},permission:"Saas.Tenants.Delete"}]),vt=d.f.createMany([{type:"string",name:"name",displayName:"Saas::TenantName",sortable:!0,columnWidth:370},{type:"string",name:"editionName",displayName:"Saas::EditionName",columnWidth:370}]),ht=d.j.createMany([{type:"string",name:"name",id:"name",displayName:"Saas::TenantName",validators:function(){return[S.A.required,S.A.maxLength(256)]}},{type:"string",name:"editionId",displayName:"Saas::Edition",id:"edition",options:function(e){return e.getInjected(rt).editions$.pipe(Object(m.a)(function(e){return[{key:"",value:""}].concat(a(e.map(function(e){return{key:e.displayName,value:e.id}})))}))}},{type:"email",name:"adminEmailAddress",displayName:"Saas::DisplayName:AdminEmailAddress",id:"admin-email-address",validators:function(){return[S.A.required,S.A.maxLength(256),S.A.email]}},{type:"password",name:"adminPassword",displayName:"Saas::DisplayName:AdminPassword",id:"admin-password",autocomplete:"new-password",validators:function(e){return[S.A.required].concat(a(Object(l.t)({get:e.getInjected})))}}]),gt=ht.slice(0,2),mt=d.n.createMany([{text:"Saas::ManageHostFeatures",action:function(e){e.getInjected(rt).openFeaturesModal(null)},permission:"Saas.Tenants.ManageFeatures",icon:"fa fa-cog"},{text:"Saas::NewTenant",action:function(e){e.getInjected(rt).onAddTenant()},permission:"Saas.Tenants.Create",icon:"fa fa-plus"}]),yt={"Saas.EditionsComponent":ut,"Saas.TenantsComponent":ft},St={"Saas.EditionsComponent":bt,"Saas.TenantsComponent":mt},Tt={"Saas.EditionsComponent":lt,"Saas.TenantsComponent":vt},Ct={"Saas.EditionsComponent":dt,"Saas.TenantsComponent":ht},Ot={"Saas.EditionsComponent":pt,"Saas.TenantsComponent":gt},kt=new p.v("SAAS_ENTITY_ACTION_CONTRIBUTORS"),Ft=new p.v("SAAS_TOOLBAR_ACTION_CONTRIBUTORS"),jt=new p.v("SAAS_ENTITY_PROP_CONTRIBUTORS"),Et=new p.v("SAAS_CREATE_FORM_PROP_CONTRIBUTORS"),Nt=new p.v("SAAS_EDIT_FORM_PROP_CONTRIBUTORS"),wt=((xe=function(){function e(t){s(this,e),this.injector=t}return c(e,[{key:"canActivate",value:function(){var e=this.injector.get(d.i),t=this.injector.get(kt,null)||{},n=this.injector.get(Ft,null)||{},a=this.injector.get(jt,null)||{},i=this.injector.get(Et,null)||{},o=this.injector.get(Nt,null)||{},r=this.injector.get(u.m);return Object(d.q)(r,"Saas").pipe(Object(m.a)(function(e){return{"Saas.EditionsComponent":e.Edition,"Saas.TenantsComponent":e.Tenant}}),Object(d.r)(r,"Saas"),Object(f.a)(function(r){Object(d.s)(e.entityActions,yt,t),Object(d.s)(e.toolbarActions,St,n),Object(d.t)(e.entityProps,Tt,r.prop,a),Object(d.t)(e.createFormProps,Ct,r.createForm,i),Object(d.t)(e.editFormProps,Ot,r.editForm,o)}),Object(y.a)(!0))}}]),e}()).\u0275fac=function(e){return new(e||xe)(p.hc(p.w))},xe.\u0275prov=p.Qb({token:xe,factory:xe.\u0275fac}),xe),It=[{path:"",redirectTo:"tenants",pathMatch:"full"},{path:"",component:u.r,canActivate:[u.g,u.N,wt],children:[{path:"tenants",component:u.R,data:{requiredPolicy:"Saas.Tenants",replaceableComponent:{key:"Saas.TenantsComponent",defaultComponent:rt}}},{path:"editions",component:u.R,data:{requiredPolicy:"Saas.Editions",replaceableComponent:{key:"Saas.EditionsComponent",defaultComponent:ot}}}]}],At=((_e=function e(){s(this,e)}).\u0275fac=function(e){return new(e||_e)},_e.\u0275mod=p.Sb({type:_e}),_e.\u0275inj=p.Rb({imports:[[ie.n.forChild(It)],ie.n]}),_e),Gt=((Ve=function(){function e(){s(this,e)}return c(e,null,[{key:"forChild",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{ngModule:e,providers:[{provide:kt,useValue:t.entityActionContributors},{provide:Ft,useValue:t.toolbarActionContributors},{provide:jt,useValue:t.entityPropContributors},{provide:Et,useValue:t.createFormPropContributors},{provide:Nt,useValue:t.editFormPropContributors},wt]}}},{key:"forLazy",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new u.E(e.forChild(t))}}]),e}()).\u0275fac=function(e){return new(e||Ve)},Ve.\u0275mod=p.Sb({type:Ve}),Ve.\u0275inj=p.Rb({imports:[[At,b.c.forFeature([at]),ae.a,u.o,O.a,l.o,k.i,ne]]}),Ve),Mt=((Le=function(){function t(e){s(this,t),this.store=e}return c(t,[{key:"getTenants",value:function(){return this.store.selectSnapshot(at.getTenants)}},{key:"getLatestTenants",value:function(){return this.store.selectSnapshot(at.getLatestTenants)}},{key:"getTenantsTotalCount",value:function(){return this.store.selectSnapshot(at.getTenantsTotalCount)}},{key:"getEditions",value:function(){return this.store.selectSnapshot(at.getEditions)}},{key:"getEditionsTotalCount",value:function(){return this.store.selectSnapshot(at.getEditionsTotalCount)}},{key:"getUsageStatistics",value:function(){return this.store.selectSnapshot(at.getUsageStatistics)}},{key:"dispatchGetTenants",value:function(){for(var t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];return this.store.dispatch(e(qe,n))}},{key:"dispatchGetTenantById",value:function(){for(var t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];return this.store.dispatch(e(Pe,n))}},{key:"dispatchCreateTenant",value:function(){for(var t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];return this.store.dispatch(e(Qe,n))}},{key:"dispatchUpdateTenant",value:function(){for(var t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];return this.store.dispatch(e(ze,n))}},{key:"dispatchDeleteTenant",value:function(){for(var t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];return this.store.dispatch(e($e,n))}},{key:"dispatchGetEditions",value:function(){for(var t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];return this.store.dispatch(e(Ke,n))}},{key:"dispatchGetEditionById",value:function(){for(var t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];return this.store.dispatch(e(He,n))}},{key:"dispatchCreateEdition",value:function(){for(var t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];return this.store.dispatch(e(We,n))}},{key:"dispatchUpdateEdition",value:function(){for(var t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];return this.store.dispatch(e(Ye,n))}},{key:"dispatchDeleteEdition",value:function(){for(var t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];return this.store.dispatch(e(Xe,n))}},{key:"dispatchGetUsageStatistics",value:function(){return this.store.dispatch(new Je)}},{key:"dispatchGetLatestTenants",value:function(){return this.store.dispatch(new et)}}]),t}()).\u0275fac=function(e){return new(e||Le)(p.hc(b.g))},Le.\u0275prov=Object(p.Qb)({factory:function(){return new Le(Object(p.hc)(b.g))},token:Le,providedIn:"root"}),Le)}}])}();