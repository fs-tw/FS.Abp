{"version":3,"file":"fs-tw-cms-admin.umd.js","sources":["../../../../node_modules/tslib/tslib.es6.js","../../../../libs/cms/admin/src/lib/post/providers/post-state.service.ts","../../../../libs/cms/admin/src/lib/post/components/layout/layout.component.ts","../../../../libs/cms/admin/src/lib/post/providers/page.service.ts","../../../../libs/cms/admin/src/lib/post/components/main/main.component.ts","../../../../libs/cms/admin/src/lib/shared/pipe/get-file.pipe.ts","../../../../libs/cms/admin/src/lib/shared/shared.module.ts","../../../../libs/cms/admin/src/lib/shared/file.service.ts","../../../../libs/cms/admin/src/lib/post/components/image-picker/image-picker.component.ts","../../../../libs/cms/admin/src/lib/post/components/upload-file/upload-file.component.ts","../../../../libs/cms/admin/src/lib/post/components/detail/detail.component.ts","../../../../libs/cms/admin/src/lib/post/post-routing.module.ts","../../../../libs/cms/admin/src/lib/post/components/main/list/list.component.ts","../../../../libs/cms/admin/src/lib/post/components/tag/tag.component.ts","../../../../libs/cms/admin/src/lib/post/post.module.ts","../../../../libs/cms/admin/src/lib/tag-management/providers/page.service.ts","../../../../libs/cms/admin/src/lib/tag-management/components/main/main.component.ts","../../../../libs/cms/admin/src/lib/tag-management/components/layout/layout.component.ts","../../../../libs/cms/admin/src/lib/tag-management/components/tag-detail/tag-detail.component.ts","../../../../libs/cms/admin/src/lib/tag-management/tag-management-routing.module.ts","../../../../libs/cms/admin/src/lib/tag-management/tag-management.module.ts","../../../../libs/cms/admin/src/lib/cms-admin-routing.module.ts","../../../../libs/cms/admin/src/lib/cms-admin.module.ts","../../../../libs/cms/admin/src/fs-tw-cms-admin.ts"],"sourcesContent":["/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation.\r\n\r\nPermission to use, copy, modify, and/or distribute this software for any\r\npurpose with or without fee is hereby granted.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\r\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\r\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\r\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\r\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\r\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\r\nPERFORMANCE OF THIS SOFTWARE.\r\n***************************************************************************** */\r\n/* global Reflect, Promise */\r\n\r\nvar extendStatics = function(d, b) {\r\n    extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\r\n    return extendStatics(d, b);\r\n};\r\n\r\nexport function __extends(d, b) {\r\n    if (typeof b !== \"function\" && b !== null)\r\n        throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\r\n    extendStatics(d, b);\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n}\r\n\r\nexport var __assign = function() {\r\n    __assign = Object.assign || function __assign(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    }\r\n    return __assign.apply(this, arguments);\r\n}\r\n\r\nexport function __rest(s, e) {\r\n    var t = {};\r\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\r\n        t[p] = s[p];\r\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\r\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\r\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\r\n                t[p[i]] = s[p[i]];\r\n        }\r\n    return t;\r\n}\r\n\r\nexport function __decorate(decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n}\r\n\r\nexport function __param(paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n}\r\n\r\nexport function __metadata(metadataKey, metadataValue) {\r\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(metadataKey, metadataValue);\r\n}\r\n\r\nexport function __awaiter(thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n}\r\n\r\nexport function __generator(thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n}\r\n\r\nexport var __createBinding = Object.create ? (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\r\n}) : (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n});\r\n\r\nexport function __exportStar(m, o) {\r\n    for (var p in m) if (p !== \"default\" && !Object.prototype.hasOwnProperty.call(o, p)) __createBinding(o, m, p);\r\n}\r\n\r\nexport function __values(o) {\r\n    var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\r\n    if (m) return m.call(o);\r\n    if (o && typeof o.length === \"number\") return {\r\n        next: function () {\r\n            if (o && i >= o.length) o = void 0;\r\n            return { value: o && o[i++], done: !o };\r\n        }\r\n    };\r\n    throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\r\n}\r\n\r\nexport function __read(o, n) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\r\n    if (!m) return o;\r\n    var i = m.call(o), r, ar = [], e;\r\n    try {\r\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\r\n    }\r\n    catch (error) { e = { error: error }; }\r\n    finally {\r\n        try {\r\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\r\n        }\r\n        finally { if (e) throw e.error; }\r\n    }\r\n    return ar;\r\n}\r\n\r\n/** @deprecated */\r\nexport function __spread() {\r\n    for (var ar = [], i = 0; i < arguments.length; i++)\r\n        ar = ar.concat(__read(arguments[i]));\r\n    return ar;\r\n}\r\n\r\n/** @deprecated */\r\nexport function __spreadArrays() {\r\n    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\r\n    for (var r = Array(s), k = 0, i = 0; i < il; i++)\r\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\r\n            r[k] = a[j];\r\n    return r;\r\n}\r\n\r\nexport function __spreadArray(to, from) {\r\n    for (var i = 0, il = from.length, j = to.length; i < il; i++, j++)\r\n        to[j] = from[i];\r\n    return to;\r\n}\r\n\r\nexport function __await(v) {\r\n    return this instanceof __await ? (this.v = v, this) : new __await(v);\r\n}\r\n\r\nexport function __asyncGenerator(thisArg, _arguments, generator) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var g = generator.apply(thisArg, _arguments || []), i, q = [];\r\n    return i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i;\r\n    function verb(n) { if (g[n]) i[n] = function (v) { return new Promise(function (a, b) { q.push([n, v, a, b]) > 1 || resume(n, v); }); }; }\r\n    function resume(n, v) { try { step(g[n](v)); } catch (e) { settle(q[0][3], e); } }\r\n    function step(r) { r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r); }\r\n    function fulfill(value) { resume(\"next\", value); }\r\n    function reject(value) { resume(\"throw\", value); }\r\n    function settle(f, v) { if (f(v), q.shift(), q.length) resume(q[0][0], q[0][1]); }\r\n}\r\n\r\nexport function __asyncDelegator(o) {\r\n    var i, p;\r\n    return i = {}, verb(\"next\"), verb(\"throw\", function (e) { throw e; }), verb(\"return\"), i[Symbol.iterator] = function () { return this; }, i;\r\n    function verb(n, f) { i[n] = o[n] ? function (v) { return (p = !p) ? { value: __await(o[n](v)), done: n === \"return\" } : f ? f(v) : v; } : f; }\r\n}\r\n\r\nexport function __asyncValues(o) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var m = o[Symbol.asyncIterator], i;\r\n    return m ? m.call(o) : (o = typeof __values === \"function\" ? __values(o) : o[Symbol.iterator](), i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i);\r\n    function verb(n) { i[n] = o[n] && function (v) { return new Promise(function (resolve, reject) { v = o[n](v), settle(resolve, reject, v.done, v.value); }); }; }\r\n    function settle(resolve, reject, d, v) { Promise.resolve(v).then(function(v) { resolve({ value: v, done: d }); }, reject); }\r\n}\r\n\r\nexport function __makeTemplateObject(cooked, raw) {\r\n    if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\r\n    return cooked;\r\n};\r\n\r\nvar __setModuleDefault = Object.create ? (function(o, v) {\r\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\r\n}) : function(o, v) {\r\n    o[\"default\"] = v;\r\n};\r\n\r\nexport function __importStar(mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\r\n    __setModuleDefault(result, mod);\r\n    return result;\r\n}\r\n\r\nexport function __importDefault(mod) {\r\n    return (mod && mod.__esModule) ? mod : { default: mod };\r\n}\r\n\r\nexport function __classPrivateFieldGet(receiver, privateMap) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to get private field on non-instance\");\r\n    }\r\n    return privateMap.get(receiver);\r\n}\r\n\r\nexport function __classPrivateFieldSet(receiver, privateMap, value) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to set private field on non-instance\");\r\n    }\r\n    privateMap.set(receiver, value);\r\n    return value;\r\n}\r\n","import { Injectable } from '@angular/core';\r\nimport { InternalStore } from '@abp/ng.core'\r\nimport { Observable } from 'rxjs';\r\n\r\nimport { Fs } from '@fs-tw/cms/proxy';\r\n\r\nexport namespace Post\r\n{\r\n    export interface State\r\n    {\r\n        Blog: Fs.Cms.Blogs.Dtos.BlogDto;\r\n    }\r\n}\r\n  \r\n\r\n@Injectable({\r\n    providedIn: 'root',\r\n})\r\nexport class PostStateService {\r\n    private store = new InternalStore({} as Post.State);\r\n\r\n    getBlog(): Observable<Fs.Cms.Blogs.Dtos.BlogDto> {\r\n        return this.store.sliceState(state => state.Blog);\r\n    }\r\n\r\n    constructor() {\r\n\r\n    }\r\n\r\n    setBlog(blog: Fs.Cms.Blogs.Dtos.BlogDto) {\r\n        this.store.patch({ Blog: blog })\r\n    }\r\n}","import { Component, OnInit } from '@angular/core';\r\n\r\n@Component({\r\n  selector: 'fs-layout',\r\n  templateUrl: './layout.component.html',\r\n  styleUrls: ['./layout.component.less']\r\n})\r\nexport class LayoutComponent implements OnInit {\r\n\r\n  constructor() { }\r\n\r\n  ngOnInit() {\r\n  }\r\n\r\n}\r\n","import { Injector, Injectable, Type } from '@angular/core';\r\nimport { Fs, Volo } from '@fs-tw/cms/proxy';\r\n\r\n// @dynamic\r\n@Injectable()\r\nexport class PageService {\r\n  private blogService: Fs.Cms.Blogs.BlogsApiService;\r\n  private postService: Fs.Cms.Posts.PostsApiService;\r\n  private directoriesApiService: Fs.Abp.File.Directories.DirectoriesApiService;\r\n  private fileDescriptorService: Volo.FileManagement.Files.FileDescriptorService;\r\n  \r\n  constructor(private injector: Injector) {\r\n    this.blogService = injector.get(Fs.Cms.Blogs.BlogsApiService);\r\n    this.postService = injector.get(Fs.Cms.Posts.PostsApiService);\r\n    this.directoriesApiService = injector.get(\r\n      Fs.Abp.File.Directories.DirectoriesApiService\r\n    );\r\n    this.fileDescriptorService = injector.get(\r\n      Volo.FileManagement.Files.FileDescriptorService\r\n    );\r\n  }\r\n\r\n  //#region  Blog\r\n  getBlogs(input: Fs.Cms.Blogs.Dtos.BlogGetListDto) {\r\n    return this.blogService.getListByBlogGetList(input);\r\n  }\r\n\r\n  getBlogById(id: string) {\r\n    return this.blogService.getByBlogPrimaryKey({ id: id });\r\n  }\r\n\r\n  createBlog(input: Fs.Cms.Blogs.Dtos.BlogCreateDto) {\r\n    return this.blogService.createByBlogCreate(input);\r\n  }\r\n\r\n  updateBlog(id: string, input: Fs.Cms.Blogs.Dtos.BlogUpdateDto) {\r\n    return this.blogService.updateByBlogPrimaryKeyAndBlogUpdate(\r\n      { id: id },\r\n      input\r\n    );\r\n  }\r\n\r\n  deleteBlog(id:string){\r\n    return this.blogService.deleteByBlogPrimaryKey({id});\r\n  }\r\n  //#endregion\r\n\r\n  //#region File\r\n  findByProviderByKeyAndGroup(key: string, group?: string) {\r\n    return this.directoriesApiService.findByProviderByKeyAndGroup(key, group);\r\n  }\r\n\r\n  deleteFile(id: string) {\r\n    return this.fileDescriptorService.deleteById(id);\r\n  }\r\n\r\n  getFileDescriptor(id:string){\r\n    return this.fileDescriptorService.getById(id);\r\n  }\r\n\r\n  //#endregion\r\n\r\n  //#region Post\r\n  getPostsByBlogId(input: Fs.Cms.Posts.Dtos.GetPostByBlogIdInput) {\r\n    return this.postService.getPostsByBlogIdByInput(input);\r\n  }\r\n\r\n  getPostById(id: string) {\r\n    return this.postService.getByPostPrimaryKey({ id: id });\r\n  }\r\n\r\n  createPost(input: Fs.Cms.Posts.Dtos.PostCreateDto) {\r\n    return this.postService.createByPostCreate(input);\r\n  }\r\n\r\n  updatePost(id: string, input: Fs.Cms.Posts.Dtos.PostUpdateDto) {\r\n    return this.postService.updateByPostPrimaryKeyAndPostUpdate(\r\n      { id: id },\r\n      input\r\n    );\r\n  }\r\n\r\n  deletePost(id: string) {\r\n    return this.postService.deleteByPostPrimaryKey({ id });\r\n  }\r\n  //#endregion\r\n\r\n  // getAllTags() {\r\n  //   return this.tagsApiService.tagGroupGetList();\r\n  // }\r\n\r\n  // getPostById(id: string) {\r\n  //   return this.postService.getWithTagsById(id);\r\n  // }\r\n\r\n  // blogGetList() {\r\n  //   return this.definitionsService.blogGetList();\r\n  // }\r\n\r\n  // createBlog(input: BlogCreateInput) {\r\n  //   return this.definitionsService.blogCreateByInput(input);\r\n  // }\r\n\r\n  // updateBlog(input: BlogUpdateInput, id: string) {\r\n  //   return this.definitionsService.blogUpdateByIdAndInput(id, input);\r\n  // }\r\n\r\n  // deleteBlog(id) {\r\n  //   return this.definitionsService.blogDeleteById(id);\r\n  // }\r\n\r\n  // createPostTagMap(postId: string, tagCodeId: string) {\r\n  //   return this.postService.createByPostTagMapCreate({ postId, tagCodeId })\r\n  // }\r\n\r\n  // deletePostTagMap(id: string) {\r\n  //   return this.postService.deleteByPostTagMapPrimaryKey({ id })\r\n  // }\r\n}\r\n","import { ListService } from '@abp/ng.core';\r\nimport { Confirmation, ConfirmationService, ToasterService } from '@abp/ng.theme.shared';\r\nimport {\r\n  EXTENSIONS_IDENTIFIER\r\n} from '@abp/ng.theme.shared/extensions';\r\nimport { Component, OnInit } from '@angular/core';\r\nimport { ActivatedRoute, Router } from '@angular/router';\r\nimport { eCmsRouteNames, ExtensionsService } from '@fs-tw/cms/config';\r\nimport { Fs } from '@fs-tw/cms/proxy';\r\nimport { forkJoin, Observable, Subscription } from 'rxjs';\r\nimport { PageService } from '../../providers/page.service';\r\nimport { PostStateService } from '../../providers/post-state.service';\r\n\r\n\r\n@Component({\r\n  selector: 'fs-main',\r\n  templateUrl: './main.component.html',\r\n  styleUrls: ['./main.component.less'],\r\n  providers: [\r\n    ListService,\r\n    {\r\n      provide: EXTENSIONS_IDENTIFIER,\r\n      useValue: eCmsRouteNames.Post,\r\n    },\r\n  ],\r\n})\r\nexport class MainComponent implements OnInit {\r\n  sub: Subscription;\r\n  blog$: Observable<Fs.Cms.Blogs.Dtos.BlogDto>;\r\n  blogId: string;\r\n  blogName: string;\r\n  hookToQueryScribe: Subscription;\r\n  postParams: Fs.Cms.Posts.Dtos.GetPostByBlogIdInput = {\r\n    skipCount: 0,\r\n    maxResultCount: 10,\r\n    keyword: \"\",  \r\n    blogId: null\r\n  } as Fs.Cms.Posts.Dtos.GetPostByBlogIdInput;\r\n\r\n  posts: Fs.Cms.Posts.Dtos.PostWithDetailsDto[] = [];\r\n  totalCount: number = 0;\r\n\r\n  constructor(\r\n    private extensionsService: ExtensionsService,\r\n    private router: Router,\r\n    private toasterService: ToasterService,\r\n    private confirmationService: ConfirmationService,\r\n    private pageService: PageService,\r\n    public readonly list: ListService,\r\n    private activatedRoute: ActivatedRoute,\r\n    private postStateService: PostStateService\r\n  ) {\r\n\r\n  }\r\n\r\n\r\n\r\n  ngOnInit() {\r\n    this.extensionsService.Actions$[eCmsRouteNames.Post].subscribe(\r\n      (x) => {\r\n        switch (x.name) {\r\n          case 'Edit':\r\n            this.gotoDetail(x.record.id)\r\n            break;\r\n          case 'Delete':\r\n            this.deleteItem(x.record)\r\n            break;\r\n        }\r\n      });\r\n\r\n    this.blog$ = this.postStateService.getBlog();\r\n    this.onBlogChange();\r\n  }\r\n\r\n  onBlogChange() {\r\n    this.sub = this.blog$.subscribe((blog) => {\r\n      this.blogId = blog == null ? null : blog.id;\r\n      this.blogName = blog == null ? \"全部\" : blog.displayName;\r\n\r\n      this.postParams.blogId = this.blogId;\r\n      this.hookToQuery();\r\n    })\r\n  }\r\n\r\n  gotoDetail(id?: string) {\r\n    if (id) this.router.navigate([\"/cms/post/detail/\" + id]);\r\n    else this.router.navigate([\"/cms/post/detail\"], {\r\n      queryParams: {\r\n        blogId: this.postParams.blogId\r\n      }\r\n    });\r\n  }\r\n\r\n  hookToQuery() {\r\n\r\n    if (this.hookToQueryScribe) this.hookToQueryScribe.unsubscribe();\r\n    const query = (query) => {\r\n      query.keyword = this.postParams.keyword;\r\n      query.blogId = this.postParams.blogId;\r\n      return this.pageService.getPostsByBlogId(query)\r\n    };\r\n\r\n    this.hookToQueryScribe = this.list.hookToQuery(query).subscribe((res) => {\r\n      this.posts = res.items;\r\n      this.totalCount = res.totalCount;\r\n    });\r\n  }\r\n\r\n  deleteItem(item: Fs.Cms.Posts.Dtos.PostDto) {\r\n    this.confirmationService\r\n      .warn('確認要刪除嗎？', '系統訊息', {\r\n        cancelText: \"取消\",\r\n        yesText: \"確定\"\r\n      })\r\n      .subscribe((status: Confirmation.Status) => {\r\n        if (status === Confirmation.Status.confirm) {\r\n          let files = item.attachmentFileInfos.map(x => x.fileId)\r\n          let images = item.postImages.map(x => x.imageId);\r\n          let deleteFileActions = files.concat(images).map(x => this.pageService.deleteFile(x));\r\n          forkJoin(deleteFileActions).subscribe();\r\n\r\n          this.pageService.deletePost(item.id).subscribe(x => {\r\n            this.toasterService.success(\"刪除成功！\")\r\n            this.list.get();\r\n          })\r\n        }\r\n      });\r\n  }\r\n\r\n  ngOnDestroy(): void {\r\n    if (this.hookToQueryScribe) this.hookToQueryScribe.unsubscribe();\r\n    if (this.sub) this.sub.unsubscribe();\r\n  }\r\n\r\n}\r\n","import { Pipe, PipeTransform } from '@angular/core';\r\nimport { EnvironmentService } from '@abp/ng.core'\r\n\r\n\r\n@Pipe({\r\n    name: 'getFileById'\r\n})\r\nexport class GetFileByIdPipe implements PipeTransform {\r\n\r\n    constructor(\r\n        private environmentService: EnvironmentService,\r\n    ) { }\r\n\r\n    transform(value: string): any {\r\n        return this.environmentService.getApiUrl() + \"/api/file-management/file-descriptor/file-content?id=\" + value\r\n    }\r\n\r\n}","import { NgModule } from '@angular/core';\r\n// import { NgAlainBasicModule } from '@fs-tw/theme-ng-alain/basic';\r\nimport { ThemeAlainMsSharedModule } from '@fs-tw/theme-alain-ms/shared';\r\nimport { UiExtensionsModule } from '@fs-tw/theme-alain-ms/shared/extensions'\r\nimport { GetFileByIdPipe } from './pipe/get-file.pipe';\r\nconst COMPONENT = [GetFileByIdPipe]\r\n\r\n@NgModule({\r\n  declarations: [...COMPONENT],\r\n  imports: [\r\n    // NgAlainBasicModule,\r\n    ThemeAlainMsSharedModule,\r\n    UiExtensionsModule\r\n  ],\r\n  exports: [\r\n    // NgAlainBasicModule,\r\n    ...COMPONENT,\r\n    ThemeAlainMsSharedModule,\r\n    UiExtensionsModule\r\n  ]\r\n})\r\nexport class SharedModule { }\r\n","import { Injectable } from '@angular/core';\r\nimport { EnvironmentService, RestService, AuditedEntityDto } from '@abp/ng.core';\r\n// import { FileDescriptorDto } from '@volo/abp.ng.file-management'\r\n\r\n// TODO USE @volo/abp.ng.file-management FileDescriptorDto\r\nexport interface FileDescriptorDto extends AuditedEntityDto<string> {\r\n  directoryId?: string;\r\n  name: string;\r\n  mimeType: string;\r\n  size: number;\r\n}\r\n\r\n@Injectable({ providedIn: 'root' })\r\nexport class FileService {\r\n\r\n  constructor(\r\n    private restService: RestService,\r\n    private environmentService: EnvironmentService,\r\n  ) {\r\n  }\r\n\r\n  getFileUrl(id) {\r\n    if (!id) return \"\";\r\n    return this.environmentService.getApiUrl() + \"/api/file-management/file-descriptor/file-content?id=\" + id\r\n  }\r\n\r\n  uploadFile(file: File, directoryId: string) {    \r\n    const formData = new FormData();\r\n    formData.append(\"relativePath\", null);\r\n    formData.append(\"file\", file);\r\n    formData.append(\"name\", file.name);   \r\n    formData.append(\"type\", file.type);\r\n    return this.restService.request<any, FileDescriptorDto>({\r\n      method: 'POST',\r\n      url: `/api/file-management/file-descriptor/upload`,\r\n      body: formData,\r\n      params: { directoryId: directoryId }\r\n    });\r\n  }\r\n\r\n\r\n  getFileBlobById(id: string) {\r\n    return this.restService.request<any, Blob>({\r\n      method: 'GET',\r\n      url: `/api/file-management/file-descriptor/file-content`,\r\n      params: { id },\r\n      responseType: 'blob'\r\n    });\r\n  }\r\n\r\n\r\n\r\n\r\n}\r\n","import { Component, Input, OnInit, TemplateRef, Output, EventEmitter } from '@angular/core';\r\n\r\nimport { NzUploadFile } from 'ng-zorro-antd/upload';\r\nimport { FileService } from '../../../shared'\r\nimport { ToasterService } from '@abp/ng.theme.shared';\r\nimport { ConfigStateService,EnvironmentService } from '@abp/ng.core';\r\n\r\nexport class ImageFile {\r\n  fileName: string;\r\n  fileUrl: string;\r\n\r\n  constructor(fileName: string = '', fileUrl: string = '') {\r\n    this.fileName = fileName;\r\n    this.fileUrl = fileUrl;\r\n  }\r\n}\r\n\r\nexport class SaveFile {\r\n  isUpload: boolean;\r\n  file: File;\r\n  fileName: string;\r\n  fileUrl: string;\r\n\r\n  constructor(fileName: string, fileUrl: string, file: File) {\r\n    this.fileName = fileName;\r\n    this.fileUrl = fileUrl;\r\n    this.file = file;\r\n\r\n    this.isUpload = this.file != null;\r\n  }\r\n}\r\n\r\nclass ViewImage {\r\n  image: ImageFile;\r\n  isVisabled: boolean;\r\n\r\n  constructor() {\r\n    this.image = new ImageFile();\r\n    this.isVisabled = false;\r\n  }\r\n}\r\n\r\n@Component({\r\n  selector: 'image-picker',\r\n  templateUrl: './image-picker.component.html',\r\n  styleUrls: ['./image-picker.component.css']\r\n})\r\nexport class ImagePickerComponent implements OnInit {\r\n\r\n  /** 縮圖寬度，單位 px，預設 104px */\r\n  @Input() imageWidth: string = '104px';\r\n\r\n  /** 縮圖高度，單位 px ，預設 104px */\r\n  @Input() imageHeight: string = '104px';\r\n\r\n  /** 外框寬度，單位 px ，預設 104px */\r\n  @Input() borderWidth: string = '104px';\r\n\r\n  /** 外框高度，單位 px ，預設 104px */\r\n  @Input() borderHeight: string = '104px';\r\n\r\n  /** 上傳最大數量 */\r\n  @Input() maxImageCount: number = null;\r\n\r\n  /** 是否可同時選多張圖片 */\r\n  @Input() isMultiple: boolean = true;\r\n\r\n  /** 顯示圖片 Template ，縮圖比例功能會失效 */\r\n  @Input() imageTemplate: TemplateRef<any>;\r\n\r\n  /** 上傳圖片 Template，可完整替換成其他形式，如︰按鈕上傳 */\r\n  @Input() uploadTemplate: TemplateRef<any>;\r\n  \r\n  /** 上傳按鈕文字 Template，若 uploadTemplate 有值則無效 */\r\n  @Input() uploadTextTemplate: TemplateRef<any>;\r\n\r\n  /** 是否排列在同一行，同一行時行寬同 imageWidth */\r\n  @Input() inLine: boolean = true;\r\n\r\n  /** 上傳按鈕顯示於前面 */\r\n  @Input() showFrontButton: boolean = true;\r\n\r\n  /** 原已上傳圖片 */\r\n  @Input() existFiles: ImageFile[] = [];\r\n\r\n  /** 原已上傳圖片被刪除的檔名 */\r\n  private deleteFiles: string[] = [];\r\n\r\n  /** 本次上傳所顯示圖片 */\r\n  showFiles: ImageFile[] = [];\r\n\r\n  /** 本次上傳圖片 */\r\n  private uploadFiles: NzUploadFile[] = [];\r\n\r\n  /** 顯示預覽圖 modal */\r\n  viewImage: ViewImage = new ViewImage();\r\n\r\n  get canUpload(): boolean {\r\n    let imageNumber = this.existFiles.length + this.uploadFiles.length;\r\n    return this.maxImageCount == null || imageNumber < this.maxImageCount;\r\n  }\r\n\r\n  constructor(\r\n    private toasterService: ToasterService,\r\n    private environmentService:EnvironmentService,\r\n    private fileService: FileService\r\n  ) { }\r\n\r\n  ngOnInit(): void {\r\n  }\r\n\r\n  ngOnChanges() {\r\n    this.existFiles = this.existFiles\r\n      .filter(x => x.fileUrl)\r\n      .map(x => new ImageFile(x.fileName, this.fileService.getFileUrl(x.fileUrl)));\r\n\r\n    this.uploadFiles = [];\r\n    this.showFiles = [];\r\n    this.deleteFiles = [];\r\n  }\r\n\r\n  clear() {\r\n    this.existFiles = [];\r\n    this.deleteFiles = [];\r\n    this.uploadFiles = [];\r\n    this.showFiles = [];\r\n  }\r\n\r\n  // private getHttpUrl(url: string): string {\r\n  //   let result = url;\r\n  //   if (url.includes(\"http\")) return result;\r\n\r\n  //   return this.environmentService.getApiUrl() + url;\r\n  // }\r\n\r\n  beforeUpload = (file: NzUploadFile): boolean => {\r\n    let isJpgOrPng = file.type === 'image/jpeg' || file.type === 'image/png';\r\n    if (!isJpgOrPng) {\r\n      this.toasterService.error(\"圖片格式須為 jpg 或 png\");\r\n      return false;\r\n    }\r\n\r\n    let fileName = file.name;\r\n\r\n    let hasExistImage = this.existFiles.findIndex(x => x.fileName == fileName) > -1;\r\n    let hasShowImage = this.showFiles.findIndex(x => x.fileName == fileName) > -1;\r\n    if (hasExistImage || hasShowImage) return false;\r\n\r\n\r\n    let imgFile: any = file;\r\n    this.getBase64(imgFile, (img) => {\r\n      if (!this.canUpload) {\r\n        this.toasterService.error(\"圖片數已達上限\");\r\n        return;\r\n      }\r\n\r\n      this.uploadFiles.push(imgFile);\r\n      this.showFiles.push(new ImageFile(fileName, img));\r\n    });\r\n\r\n    return false;\r\n  };\r\n\r\n  private getBase64(img: File, callback: (img: string) => void): void {\r\n    const reader = new FileReader();\r\n    reader.addEventListener('load', () => callback(reader.result!.toString()));\r\n    reader.readAsDataURL(img);\r\n  }\r\n\r\n  deleteFile(fileName: string) {\r\n    let inExistImage = this.existFiles.findIndex(x => x.fileName == fileName) > -1;\r\n    let inShowImage = this.showFiles.findIndex(x => x.fileName == fileName) > -1;\r\n\r\n    // 現有圖片刪除\r\n    if (inExistImage) {\r\n      this.existFiles = this.existFiles.filter(x => x.fileName != fileName);\r\n      this.deleteFiles.push(fileName);\r\n      return;\r\n    }\r\n\r\n    // 上傳圖片刪除\r\n    if (inShowImage) {\r\n      this.showFiles = this.showFiles.filter(x => x.fileName != fileName);\r\n      this.uploadFiles = this.uploadFiles.filter(x => x.name != fileName);\r\n    }\r\n\r\n  }\r\n\r\n  controllModal(state: boolean, image: ImageFile = new ImageFile()) {  \r\n    this.viewImage.image = image;\r\n    this.viewImage.isVisabled = state;\r\n  }\r\n\r\n  getDeleteFileNames(): string[] {\r\n    return this.deleteFiles;\r\n  }\r\n\r\n\r\n  getNewUploadFiles():SaveFile[]{\r\n    let updateFiles: SaveFile[] = this.uploadFiles.map((x: any) => new SaveFile(x.name, '', x));\r\n    return updateFiles;\r\n  }\r\n\r\n  getUploadFiles(): SaveFile[] {\r\n    let existFiles = this.existFiles.filter(x => !this.deleteFiles.includes(x.fileName)).map(x => new SaveFile(x.fileName, x.fileUrl, null));\r\n    let updateFiles: SaveFile[] = this.uploadFiles.map((x: any) => new SaveFile(x.name, '', x));\r\n    \r\n    return existFiles.concat(updateFiles);\r\n  }\r\n\r\n}\r\n","import { Component, Input, OnInit } from '@angular/core';\r\nimport { NzUploadFile } from 'ng-zorro-antd/upload';\r\nimport { Confirmation, ConfirmationService, ToasterService } from '@abp/ng.theme.shared';\r\n\r\nexport class FileInfo {\r\n  fileName: string;\r\n  fileUrl: string;\r\n\r\n  constructor(fileName: string = '', fileUrl: string = '') {\r\n    this.fileName = fileName;\r\n    this.fileUrl = fileUrl;\r\n  }\r\n}\r\n\r\nexport class FileData {\r\n  isUpload: boolean;\r\n  file: File;\r\n  fileName: string;\r\n  fileUrl: string;\r\n\r\n  constructor(fileName: string, fileUrl: string, file: File) {\r\n    this.fileName = fileName;\r\n    this.fileUrl = fileUrl;\r\n    this.file = file;\r\n\r\n    this.isUpload = this.file != null;\r\n  }\r\n}\r\n\r\n@Component({\r\n  selector: 'fs-upload-file',\r\n  templateUrl: './upload-file.component.html',\r\n  styleUrls: ['./upload-file.component.css']\r\n})\r\nexport class UploadFileComponent implements OnInit {\r\n\r\n  @Input()\r\n  existFiles: FileInfo[] = [];\r\n\r\n  fileList: NzUploadFile[] = [];\r\n\r\n\r\n  constructor(\r\n    private confirmationService: ConfirmationService\r\n  ) {\r\n\r\n  }\r\n\r\n  ngOnInit() {\r\n\r\n  }\r\n\r\n  beforeUpload = (file: NzUploadFile): boolean => {\r\n    let exist = this.existFiles.findIndex(x => x.fileName == file.name) > -1 ||\r\n      this.fileList.findIndex(x => x.name == file.name) > -1;\r\n    if (exist) return false;\r\n    this.fileList = this.fileList.concat(file);\r\n    return false;\r\n  };\r\n\r\n  delete(url) {\r\n    this.confirmationService\r\n      .warn('確認刪除嗎？', '系統訊息')\r\n      .subscribe((status: Confirmation.Status) => {\r\n        if (status === Confirmation.Status.confirm) {\r\n          this.existFiles = this.existFiles.filter(x => x != url);\r\n        }\r\n      });\r\n  }\r\n\r\n  getNewUploadFiles(): FileData[] {\r\n    let updateFiles: FileData[] = this.fileList.map((x: any) => new FileData(x.name, '', x));\r\n    return updateFiles;\r\n  }\r\n}\r\n","import { Component, OnDestroy, OnInit, ViewChild } from '@angular/core';\r\nimport { Confirmation, ConfirmationService, ToasterService } from '@abp/ng.theme.shared';\r\nimport { ActivatedRoute, Router } from '@angular/router';\r\nimport { forkJoin, Observable, of } from 'rxjs';\r\nimport * as _ from 'lodash';\r\nimport * as dns from 'date-fns'\r\nimport { Fs } from '@fs-tw/cms/proxy';\r\nimport { UploadFileComponent } from '../upload-file/upload-file.component';\r\nimport { PageService } from '../../providers/page.service';\r\nimport { ImageFile, ImagePickerComponent } from '../image-picker/image-picker.component';\r\nimport { FileService, FileDescriptorDto } from '../../../shared'\r\nimport { map } from 'rxjs/operators';\r\nimport { FileInfo } from '../upload-file/upload-file.component';\r\n\r\n@Component({\r\n  selector: 'fs-detail',\r\n  templateUrl: './detail.component.html',\r\n  styleUrls: ['./detail.component.less']\r\n})\r\nexport class DetailComponent implements OnInit {\r\n  @ViewChild(\"DefaultImagePicker\") defaultImagePicker: ImagePickerComponent;\r\n  @ViewChild(\"DefaultUploadFile\") defaultUploadFile: UploadFileComponent;\r\n  postId: string;\r\n  data: Fs.Cms.Posts.Dtos.PostDto;\r\n  dateRange: Date[] = [new Date(), new Date()];\r\n  defaultImages: ImageFile[] = [];\r\n  defaultFiles: FileInfo[] = [];\r\n  blogs: Fs.Cms.Blogs.Dtos.BlogDto[] = [];\r\n\r\n  isLoading: boolean = false;\r\n  directory\r\n  coverImage: string = '';\r\n  contentFileName = \"\";\r\n  constructor(\r\n    private router: Router,\r\n    private fileService: FileService,\r\n    private activatedRoute: ActivatedRoute,\r\n    private pageService: PageService,\r\n    private confirmationService: ConfirmationService\r\n  ) {\r\n    this.postId = this.activatedRoute.snapshot.paramMap.get('postId');\r\n    this.pageService.findByProviderByKeyAndGroup(\"FS.Cms.Posts\", this.postId ? this.postId : this.getRand()).subscribe(x => {\r\n      this.directory = x;\r\n    })\r\n  }\r\n\r\n  ngOnInit() {\r\n\r\n\r\n    this.getPost();\r\n    this.getBlogs();\r\n  }\r\n\r\n  getPost() {\r\n    this.data = {\r\n      blogId: null,\r\n      title: '',\r\n      subtitle: '',\r\n      url: '',\r\n      content: '',\r\n      disable: false,\r\n      startTime: '',\r\n      endTime: '',\r\n      displayMode: 0,\r\n      sequence: 0,\r\n      attachmentFileInfos: [],\r\n      postImages: []\r\n    } as Fs.Cms.Posts.Dtos.PostDto;\r\n    this.contentFileName = \"\";\r\n    this.dateRange = [new Date(), new Date()];\r\n\r\n    this.defaultImages = [];\r\n    this.defaultFiles = [];\r\n    this.coverImage = ''\r\n\r\n    if (this.postId) {\r\n      this.pageService.getPostById(this.postId).subscribe((x) => {\r\n        this.data = x;\r\n        let st = x.startTime ? new Date(x.startTime) : new Date();\r\n        let ed = x.endTime ? new Date(x.endTime) : new Date();\r\n        this.dateRange = [st, ed];\r\n\r\n        this.defaultImages = x.postImages.map(y => new ImageFile(y.name, y.imageId));\r\n        this.defaultFiles = x.attachmentFileInfos.map(y => new FileInfo(y.name, this.fileService.getFileUrl(y.fileId)))\r\n        let coverImageIndex = x.postImages.findIndex(y => y.isCover);\r\n        if (coverImageIndex > -1) this.coverImage = x.postImages[coverImageIndex].imageId;\r\n\r\n        if (x.content) {\r\n          this.pageService.getFileDescriptor(x.content).subscribe(x => {\r\n            this.contentFileName = x.name;\r\n          })\r\n\r\n          this.fileService.getFileBlobById(x.content).subscribe(data => {\r\n            const blob = new Blob([data], { type: 'text/plain;charset=utf-8' });\r\n            let reader = new FileReader();\r\n            reader.onload = () => {\r\n              this.data.content = reader.result.toString();\r\n            }\r\n            reader.readAsText(blob);\r\n          })\r\n        }\r\n\r\n      })\r\n    }\r\n  }\r\n\r\n  getBlogs() {\r\n    let input = {\r\n      skipCount: 0,\r\n      maxResultCount: 999,\r\n      sorting: 'sequence'\r\n    } as Fs.Cms.Blogs.Dtos.BlogGetListDto;\r\n\r\n    this.pageService.getBlogs(input).subscribe((x) => {\r\n      this.blogs = x.items;\r\n      if (!this.postId) this.data.blogId = this.activatedRoute.snapshot.queryParamMap.get('blogId');\r\n    })\r\n  }\r\n\r\n  deleteFile(fileName: string) {\r\n    this.confirmationService.warn(`確定刪除 ${fileName} 嗎？`, \"系統訊息\")\r\n      .subscribe((result) => {\r\n        if (result != Confirmation.Status.confirm) return;\r\n\r\n        this.defaultImagePicker.deleteFile(fileName);\r\n      })\r\n  }\r\n\r\n  getRand() {\r\n    return (Math.floor(Math.random() * 100) + 1).toString();\r\n  }\r\n\r\n  save() {\r\n    // TODO: 刪除檔案、加標籤\r\n    // let deleteImages = this.defaultImagePicker.getDeleteFileNames();\r\n    // let deleteTargets = item.postImages.filter(x => deleteImages.some(y => y == x.name));\r\n    // let deleteActions = deleteTargets.map(x=>{\r\n    //   return this.pageService.deleteFile(x.imageId);\r\n    // })\r\n    // forkJoin(deleteActions).subscribe(x=>{})\r\n\r\n    let item: Fs.Cms.Posts.Dtos.PostDto = _.cloneDeep(this.data);\r\n    item.startTime = this.dateRange[0].toLocalISOString();\r\n    item.endTime = this.dateRange[1]?.toLocalISOString();\r\n\r\n\r\n    let contentAction$ = of(\"\");\r\n    if (item.displayMode == Fs.Cms.Posts.DisplayMode.內文) {\r\n      // let now = new Date();\r\n      const blob = new Blob([item.content], { type: \"text/plain;charset=utf-8\" });\r\n      let useContentFileName = dns.format(new Date(), 'yyyyMMddHHmmss') + '-' + this.getRand() + \".txt\"//now.toLocaleDateString() + \"_\" + now.toLocaleTimeString() + \"_\" + (Math.floor(Math.random() * 100) + 1) + \".txt\";\r\n      if (this.contentFileName) useContentFileName = this.contentFileName;\r\n      let file = this.blobToFile(blob, useContentFileName);\r\n      contentAction$ = this.fileService.uploadFile(file, this.directory.id).pipe(map(x => x.id));\r\n    }\r\n\r\n\r\n    let imagesAction = this.uploadImage$(item);\r\n    let filesAction = this.uploadFiles$(item);\r\n    forkJoin([imagesAction, filesAction, contentAction$]).subscribe(x => {\r\n      item.postImages = x[0];\r\n      item.attachmentFileInfos = x[1];\r\n      item.content = x[2];\r\n      this.savePost(item);\r\n    });\r\n  }\r\n\r\n\r\n\r\n\r\n  private blobToFile = (theBlob: Blob, fileName: string): File => {\r\n    return new File([theBlob], fileName, { type: \"text/plain;charset=utf-8\" })\r\n  }\r\n\r\n\r\n  uploadFiles$(item: Fs.Cms.Posts.Dtos.PostDto): Observable<Fs.Cms.Posts.Dtos.AttachmentFileInfo[]> {\r\n    let domainItem: Fs.Cms.Posts.Dtos.PostDto = _.cloneDeep(item)\r\n    let newUploadFiles = this.defaultUploadFile.getNewUploadFiles();\r\n\r\n    let existFileNames = this.defaultUploadFile.existFiles.map(x => x.fileName);\r\n    domainItem.attachmentFileInfos = domainItem.attachmentFileInfos.filter(x => existFileNames.some(y => y == x.name));\r\n\r\n    if (newUploadFiles.length == 0) {\r\n      return of(domainItem.attachmentFileInfos);\r\n    }\r\n\r\n    let fileActions = newUploadFiles.map(savefile => {\r\n      return this.fileService.uploadFile(savefile.file, this.directory.id)\r\n    })\r\n\r\n    return forkJoin(fileActions).pipe(map(x => {\r\n      let result: Fs.Cms.Posts.Dtos.AttachmentFileInfo[] = x.map(y => {\r\n        return {\r\n          name: y.name,\r\n          fileId: y.id\r\n        }\r\n      })\r\n      return result.concat(domainItem.attachmentFileInfos)\r\n    }))\r\n  }\r\n\r\n  uploadImage$(item: Fs.Cms.Posts.Dtos.PostDto): Observable<Fs.Cms.Posts.Dtos.PostImageDto[]> {\r\n    let domainItem: Fs.Cms.Posts.Dtos.PostDto = _.cloneDeep(item)\r\n    let newUploadImages = this.defaultImagePicker.getNewUploadFiles();\r\n\r\n\r\n    let existFileNames = this.defaultImagePicker.existFiles.map(x => x.fileName);\r\n    domainItem.postImages = domainItem.postImages.filter(x => existFileNames.some(y => y == x.name));\r\n\r\n    if (newUploadImages.length == 0) {\r\n      return of(domainItem.postImages);\r\n    }\r\n\r\n\r\n    let fileActions = newUploadImages.map(savefile => {\r\n      return this.fileService.uploadFile(savefile.file, this.directory.id)\r\n    })\r\n\r\n    return forkJoin(fileActions).pipe(map(x => {\r\n      let result: Fs.Cms.Posts.Dtos.PostImageDto[] = x.map(y => {\r\n        return {\r\n          name: y.name,\r\n          isCover: (this.coverImage == y.name),\r\n          imageId: y.id\r\n        }\r\n      })\r\n      return result.concat(domainItem.postImages)\r\n    }))\r\n\r\n  }\r\n\r\n  savePost(item: Fs.Cms.Posts.Dtos.PostDto) {\r\n    let action: Observable<any>;\r\n    if (!this.postId) {\r\n      action = this.pageService.createPost(item);\r\n    } else {\r\n      action = this.pageService.updatePost(this.postId, item);\r\n    }\r\n\r\n    action.subscribe((x) => {\r\n      this.router.navigate([\"cms/post\"]);\r\n    })\r\n  }\r\n\r\n}\r\n","import { NgModule, Injectable } from '@angular/core';\r\nimport { Routes, RouterModule, Resolve } from '@angular/router';\r\n\r\nimport { PostStateService } from './providers/post-state.service';\r\n\r\nimport { LayoutComponent } from './components/layout/layout.component';\r\nimport { MainComponent } from './components/main/main.component';\r\nimport { DetailComponent } from './components/detail/detail.component';\r\n\r\n@Injectable()\r\nexport class RouteConfig implements Resolve<any> {\r\n  constructor(private postStateService: PostStateService) { }\r\n\r\n  resolve() {\r\n    return this.postStateService.setBlog(null);\r\n  }\r\n}\r\n\r\nconst routes: Routes = [\r\n  {\r\n    path: '',\r\n    component: LayoutComponent,\r\n    resolve: { 'RouteConfig': RouteConfig },\r\n    children: [\r\n      {\r\n        path: '',\r\n        component: MainComponent\r\n      },\r\n      {\r\n        path:'detail',\r\n        component:DetailComponent,\r\n      },\r\n      {\r\n        path:'detail/:postId',\r\n        component:DetailComponent,\r\n      }\r\n    ],\r\n  }\r\n];\r\n\r\n@NgModule({\r\n  imports: [RouterModule.forChild(routes)],\r\n  exports: [RouterModule], \r\n  providers:[\r\n    RouteConfig\r\n  ]\r\n})\r\nexport class PostRoutingModule { }\r\n","import { Component, Injector, OnInit, ViewChild,OnDestroy } from '@angular/core';\r\nimport { FileService } from '../../../../shared'\r\nimport { Fs } from '@fs-tw/cms/proxy';\r\nimport { PageService } from '../../../providers/page.service';\r\nimport { PostStateService } from '../../../providers/post-state.service';\r\nimport { ListService } from '@abp/ng.core';\r\nimport {\r\n  EXTENSIONS_IDENTIFIER,\r\n  FormPropData,\r\n  generateFormFromProps,\r\n} from '@abp/ng.theme.shared/extensions';\r\nimport { eCmsRouteNames, ExtensionsService } from '@fs-tw/cms/config';\r\nimport { FormGroup } from '@angular/forms';\r\nimport { ImageFile, ImagePickerComponent } from '../../image-picker/image-picker.component';\r\nimport { Observable, Subscriber, Subscription } from 'rxjs';\r\nimport {\r\n  Confirmation,\r\n  ConfirmationService,\r\n  ToasterService,\r\n} from '@abp/ng.theme.shared';\r\nimport { Router, ActivatedRoute } from '@angular/router';\r\n@Component({\r\n  selector: 'fs-list',\r\n  templateUrl: './list.component.html',\r\n  styleUrls: ['./list.component.css'],\r\n  providers: [\r\n    ListService,\r\n    {\r\n      provide: EXTENSIONS_IDENTIFIER,\r\n      useValue: eCmsRouteNames.Blog,\r\n    },\r\n  ],\r\n})\r\nexport class ListComponent implements OnInit,OnDestroy {\r\n  @ViewChild(\"DefaultImagePicker\") defaultImagePicker: ImagePickerComponent;\r\n  datas: Fs.Cms.Blogs.Dtos.BlogDto[] = [];\r\n  count = 0;\r\n  defaultImages: ImageFile[] = [];\r\n  isVisible = false;\r\n  form: FormGroup;\r\n  selected: Fs.Cms.Blogs.Dtos.BlogDto = {} as Fs.Cms.Blogs.Dtos.BlogDto\r\n  directory;\r\n  defaultSelectId = null;\r\n  sub: Subscription;\r\n  constructor(\r\n    private router: Router,\r\n    private extensionsService: ExtensionsService,\r\n    private pageService: PageService,\r\n    protected injector: Injector,\r\n    public readonly list: ListService,\r\n    private fileService: FileService,\r\n    private toasterService: ToasterService,\r\n    private activatedRoute: ActivatedRoute,\r\n    private confirmationService: ConfirmationService,\r\n    private postStateService: PostStateService\r\n  ) {\r\n    \r\n\r\n    this.activatedRoute.queryParamMap.subscribe(x => {\r\n      this.defaultSelectId = x.get(\"blogId\");\r\n\r\n      this.pageService.findByProviderByKeyAndGroup(\"FS.Cms.Blogs\",this.defaultSelectId?this.defaultSelectId:this.getRand()).subscribe(x => {\r\n        this.directory = x;\r\n      })\r\n    })\r\n  }\r\n  ngOnDestroy(): void {\r\n    if(this.sub) this.sub.unsubscribe();\r\n  }\r\n\r\n  getRand() {\r\n    return (Math.floor(Math.random() * 100) + 1).toString();\r\n  }\r\n\r\n  ngOnInit() {\r\n    this.sub = this.extensionsService.Actions$[eCmsRouteNames.Blog].subscribe(\r\n      (x) => {\r\n        switch (x.name) {\r\n          case 'Edit':\r\n            this.edit(x.record.id);\r\n            break;\r\n          case 'Delete':\r\n            this.deleteBlog(x.record)\r\n            break;\r\n          case 'Add':\r\n            this.add();\r\n            break;\r\n        }\r\n      }\r\n    );\r\n\r\n    this.reload();\r\n  }\r\n\r\n  reload() {\r\n\r\n    let input: Fs.Cms.Blogs.Dtos.BlogGetListDto = {\r\n      skipCount: 0,\r\n      maxResultCount: 10,\r\n      sorting: 'sequence'\r\n    } as Fs.Cms.Blogs.Dtos.BlogGetListDto;\r\n\r\n    const customerStreamCreator = (query) => {\r\n      return this.pageService.getBlogs(input)\r\n    };\r\n\r\n    this.list.hookToQuery(customerStreamCreator).subscribe((res) => {\r\n      this.datas = res.items;\r\n      this.count = res.totalCount;\r\n      if (this.defaultSelectId) {\r\n        let select = this.datas.find(x => x.id == this.defaultSelectId);\r\n        this.showDetail(select)\r\n      }\r\n    });\r\n  }\r\n\r\n  showDetail(blog: Fs.Cms.Blogs.Dtos.BlogDto) {\r\n    if (blog == null) {\r\n      this.router.navigate(['./cms/post'])\r\n      this.postStateService.setBlog(null);\r\n      return;\r\n    }\r\n    this.router.navigate(['./cms/post'], { queryParams: { 'blogId': blog.id } })\r\n    this.postStateService.setBlog(blog);\r\n  }\r\n\r\n  deleteBlog(blog: Fs.Cms.Blogs.Dtos.BlogDto) {\r\n    this.confirmationService\r\n      .warn('確認要刪除嗎？(此Blog下的文章將移至不分類)', '系統訊息', {\r\n        cancelText: \"取消\",\r\n        yesText: \"確定\"\r\n      })\r\n      .subscribe((status: Confirmation.Status) => {\r\n        if (status === Confirmation.Status.confirm) {\r\n          this.pageService.deleteBlog(blog.id).subscribe(x => {\r\n            this.toasterService.success(\"刪除成功！\")\r\n            this.list.get();\r\n            this.router.navigate([\"./cms/post\"])\r\n          })\r\n        }\r\n      });\r\n  }\r\n\r\n\r\n\r\n  handleCancel() {\r\n    this.isVisible = false;\r\n  }\r\n\r\n  save() {\r\n    if (!this.form.valid) return;\r\n    let deleteImageNames = this.defaultImagePicker.getDeleteFileNames();    \r\n    if(deleteImageNames.length>0){\r\n      this.pageService.deleteFile(deleteImageNames[0]).subscribe(()=>{\r\n        this.uploadFile();\r\n      });\r\n    } else this.uploadFile();\r\n    \r\n  }\r\n\r\n\r\n  uploadFile(){\r\n    let uploadImageInfos = this.defaultImagePicker.getUploadFiles();\r\n    let fileId = \"\";\r\n    if ((uploadImageInfos.length > 0)) {\r\n      if (this.selected.iconUrl == uploadImageInfos[0].fileName) {\r\n        this.saveBlog(this.selected.iconUrl);\r\n        return;\r\n      }\r\n      this.fileService.uploadFile(uploadImageInfos[0].file, this.directory.id).subscribe(x => {\r\n        fileId = x.id;\r\n        this.saveBlog(fileId);\r\n      })\r\n    } else this.saveBlog(\"\");\r\n  }\r\n\r\n  saveBlog(fileId?) {\r\n    let input = { ...this.selected, ...this.form.value, id: this.selected.id };\r\n    input.iconUrl = fileId;\r\n    let action: Observable<any>;\r\n    if (input.id) action = this.pageService.updateBlog(input.id, input);\r\n    else {\r\n      input.no = input.displayName;\r\n      action = this.pageService.createBlog(input);\r\n    }\r\n    action.subscribe((x) => {\r\n      this.toasterService.success('修改成功！');\r\n      this.isVisible = false;\r\n      this.list.get();\r\n    });\r\n  }\r\n\r\n  add() {\r\n    this.selected = {} as any;\r\n    this.defaultImages = []\r\n    this.openModal();\r\n  }\r\n\r\n  edit(id: string) {\r\n    this.pageService.getBlogById(id).subscribe(x => {\r\n      this.selected = x;\r\n      this.defaultImages = []\r\n      if (x.iconUrl) this.defaultImages.push(new ImageFile(x.iconUrl, x.iconUrl))\r\n      this.openModal();\r\n    })\r\n  }\r\n\r\n  buildForm() {\r\n    const data = new FormPropData(this.injector, this.selected);\r\n    this.form = null;\r\n    this.form = generateFormFromProps(data);\r\n  }\r\n\r\n  openModal() {\r\n    this.buildForm();\r\n    this.isVisible = true;\r\n  }\r\n\r\n}\r\n","import { Component, Input, OnInit } from '@angular/core';\r\n// import { group } from '@angular/animations';\r\n// import { PostTagMapDto, TagGroupDto } from '@fs-tw/cms/proxy';\r\n// import * as _ from 'lodash';\r\n// import { Observable } from 'rxjs';\r\n// import { take } from 'rxjs/operators';\r\n// import { PageService } from '../../providers/page.service';\r\n@Component({\r\n  selector: 'fs-tag',\r\n  templateUrl: './tag.component.html',\r\n  styleUrls: ['./tag.component.css']\r\n})\r\nexport class TagComponent implements OnInit {\r\n\r\n  ngOnInit() {\r\n\r\n  }\r\n\r\n  // postTagsDict: { [tagCodeId: string]: PostTagMapDto; } = {};\r\n\r\n  // @Input() postId: string;\r\n\r\n  // @Input()\r\n  // set postTags(val: PostTagMapDto[]) {    \r\n  //   for (let item of val) {\r\n  //     this.postTagsDict[item.tagCodeId] = item;\r\n  //   }\r\n\r\n  //   this.existTagCodeIds = val.map(x => x.tagCodeId);\r\n\r\n  //   this.pageService.getAllTags().pipe(take(1)).subscribe(x => {\r\n  //     this.tagGroups = x;\r\n  //     for (let group of this.tagGroups) {\r\n  //       for (let tag of group.tags) {\r\n  //         if (this.existTagCodeIds.includes(tag.id)) {\r\n  //           tag.check = true;\r\n  //           continue;\r\n  //         }\r\n  //       }\r\n  //     }\r\n  //   })\r\n  // }\r\n\r\n  // existTagCodeIds: string[] = [];\r\n  // tagGroups: any[] = []\r\n  // constructor(\r\n  //   private pageService: PageService,\r\n  // ) { }\r\n\r\n  // ngOnInit(): void {}\r\n\r\n  // checkParent(group: any) {\r\n  //   group.check = !group.check;\r\n  //   for (let item of group.tags) {\r\n  //     item.check = group.check;\r\n  //   }\r\n\r\n  // }\r\n  // checkChild(tag: any) {\r\n  //   tag.check = !tag.check;\r\n  // }\r\n\r\n\r\n  // save(postId?: string): Observable<any>[] {\r\n  //   if(!this.postId) this.postId = postId;\r\n  //   let tags: any[] = _.flatMap(this.tagGroups, \"tags\").filter(x => x.check);\r\n  //   let deleteTargetIds: string[] = _.xorWith(this.existTagCodeIds, tags.map(x => x.id));\r\n  //   let action: Observable<any>[] = [];\r\n  //   for (let tagCodeId of deleteTargetIds) {\r\n  //     if (this.postTagsDict[tagCodeId]) {\r\n  //       action.push(this.pageService.deletePostTagMap(this.postTagsDict[tagCodeId].id));\r\n  //     } else {\r\n  //       action.push(this.pageService.createPostTagMap(this.postId, tagCodeId));\r\n  //     }\r\n  //   }\r\n  //   return action;\r\n  // }\r\n}\r\n","import { NgModule, ModuleWithProviders, NgModuleFactory } from '@angular/core';\r\nimport { CommonModule, registerLocaleData } from '@angular/common';\r\nimport { CoreModule, LazyModuleFactory } from '@abp/ng.core';\r\nimport { FormsModule } from '@angular/forms';\r\nimport { ReactiveFormsModule } from '@angular/forms';\r\nimport { QuillModule } from 'ngx-quill';\r\n\r\nimport { NzGridModule } from 'ng-zorro-antd/grid';\r\nimport { NzInputModule } from 'ng-zorro-antd/input';\r\nimport { NzTableModule } from 'ng-zorro-antd/table';\r\nimport { NzDropDownModule } from 'ng-zorro-antd/dropdown';\r\nimport { NzButtonModule } from 'ng-zorro-antd/button';\r\nimport { NzIconModule } from 'ng-zorro-antd/icon';\r\nimport { NzModalModule } from 'ng-zorro-antd/modal';\r\nimport { NzRadioModule } from 'ng-zorro-antd/radio';\r\nimport { NzUploadModule } from 'ng-zorro-antd/upload';\r\nimport { NzSpinModule } from 'ng-zorro-antd/spin';\r\nimport { NzCardModule } from 'ng-zorro-antd/card';\r\nimport { NzSelectModule } from 'ng-zorro-antd/select';\r\nimport { NzDatePickerModule } from 'ng-zorro-antd/date-picker';\r\nimport { NzTabsModule } from 'ng-zorro-antd/tabs';\r\nimport { SEModule } from '@delon/abc/se';\r\n\r\nimport { PostRoutingModule } from './post-routing.module';\r\nimport { LayoutComponent } from './components/layout/layout.component';\r\nimport { MainComponent } from './components/main/main.component';\r\nimport { SharedModule } from '../shared/shared.module'\r\n\r\nimport { DetailComponent } from './components/detail/detail.component';\r\nimport { ListComponent } from './components/main/list/list.component';\r\nimport { PageService } from './providers/page.service';\r\nimport { UploadFileComponent } from './components/upload-file/upload-file.component';\r\n\r\nimport { TagComponent } from './components/tag/tag.component';\r\n\r\nimport { ImagePickerComponent } from './components/image-picker/image-picker.component';\r\n\r\nconst NzModules = [\r\n  NzGridModule,\r\n  NzInputModule,\r\n  NzTableModule,\r\n  NzDropDownModule,\r\n  NzButtonModule,\r\n  NzIconModule,\r\n  NzModalModule,\r\n  NzRadioModule,\r\n  NzUploadModule,\r\n  NzSpinModule,\r\n  NzCardModule,\r\n  NzSelectModule,\r\n  NzDatePickerModule,\r\n  NzTabsModule,\r\n  SEModule\r\n]\r\n\r\n@NgModule({\r\n  declarations: [\r\n    LayoutComponent,\r\n    MainComponent,\r\n    DetailComponent,\r\n    ListComponent,\r\n    UploadFileComponent,\r\n    TagComponent,\r\n    ImagePickerComponent\r\n  ],\r\n  imports: [\r\n    SharedModule,\r\n    CoreModule,\r\n    ReactiveFormsModule,\r\n    FormsModule,\r\n    CommonModule,\r\n    PostRoutingModule,\r\n    ...NzModules,\r\n    // NgxsModule.forFeature([PostState]),\r\n    QuillModule.forRoot()\r\n\r\n  ],\r\n  providers: [\r\n    // PostsStateService,\r\n    PageService\r\n  ]\r\n})\r\nexport class PostModule {\r\n  static forChild(): ModuleWithProviders<PostModule> {\r\n    return {\r\n      ngModule: PostModule,\r\n      providers: [],\r\n    };\r\n  }\r\n\r\n  static forLazy(): NgModuleFactory<PostModule> {\r\n    return new LazyModuleFactory(PostModule.forChild());\r\n  }\r\n  static forEarly(): NgModuleFactory<PostModule> {\r\n    return new LazyModuleFactory(PostModule.forChild());\r\n  }\r\n}","import { Injectable } from '@angular/core';\r\n\r\nimport { Subject } from 'rxjs';\r\nimport { Fs } from '@fs-tw/cms/proxy';\r\nimport { take, tap } from 'rxjs/operators';\r\n@Injectable()\r\nexport class PageService {\r\n\r\n  private allTagData = new Subject<any[]>();\r\n  private tagData = new Subject<any>();\r\n\r\n  public readonly allTagData$ = this.allTagData.asObservable();\r\n  public readonly tagData$ = this.tagData.asObservable();\r\n\r\n  getTageListFromApi() {\r\n    // this.tagsApiService.tagGroupGetList().pipe(tap(x => this.allTagData.next(x))).subscribe()\r\n  }\r\n\r\n  getTagOneFromApi(groupId: string) {\r\n    if (!groupId) {\r\n      this.tagData.next(null);\r\n      return;\r\n    };\r\n    // this.tagsApiService.tagGroupGetByIdById(groupId).pipe(tap(x => this.tagData.next(x))).subscribe();\r\n  }\r\n\r\n\r\n  constructor(\r\n    //private tagsApiService: Fs.Cms.Tags.TagsApiService\r\n  ) { }\r\n\r\n\r\n  /**call api */\r\n\r\n  // //create\r\n  // createGroup(tagGroup: TagGroupForCreateDto) {\r\n  //   return this.tagsApiService.tagGroupCreateByInput(tagGroup);\r\n  // }\r\n\r\n  // createGroupAndTags(id: string, tags: TagForCreateDto[]) {\r\n  //   return this.tagsApiService.tagGroupAddTagsByIdAndTags(id, tags);\r\n  // }\r\n\r\n  // // update\r\n  // updateGroup(id: string, newTagGroupName: string) {\r\n  //   return this.tagsApiService.tagGroupUpdateByIdAndInput(id, { tagGroupName: newTagGroupName });\r\n  // }\r\n\r\n  // updateTag(id: string, newtagName: string) {\r\n  //   return this.tagsApiService.putTagByIdAndInput(id, { name: newtagName });\r\n  // }\r\n\r\n  // // delate\r\n  // deleteGroup(groupId: string) {\r\n  //   return this.tagsApiService.tagGroupDeleteById(groupId)\r\n  // }\r\n\r\n  // delteTag(tagId: string) {\r\n  //   return this.tagsApiService.tagDeleteById(tagId);\r\n  // }\r\n}\r\n","import { Component, OnInit } from '@angular/core';\r\nimport * as _ from 'lodash';\r\nimport { PageService } from '../../providers/page.service';\r\nimport {Fs } from '@fs-tw/cms/proxy';\r\nimport { Subscription } from 'rxjs';\r\nimport { Confirmation, ConfirmationService } from '@abp/ng.theme.shared';\r\nimport { filter, switchMap, take } from 'rxjs/operators';\r\n@Component({\r\n  templateUrl: './main.component.html',\r\n  styleUrls: ['./main.component.less'],\r\n})\r\nexport class MainComponent implements OnInit {\r\n\r\n  tagGroupList: Fs.Cms.Tags.Dtos.TagDto[] = [];\r\n  subscription: Subscription;\r\n  constructor(private PageService: PageService,\r\n    private confirmation: ConfirmationService,) { }\r\n\r\n  ngOnInit() {\r\n    this.subscription = this.PageService.allTagData$.subscribe(result => {\r\n      this.tagGroupList = result;\r\n    })\r\n  }\r\n\r\n  deleteGroup(id: string) {\r\n    // this.confirmation\r\n    //   .warn(`確認要刪除嗎？`, '系統訊息')\r\n    //   .pipe(\r\n    //     filter(res => res === Confirmation.Status.confirm),\r\n    //     switchMap(() => this.PageService.deleteGroup(id)),\r\n    //     take(1)\r\n    //   )\r\n    //   .subscribe(() => {\r\n    //     this.PageService.getTageListFromApi();\r\n    //   });\r\n  }\r\n  \r\n  ngOnDestroy() {\r\n    if (this.subscription) {\r\n      this.subscription.unsubscribe();\r\n    }\r\n  }\r\n}\r\n","import { Component, OnInit } from '@angular/core';\r\n\r\n@Component({\r\n  templateUrl: './layout.component.html',\r\n  styleUrls: ['./layout.component.scss']\r\n})\r\nexport class LayoutComponent implements OnInit {\r\n\r\n  constructor() { }\r\n\r\n  ngOnInit(): void {\r\n  }\r\n\r\n}\r\n","import { Component, Input, OnInit } from '@angular/core';\r\nimport { ActivatedRoute, } from '@angular/router';\r\nimport * as _ from 'lodash';\r\nimport { Location } from '@angular/common'\r\nimport { forkJoin, Subscription } from 'rxjs';\r\nimport { PageService } from '../../providers/page.service';\r\nimport { Fs } from '@fs-tw/cms/proxy';\r\nimport { Confirmation, ConfirmationService, ToasterService } from '@abp/ng.theme.shared';\r\nimport { tap } from 'rxjs/operators';\r\n@Component({\r\n  selector: 'fs-tag-detail',\r\n  templateUrl: './tag-detail.component.html',\r\n  styleUrls: ['./tag-detail.component.less'],\r\n})\r\nexport class TagDetailComponent implements OnInit {\r\n\r\n  @Input() isCreate: boolean = false;\r\n  subscription: Subscription;\r\n\r\n  deleteTargetTagIds: string[] = []\r\n\r\n  data: Fs.Cms.Tags.Dtos.TagDto = {\r\n   \r\n   \r\n  } as any;\r\n\r\n  constructor(\r\n    private pageService: PageService,\r\n    private location: Location,\r\n    private toasterService: ToasterService,\r\n  ) { }\r\n\r\n\r\n  inputList:  Fs.Cms.Tags.Dtos.TagCreateDto[] = [\r\n    // { name: '' }\r\n  ];\r\n\r\n  ngOnDestroy() {\r\n    if (this.subscription) {\r\n      this.subscription.unsubscribe();\r\n    }\r\n  }\r\n\r\n\r\n  ngOnInit(): void {\r\n    this.subscription = this.pageService.tagData$.subscribe(x => {\r\n      this.data = x;\r\n    })\r\n  }\r\n\r\n\r\n  addOption() {\r\n    this.inputList.push();\r\n  }\r\n\r\n  removeOption(index: number) {\r\n    this.inputList.splice(index, 1);\r\n  }\r\n\r\n  removeOldOption(id: string) {\r\n    // this.data.tags = this.data.tags.filter(x => x.id != id);\r\n    this.deleteTargetTagIds.push(id);\r\n  }\r\n\r\n  save() {\r\n    // if (this.inputList.filter(x => x.name == '').length > 0 && this.data.tagGroupName != '') {\r\n    //   this.toasterService.error(\"不能有空值！\")\r\n    //   return;\r\n    // }\r\n    // if (this.isCreate) this.create()\r\n    // else this.update();\r\n  }\r\n\r\n  update() {\r\n    // this.pageService.updateGroup(this.data.id, this.data.tagGroupName).subscribe(x => {\r\n    //   let createTarget = this.pageService.createGroupAndTags(this.data.id, this.inputList);\r\n    //   let target = this.updateTags().concat(this.deleteTags());\r\n    //   target.push(createTarget)\r\n    //   forkJoin(target).subscribe(()=>{\r\n    //     this.location.back();\r\n    //     this.toasterService.success(\"修改成功！\")\r\n    //   })\r\n      \r\n    // })\r\n  }\r\n\r\n\r\n  updateTags() {\r\n    // let obsList = this.data.tags.map(x => {\r\n    //   return this.pageService.updateTag(x.id, x.name)\r\n    // });\r\n    // return obsList\r\n    // forkJoin(obsList).subscribe();\r\n  }\r\n\r\n  deleteTags() {\r\n    // let obsList = this.deleteTargetTagIds.map(x => {\r\n    //   return this.pageService.delteTag(x);\r\n    // })\r\n    // return obsList;\r\n    // forkJoin(obsList).subscribe()\r\n  }\r\n\r\n  create() {\r\n    // this.pageService.createGroup({\r\n    //   tagGroupName: this.data.tagGroupName\r\n    // }).pipe(tap(x => this.createTags(x.id))).subscribe()\r\n  }\r\n\r\n  createTags(groupId: string) {\r\n    // this.pageService.createGroupAndTags(groupId, this.inputList).subscribe(() => {\r\n    //   this.pageService.getTageListFromApi();\r\n    //   this.toasterService.success(\"新增成功！\");\r\n    //   this.clear();\r\n    // })\r\n  }\r\n\r\n  clear() {\r\n    // this.inputList = [\r\n    //   { name: '' }\r\n    // ];\r\n    // this.deleteTargetTagIds = [];\r\n    // this.data = {\r\n    //   id: '',\r\n    //   tagGroupName: '',\r\n    //   tags: [\r\n    //     {\r\n    //       id: '',\r\n    //       name: ''\r\n    //     }\r\n    //   ]\r\n    // };\r\n  }\r\n}\r\n","import { Injectable, NgModule } from '@angular/core';\r\nimport { Routes, RouterModule, Resolve, ActivatedRoute, ActivatedRouteSnapshot } from '@angular/router';\r\nimport { MainComponent } from './components/main/main.component';\r\nimport { LayoutComponent } from './components/layout/layout.component';\r\nimport { TagDetailComponent } from './components/tag-detail/tag-detail.component';\r\nimport { PageService } from './providers/page.service';\r\n\r\n@Injectable()\r\nexport class RouteConfig implements Resolve<any> {\r\n  constructor(private pageService: PageService) { }\r\n\r\n  resolve() {\r\n    this.pageService.getTageListFromApi();\r\n  }\r\n}\r\n\r\n@Injectable()\r\nexport class DetailRouteConfig implements Resolve<any> {\r\n  constructor(private pageService: PageService) { }\r\n\r\n  resolve(route: ActivatedRouteSnapshot) {\r\n    let tagId = route.params.tagId;\r\n    if (tagId) this.pageService.getTagOneFromApi(tagId);\r\n  }\r\n}\r\n\r\n\r\nconst routes: Routes = [\r\n  {\r\n    path: '',\r\n    component: LayoutComponent,\r\n    children: [\r\n      {\r\n        path: '',\r\n        component: MainComponent,\r\n        resolve: { RouteConfig: RouteConfig },\r\n      },\r\n      {\r\n        path: ':tagId',\r\n        component: TagDetailComponent,\r\n        resolve: { DetailRouteConfig: DetailRouteConfig }\r\n      }\r\n    ],\r\n  }\r\n];\r\n\r\n@NgModule({\r\n  imports: [RouterModule.forChild(routes)],\r\n  exports: [RouterModule],\r\n  providers: [\r\n    RouteConfig,\r\n    DetailRouteConfig\r\n  ]\r\n})\r\nexport class TagManagementRoutingModule { }\r\n","import { NgModule, ModuleWithProviders, NgModuleFactory } from '@angular/core';\r\n\r\nimport { TagManagementRoutingModule } from './tag-management-routing.module';\r\nimport { MainComponent } from './components/main/main.component';\r\nimport { LayoutComponent } from './components/layout/layout.component';\r\nimport { LazyModuleFactory } from '@abp/ng.core';\r\nimport { SharedModule } from '../shared/shared.module';\r\nimport { TagDetailComponent } from './components/tag-detail/tag-detail.component';\r\nimport { NgxsModule } from '@ngxs/store';\r\nimport { PageService } from './providers/page.service';\r\nimport { NzTagModule } from 'ng-zorro-antd/tag';\r\n\r\n@NgModule({\r\n  declarations: [MainComponent, LayoutComponent, TagDetailComponent],\r\n  imports: [\r\n    SharedModule,\r\n    NzTagModule,\r\n    TagManagementRoutingModule\r\n  ],\r\n  providers: [PageService]\r\n})\r\nexport class TagManagementModule {\r\n  static forChild(): ModuleWithProviders<TagManagementModule> {\r\n    return {\r\n      ngModule: TagManagementModule,\r\n      providers: [],\r\n    };\r\n  }\r\n\r\n  static forLazy(): NgModuleFactory<TagManagementModule> {\r\n    return new LazyModuleFactory(TagManagementModule.forChild());\r\n  }\r\n  static forEarly(): NgModuleFactory<TagManagementModule> {\r\n    return new LazyModuleFactory(TagManagementModule.forChild());\r\n  }\r\n}\r\n","import { NgModule } from '@angular/core';\r\nimport { Routes, RouterModule } from '@angular/router';\r\nimport { AuthGuard, PermissionGuard } from '@abp/ng.core';\r\nimport { PostModule } from './post/post.module';\r\nimport { TagManagementModule } from './tag-management/tag-management.module'\r\nconst routes: Routes = [\r\n  { path: '', pathMatch: 'full', redirectTo: 'post' },\r\n  {\r\n    path: '',\r\n    canActivate: [AuthGuard, PermissionGuard],\r\n    children: [\r\n      {\r\n        path: 'post',\r\n        loadChildren: PostModule.forEarly\r\n      },\r\n      {\r\n        path: 'tag',\r\n        loadChildren: TagManagementModule.forEarly\r\n      },\r\n      // {\r\n      //   path: 'storage',\r\n      //   loadChildren: StorageModule.forEarly\r\n      // }\r\n    ],\r\n  }\r\n];\r\n\r\n@NgModule({\r\n   imports: [RouterModule.forChild(routes)],\r\n  exports: [RouterModule],\r\n})\r\nexport class CmsAdminRoutingModule { }\r\n","import { NgModule, ModuleWithProviders, NgModuleFactory } from '@angular/core';\r\nimport { LazyModuleFactory, CoreModule } from '@abp/ng.core';\r\nimport { CmsAdminRoutingModule } from './cms-admin-routing.module';\r\nimport { SharedModule } from './shared/shared.module';\r\n\r\n@NgModule({\r\n  imports: [\r\n    SharedModule,\r\n    CoreModule,\r\n    CmsAdminRoutingModule,\r\n  ],\r\n  exports: [\r\n    SharedModule,\r\n  ],\r\n})\r\nexport class CmsAdminModule {\r\n  static forChild(): ModuleWithProviders<CmsAdminModule> {\r\n    return {\r\n      ngModule: CmsAdminModule,\r\n      providers: [],\r\n    };\r\n  }\r\n\r\n  static forLazy(): NgModuleFactory<CmsAdminModule> {\r\n    return new LazyModuleFactory(CmsAdminModule.forChild());\r\n  }\r\n\r\n}\r\n","/**\n * Generated bundle index. Do not edit.\n */\n\nexport * from './index';\n\nexport {CmsAdminRoutingModule as ɵa} from './lib/cms-admin-routing.module';\nexport {DetailComponent as ɵg} from './lib/post/components/detail/detail.component';\nexport {ImagePickerComponent as ɵl} from './lib/post/components/image-picker/image-picker.component';\nexport {LayoutComponent as ɵc} from './lib/post/components/layout/layout.component';\nexport {ListComponent as ɵi} from './lib/post/components/main/list/list.component';\nexport {MainComponent as ɵd} from './lib/post/components/main/main.component';\nexport {TagComponent as ɵk} from './lib/post/components/tag/tag.component';\nexport {UploadFileComponent as ɵj} from './lib/post/components/upload-file/upload-file.component';\nexport {PostRoutingModule as ɵn,RouteConfig as ɵm} from './lib/post/post-routing.module';\nexport {PostModule as ɵb} from './lib/post/post.module';\nexport {PageService as ɵe} from './lib/post/providers/page.service';\nexport {PostStateService as ɵf} from './lib/post/providers/post-state.service';\nexport {FileService as ɵh} from './lib/shared';\nexport {LayoutComponent as ɵr} from './lib/tag-management/components/layout/layout.component';\nexport {MainComponent as ɵp} from './lib/tag-management/components/main/main.component';\nexport {TagDetailComponent as ɵs} from './lib/tag-management/components/tag-detail/tag-detail.component';\nexport {PageService as ɵq} from './lib/tag-management/providers/page.service';\nexport {DetailRouteConfig as ɵu,RouteConfig as ɵt,TagManagementRoutingModule as ɵv} from './lib/tag-management/tag-management-routing.module';\nexport {TagManagementModule as ɵo} from './lib/tag-management/tag-management.module';"],"names":["InternalStore","Injectable","Component","Fs","Volo","Injector","Confirmation","forkJoin","ListService","EXTENSIONS_IDENTIFIER","ExtensionsService","Router","ToasterService","ConfirmationService","PageService","ActivatedRoute","Pipe","EnvironmentService","NgModule","ThemeAlainMsSharedModule","UiExtensionsModule","RestService","Input","_.cloneDeep","of","dns.format","map","ViewChild","routes","LayoutComponent","RouteConfig","MainComponent","RouterModule","FormPropData","generateFormFromProps","NzGridModule","NzInputModule","NzTableModule","NzDropDownModule","NzButtonModule","NzIconModule","NzModalModule","NzRadioModule","NzUploadModule","NzSpinModule","NzCardModule","NzSelectModule","NzDatePickerModule","NzTabsModule","SEModule","LazyModuleFactory","CoreModule","ReactiveFormsModule","FormsModule","CommonModule","QuillModule","Subject","Location","NzTagModule","AuthGuard","PermissionGuard"],"mappings":"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"}