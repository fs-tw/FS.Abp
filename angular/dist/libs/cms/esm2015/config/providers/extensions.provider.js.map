{"version":3,"file":"extensions.provider.js","sourceRoot":"","sources":["../../../../../../libs/cms/config/src/providers/extensions.provider.ts"],"names":[],"mappings":"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","sourcesContent":["import { ConfigStateService } from '@abp/ng.core';\r\nimport {\r\n  ExtensionsService,\r\n  getObjectExtensionEntitiesFromStore,\r\n  mapEntitiesToContributors,\r\n  mergeWithDefaultActions,\r\n  mergeWithDefaultProps,\r\n} from '@abp/ng.theme.shared/extensions';\r\nimport { APP_INITIALIZER, Injector } from '@angular/core';\r\nimport { eCmsRouteNames } from '../enums/route-names';\r\nimport { map, mapTo, tap } from 'rxjs/operators';\r\n\r\nimport { DEFAULT_BLOG_CREATE_FORM_PROPS } from '../default/blog/default-blog-create-form-props';\r\nimport { DEFAULT_BLOG_EDIT_FORM_PROPS } from '../default/blog/default-blog-edit-form-props';\r\nimport { DEFAULT_BLOG_ENTITY_PROPS } from '../default/blog/default-blog-entity-props';\r\nimport { DEFAULT_BLOG_ENTITY_ACTIONS } from '../default/blog/default-blog-entity-actions';\r\nimport { DEFAULT_BLOG_TOOLBAR_ACTIONS } from '../default/blog/default-blog-toolbar-actions';\r\n\r\nimport { DEFAULT_POST_CREATE_FORM_PROPS } from '../default/post/default-post-create-form-props';\r\nimport { DEFAULT_POST_EDIT_FORM_PROPS } from '../default/post/default-post-edit-form-props';\r\nimport { DEFAULT_POST_ENTITY_PROPS } from '../default/post/default-post-entity-props';\r\nimport { DEFAULT_POST_ENTITY_ACTIONS } from '../default/post/default-post-entity-actions';\r\nimport { DEFAULT_POST_TOOLBAR_ACTIONS } from '../default/post/default-post-toolbar-actions';\r\n\r\nimport { DEFAULT_TAG_CREATE_FORM_PROPS } from '../default/tag/default-tag-create-form-props';\r\nimport { DEFAULT_TAG_EDIT_FORM_PROPS } from '../default/tag/default-tag-edit-form-props';\r\nimport { DEFAULT_TAG_ENTITY_PROPS } from '../default/tag/default-tag-entity-props';\r\nimport { DEFAULT_TAG_ENTITY_ACTIONS } from '../default/tag/default-tag-entity-actions';\r\nimport { DEFAULT_TAG_TOOLBAR_ACTIONS } from '../default/tag/default-tag-toolbar-actions';\r\n\r\n\r\nexport const EXTENSIONS_PROVIDERS = [\r\n  {\r\n    provide: APP_INITIALIZER,\r\n    useFactory: configure,\r\n    deps: [Injector],\r\n    multi: true,\r\n  },\r\n];\r\n\r\nfunction configure(injector: Injector) {\r\n  return () => {\r\n    const extensions: ExtensionsService = injector.get(ExtensionsService);\r\n    const configState = injector.get(ConfigStateService);\r\n\r\n    return getObjectExtensionEntitiesFromStore(configState, 'Cms')\r\n      .pipe(\r\n        map((entities) => ({})),\r\n        mapEntitiesToContributors(configState, 'Cms'),\r\n        tap((objectExtensionContributors) => {\r\n          mergeWithDefaultActions(extensions.toolbarActions, {\r\n            [eCmsRouteNames.Blog]: DEFAULT_BLOG_TOOLBAR_ACTIONS,\r\n            [eCmsRouteNames.Post]: DEFAULT_POST_TOOLBAR_ACTIONS,\r\n            [eCmsRouteNames.Tag]: DEFAULT_TAG_TOOLBAR_ACTIONS,\r\n          });\r\n\r\n          mergeWithDefaultActions(extensions.entityActions, {\r\n            [eCmsRouteNames.Blog]: DEFAULT_BLOG_ENTITY_ACTIONS,\r\n            [eCmsRouteNames.Post]: DEFAULT_POST_ENTITY_ACTIONS,\r\n            [eCmsRouteNames.Tag]: DEFAULT_TAG_ENTITY_ACTIONS,\r\n           \r\n          });\r\n\r\n          mergeWithDefaultProps(extensions.entityProps, {\r\n            [eCmsRouteNames.Blog]: DEFAULT_BLOG_ENTITY_PROPS,\r\n            [eCmsRouteNames.Post]: DEFAULT_POST_ENTITY_PROPS,\r\n            [eCmsRouteNames.Tag]: DEFAULT_TAG_ENTITY_PROPS,\r\n          });\r\n\r\n          mergeWithDefaultProps(extensions.createFormProps, {\r\n            [eCmsRouteNames.Blog]: DEFAULT_BLOG_CREATE_FORM_PROPS,\r\n            [eCmsRouteNames.Post]: DEFAULT_POST_CREATE_FORM_PROPS,\r\n            [eCmsRouteNames.Tag]: DEFAULT_TAG_CREATE_FORM_PROPS,\r\n          });\r\n\r\n          mergeWithDefaultProps(extensions.editFormProps, {\r\n            [eCmsRouteNames.Blog]: DEFAULT_BLOG_EDIT_FORM_PROPS,\r\n            [eCmsRouteNames.Post]: DEFAULT_POST_EDIT_FORM_PROPS,\r\n            [eCmsRouteNames.Tag]: DEFAULT_TAG_EDIT_FORM_PROPS,\r\n          });\r\n        }),\r\n        mapTo(true)\r\n      )\r\n      .toPromise();\r\n  };\r\n}\r\n"]}