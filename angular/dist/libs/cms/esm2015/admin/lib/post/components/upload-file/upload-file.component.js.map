{"version":3,"file":"upload-file.component.js","sourceRoot":"","sources":["../../../../../../../../../libs/cms/admin/src/lib/post/components/upload-file/upload-file.component.ts"],"names":[],"mappings":"AAAA,OAAO,EAAE,SAAS,EAAE,KAAK,EAAU,MAAM,eAAe,CAAC;AAEzD,OAAO,EAAE,YAAY,EAAE,mBAAmB,EAAkB,MAAM,sBAAsB,CAAC;AAEzF,2FAA2F;AAC3F,uCAAuC;AACvC,oDAAoD;AACpD,mDAAmD;AAOnD,MAAM,OAAO,mBAAmB;IAO9B,YACU,mBAAwC;QAAxC,wBAAmB,GAAnB,mBAAmB,CAAqB;QALlD,kBAAa,GAAa,EAAE,CAAC;QAE7B,aAAQ,GAAmB,EAAE,CAAC;QAY9B,iBAAY,GAAG,CAAC,IAAkB,EAAW,EAAE;YAC7C,IAAI,KAAK,GAAG,IAAI,CAAC,aAAa,CAAC,SAAS,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,IAAI,IAAI,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC;gBAChE,IAAI,CAAC,QAAQ,CAAC,SAAS,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,IAAI,IAAI,IAAI,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC,CAAC;YACzD,IAAI,KAAK;gBAAE,OAAO,KAAK,CAAC;YACxB,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC,QAAQ,CAAC,MAAM,CAAC,IAAI,CAAC,CAAC;YAC3C,OAAO,KAAK,CAAC;QACf,CAAC,CAAC;IAZF,CAAC;IAED,QAAQ;IAER,CAAC;IAUD,MAAM,CAAC,GAAG;QACR,IAAI,CAAC,mBAAmB;aACvB,IAAI,CAAC,QAAQ,EAAE,MAAM,CAAC;aACtB,SAAS,CAAC,CAAC,MAA2B,EAAE,EAAE;YACzC,IAAI,MAAM,KAAK,YAAY,CAAC,MAAM,CAAC,OAAO,EAAE;gBAC1C,IAAI,CAAC,aAAa,GAAG,IAAI,CAAC,aAAa,CAAC,MAAM,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,IAAI,GAAG,CAAC,CAAC;aAC/D;QACH,CAAC,CAAC,CAAC;IACL,CAAC;;;YAtCF,SAAS,SAAC;gBACT,QAAQ,EAAE,gBAAgB;gBAC1B,k9BAA2C;;aAE5C;;;YAXsB,mBAAmB;;;4BAcvC,KAAK","sourcesContent":["import { Component, Input, OnInit } from '@angular/core';\r\nimport { NzUploadFile } from 'ng-zorro-antd/upload';\r\nimport { Confirmation, ConfirmationService, ToasterService } from '@abp/ng.theme.shared';\r\n\r\n// import { Confirmation, ConfirmationService,ToasterService } from '@abp/ng.theme.shared';\r\n// import { Store } from '@ngxs/store';\r\n// import { NzModalRef } from 'ng-zorro-antd/modal';\r\n// import { FileService } from '@fs-tw/theme-core';\r\n\r\n@Component({\r\n  selector: 'fs-upload-file',\r\n  templateUrl: './upload-file.component.html',\r\n  styleUrls: ['./upload-file.component.css']\r\n})\r\nexport class UploadFileComponent implements OnInit {\r\n\r\n  @Input()\r\n  existFileUrls: string[] = [];\r\n\r\n  fileList: NzUploadFile[] = [];\r\n\r\n  constructor(\r\n    private confirmationService: ConfirmationService\r\n  ) {\r\n\r\n  }\r\n\r\n  ngOnInit() {\r\n\r\n  }\r\n\r\n  beforeUpload = (file: NzUploadFile): boolean => {\r\n    let exist = this.existFileUrls.findIndex(x => x == file.name) > -1 ||\r\n      this.fileList.findIndex(x => x.name == file.name) > -1;\r\n    if (exist) return false;\r\n    this.fileList = this.fileList.concat(file);\r\n    return false;\r\n  };\r\n\r\n  delete(url) {\r\n    this.confirmationService\r\n    .warn('確認刪除嗎？', '系統訊息')\r\n    .subscribe((status: Confirmation.Status) => {\r\n      if (status === Confirmation.Status.confirm) {\r\n        this.existFileUrls = this.existFileUrls.filter(x => x != url);\r\n      }\r\n    });\r\n  }\r\n\r\n  // fileUrl: string[] = [];\r\n  // tplModal: NzModalRef;\r\n  // loading: boolean = false;\r\n  // fileList: NzUploadFile[] = [];\r\n  // constructor(\r\n  //   private toasterService: ToasterService,\r\n  //   private confirmationService: ConfirmationService,\r\n  //   private fileService: FileService,\r\n  //   private store: Store,\r\n  // ) { }\r\n\r\n  // ngOnInit(): void {\r\n  // }\r\n\r\n  // getUrl(x: string) {    \r\n  //   if (x.includes('http')) {\r\n  //     return x;\r\n  //   } else {\r\n  //     return this.fileService.getFileByName(x);\r\n  //   }\r\n  // }\r\n\r\n  // getFileName(x: string) {\r\n  //   let splitStr = x.split(\"\\\\\");\r\n  //   return splitStr[splitStr.length - 1];\r\n  // }\r\n  \r\n\r\n  // save(): string[] {\r\n  //   this.loading = true;\r\n  //   const randomName = Array(32).fill(null).map(() => (Math.round(Math.random() * 16)).toString(16)).join('');\r\n  //   const formData = new FormData();\r\n  //   let urlList: string[] = this.existFileUrls;\r\n  //   this.fileList.forEach((file: any) => {\r\n  //     let url = `cms\\\\posts\\\\${randomName}\\\\${file.name}`;\r\n  //     urlList.push(url);\r\n  //     formData.append('files[]', file, url);\r\n  //   });    \r\n  //   this.fileService.uploadFileByFormData(formData).subscribe(() => {\r\n  //   }, (error) => {\r\n  //     this.loading = false;\r\n  //     this.toasterService.error(\"上傳失敗\");\r\n  //   });\r\n  //   return urlList;\r\n  // }\r\n}\r\n"]}