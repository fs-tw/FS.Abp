{"version":3,"file":"list.component.js","sourceRoot":"","sources":["../../../../../../../../../../libs/cms/admin/src/lib/post/components/main/list/list.component.ts","../../../../../../../../../../libs/cms/admin/src/lib/post/components/main/list/list.component.html"],"names":[],"mappings":"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","sourcesContent":["import { Component, OnInit } from '@angular/core';\r\n\r\nimport { Fs } from '@fs-tw/cms/proxy';\r\nimport { PageService } from '../../../providers/page.service';\r\nimport { PostStateService } from '../../../providers/post-state.service';\r\n\r\n// import { BlogDto } from '@fs-tw/cms/proxy';\r\n// import { CodesDto, CodingWithSettingTreeModel } from '@fs-tw/theme-core';\r\n// import { Confirmation, ConfirmationService, ToasterService } from '@abp/ng.theme.shared';\r\n// import { Select } from '@ngxs/store';\r\n// import { Observable, Subscription } from 'rxjs';\r\n// import { PageService } from '../../../providers/page.service';\r\n// import { PostState } from '../../../providers/post/post.state';\r\n// import { PostsStateService } from '../../../providers/post/poststate.service';\r\n\r\n@Component({\r\n  selector: 'fs-list',\r\n  templateUrl: './list.component.html',\r\n  styleUrls: ['./list.component.css']\r\n})\r\nexport class ListComponent implements OnInit {\r\n  // @Select(PostState.getPostsTotalCount)\r\n  // totalCount$: Observable<number>;\r\n\r\n  // blogDatas: BlogDto[] = [];\r\n\r\n  // news: CodingWithSettingTreeModel;\r\n  // subscription: Subscription;\r\n  // parentCode: CodesDto;\r\n  \r\n  blogDatas: Fs.Cms.Blogs.Dtos.BlogWithDetailsDto[] = [];\r\n  selectBlogCodeId = \"\";\r\n\r\n  loading: boolean = false;\r\n\r\n  constructor(\r\n    private pageService: PageService,\r\n    private postStateService: PostStateService\r\n  ) {\r\n    \r\n  }\r\n\r\n\r\n  ngOnInit() { \r\n    this.reload();\r\n  }\r\n\r\n  reload() {\r\n    let input: Fs.Cms.Blogs.Dtos.BlogGetListDto = {\r\n      skipCount: 0,\r\n      maxResultCount: 999,\r\n      sorting: 'sequence'\r\n    } as Fs.Cms.Blogs.Dtos.BlogGetListDto;\r\n\r\n    this.loading = true;\r\n    this.pageService.getBlogs(input).subscribe((x) => {\r\n      this.blogDatas = x.items;\r\n      this.loading = false;\r\n    }, (error) => {\r\n      this.loading = false;\r\n    })\r\n  }\r\n\r\n  showDetail(blog: Fs.Cms.Blogs.Dtos.BlogWithDetailsDto) {\r\n    if (blog == null) {\r\n      this.selectBlogCodeId = null;\r\n      return;\r\n    }\r\n\r\n    this.selectBlogCodeId = blog.id;\r\n    this.postStateService.setBlog(blog);\r\n  }\r\n\r\n  deleteBlog(blog: Fs.Cms.Blogs.Dtos.BlogWithDetailsDto) {\r\n\r\n  }\r\n\r\n  // showDetail(blog: BlogDto) {\r\n  //   if (blog == null) {\r\n  //     this.selectBlogCodeId = null;\r\n  //     this.router.navigate([\"/cms/post\"], { queryParams: { blog: 'all', name: '全部' } })\r\n  //   }\r\n  //   else {\r\n  //     this.selectBlogCodeId = blog.codesId;\r\n  //     this.router.navigate([\"/cms/post\"], { queryParams: { blog: blog.codesId, name: blog.displayName } })\r\n  //   }\r\n  // }\r\n\r\n  // deleteBlog(data: BlogDto) {\r\n  //   let mes = `(注意：${data.displayName}下的所有文章將移至不分類。)`;\r\n\r\n  //   this.confirmationService.warn(\r\n  //     `確認要刪除${data.displayName}嗎？${mes}`,\r\n  //     '系統訊息', {\r\n  //     cancelText: \"關閉\",\r\n  //     yesText: \"確定\"\r\n  //   }).subscribe((status: Confirmation.Status) => {\r\n  //     if (status === Confirmation.Status.confirm) {\r\n  //       this.pageService.deleteBlog(data.codesId).subscribe(x => {\r\n  //         this.toasterService.success(\"刪除成功！\");\r\n  //         this.reload();\r\n  //       })\r\n  //     }\r\n  //   });\r\n\r\n  // }\r\n\r\n}\r\n","<div>\r\n  <div class=\"mb-md\">\r\n    <fs-create (onSave)=\"reload()\" style=\"margin-right: 10px;\"></fs-create>\r\n    <button nz-button [nzType]=\"'primary'\" (click)=\"showDetail(null)\">\r\n      全部\r\n    </button>\r\n  </div>\r\n  <nz-table #basicTable [nzData]=\"blogDatas\" nzSize=\"small\" nzBordered [nzLoading]=\"loading\">\r\n    <thead>\r\n      <tr>\r\n        <th nzWidth=\"75px\"></th>\r\n        <th>名稱</th>\r\n        <th>狀態</th>\r\n      </tr>\r\n    </thead>\r\n    <tbody>\r\n      <tr\r\n        *ngFor=\"let data of basicTable.data\"\r\n        style=\"cursor: pointer;\"\r\n        class=\"bg-white listColor\"\r\n        [ngClass]=\"{ listSelected: data.id == selectBlogCodeId }\"\r\n      >\r\n        <td nzWidth=\"75px\" nzAlign=\"center\">\r\n          <a nz-dropdown [nzDropdownMenu]=\"menu\">\r\n            {{ 'AbpIdentity::Actions' | abpLocalization }}\r\n            <i nz-icon nzType=\"down\"></i>\r\n          </a>\r\n          <nz-dropdown-menu #menu=\"nzDropdownMenu\">\r\n            <ul nz-menu>\r\n              <li nz-menu-item>\r\n                <fs-create (onSave)=\"reload()\" [blogId]=\"data.id\"></fs-create>\r\n              </li>\r\n              <li nz-menu-item *ngIf=\"data.no != 'CmsBlogNotClassified'\">\r\n                <a (click)=\"deleteBlog(data)\" class=\"text-red\">刪除</a>\r\n              </li>\r\n            </ul>\r\n          </nz-dropdown-menu>\r\n        </td>\r\n        <td (click)=\"showDetail(data)\">{{ data.displayName }}</td>\r\n        <td (click)=\"showDetail(data)\">\r\n          {{ data.disable ? '關閉' : '啟用' }}\r\n        </td>\r\n      </tr>\r\n    </tbody>\r\n  </nz-table>\r\n</div>\r\n"]}