{"version":3,"file":"extensions.provider.js","sourceRoot":"","sources":["../../../../../../libs/theme/config/src/providers/extensions.provider.ts"],"names":[],"mappings":"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","sourcesContent":["import { ConfigStateService } from '@abp/ng.core';\r\nimport {\r\n  ExtensionsService,\r\n  getObjectExtensionEntitiesFromStore,\r\n  mapEntitiesToContributors,\r\n  mergeWithDefaultActions,\r\n  mergeWithDefaultProps,\r\n} from '@abp/ng.theme.shared/extensions';\r\nimport { APP_INITIALIZER, Injector } from '@angular/core';\r\nimport { eThemeRouteNames } from '../enums/route-names';\r\nimport { map, mapTo, tap } from 'rxjs/operators';\r\n\r\nimport { DEFAULT_BANNER_CREATE_FORM_PROPS } from '../default/banner/default-banner-create-form-props';\r\nimport { DEFAULT_BANNER_EDIT_FORM_PROPS } from '../default/banner/default-banner-edit-form-props';\r\nimport { DEFAULT_BANNER_ENTITY_PROPS } from '../default/banner/default-banner-entity-props';\r\nimport { DEFAULT_BANNER_ENTITY_ACTIONS } from '../default/banner/default-banner-entity-actions';\r\nimport { DEFAULT_BANNER_TOOLBAR_ACTIONS } from '../default/banner/default-banner-toolbar-actions';\r\n\r\nimport { DEFAULT_BANNERDEFINITION_CREATE_FORM_PROPS } from '../default/bannerdefinition/default-bannerdefinition-create-form-props';\r\nimport { DEFAULT_BANNERDEFINITION_EDIT_FORM_PROPS } from '../default/bannerdefinition/default-bannerdefinition-edit-form-props';\r\nimport { DEFAULT_BANNERDEFINITION_ENTITY_PROPS } from '../default/bannerdefinition/default-bannerdefinition-entity-props';\r\nimport { DEFAULT_BANNERDEFINITION_ENTITY_ACTIONS } from '../default/bannerdefinition/default-bannerdefinition-entity-actions';\r\nimport { DEFAULT_BANNERDEFINITION_TOOLBAR_ACTIONS } from '../default/bannerdefinition/default-bannerdefinition-toolbar-actions';\r\n\r\nimport { DEFAULT_ROUTE_CREATE_FORM_PROPS } from '../default/route/default-route-create-form-props';\r\nimport { DEFAULT_ROUTE_EDIT_FORM_PROPS } from '../default/route/default-route-edit-form-props';\r\nimport { DEFAULT_ROUTE_ENTITY_PROPS } from '../default/route/default-route-entity-props';\r\nimport { DEFAULT_ROUTE_ENTITY_ACTIONS } from '../default/route/default-route-entity-actions';\r\nimport { DEFAULT_ROUTE_TOOLBAR_ACTIONS } from '../default/route/default-route-toolbar-actions';\r\n\r\nimport { DEFAULT_ROUTEDEFINITION_CREATE_FORM_PROPS } from '../default/routedefinition/default-routedefinition-create-form-props';\r\nimport { DEFAULT_ROUTEDEFINITION_EDIT_FORM_PROPS } from '../default/routedefinition/default-routedefinition-edit-form-props';\r\nimport { DEFAULT_ROUTEDEFINITION_ENTITY_PROPS } from '../default/routedefinition/default-routedefinition-entity-props';\r\nimport { DEFAULT_ROUTEDEFINITION_ENTITY_ACTIONS } from '../default/routedefinition/default-routedefinition-entity-actions';\r\nimport { DEFAULT_ROUTEDEFINITION_TOOLBAR_ACTIONS } from '../default/routedefinition/default-routedefinition-toolbar-actions';\r\n\r\nimport { DEFAULT_WEBSITEDEFINITION_CREATE_FORM_PROPS } from '../default/websitedefinition/default-websitedefinition-create-form-props';\r\nimport { DEFAULT_WEBSITEDEFINITION_EDIT_FORM_PROPS } from '../default/websitedefinition/default-websitedefinition-edit-form-props';\r\nimport { DEFAULT_WEBSITEDEFINITION_ENTITY_PROPS } from '../default/websitedefinition/default-websitedefinition-entity-props';\r\nimport { DEFAULT_WEBSITEDEFINITION_ENTITY_ACTIONS } from '../default/websitedefinition/default-websitedefinition-entity-actions';\r\nimport { DEFAULT_WEBSITEDEFINITION_TOOLBAR_ACTIONS } from '../default/websitedefinition/default-websitedefinition-toolbar-actions';\r\n\r\n\r\nexport const EXTENSIONS_PROVIDERS = [\r\n  {\r\n    provide: APP_INITIALIZER,\r\n    useFactory: configure,\r\n    deps: [Injector],\r\n    multi: true,\r\n  },\r\n];\r\n\r\nfunction configure(injector: Injector) {\r\n  return () => {\r\n    const extensions: ExtensionsService = injector.get(ExtensionsService);\r\n    const configState = injector.get(ConfigStateService);\r\n\r\n    return getObjectExtensionEntitiesFromStore(configState, 'Theme')\r\n      .pipe(\r\n        map((entities) => ({})),\r\n        mapEntitiesToContributors(configState, 'Theme'),\r\n        tap((objectExtensionContributors) => {\r\n          mergeWithDefaultActions(extensions.toolbarActions, {\r\n            [eThemeRouteNames.Banner]: DEFAULT_BANNER_TOOLBAR_ACTIONS,\r\n            [eThemeRouteNames.BannerDefinition]: DEFAULT_BANNERDEFINITION_TOOLBAR_ACTIONS,\r\n            [eThemeRouteNames.Route]: DEFAULT_ROUTE_TOOLBAR_ACTIONS,\r\n            [eThemeRouteNames.RouteDefinition]: DEFAULT_ROUTEDEFINITION_TOOLBAR_ACTIONS,\r\n            [eThemeRouteNames.WebSiteDefinition]: DEFAULT_WEBSITEDEFINITION_TOOLBAR_ACTIONS,\r\n            \r\n          });\r\n\r\n          mergeWithDefaultActions(extensions.entityActions, {\r\n            [eThemeRouteNames.Banner]: DEFAULT_BANNER_ENTITY_ACTIONS,\r\n            [eThemeRouteNames.BannerDefinition]: DEFAULT_BANNERDEFINITION_ENTITY_ACTIONS,\r\n            [eThemeRouteNames.Route]: DEFAULT_ROUTE_ENTITY_ACTIONS,\r\n            [eThemeRouteNames.RouteDefinition]: DEFAULT_ROUTEDEFINITION_ENTITY_ACTIONS,\r\n            [eThemeRouteNames.WebSiteDefinition]: DEFAULT_WEBSITEDEFINITION_ENTITY_ACTIONS,\r\n          \r\n           \r\n          });\r\n\r\n          mergeWithDefaultProps(extensions.entityProps, {\r\n            [eThemeRouteNames.Banner]: DEFAULT_BANNER_ENTITY_PROPS,\r\n            [eThemeRouteNames.BannerDefinition]: DEFAULT_BANNERDEFINITION_ENTITY_PROPS,\r\n            [eThemeRouteNames.Route]: DEFAULT_ROUTE_ENTITY_PROPS,\r\n            [eThemeRouteNames.RouteDefinition]: DEFAULT_ROUTEDEFINITION_ENTITY_PROPS,\r\n            [eThemeRouteNames.WebSiteDefinition]: DEFAULT_WEBSITEDEFINITION_ENTITY_PROPS,\r\n            \r\n          });\r\n\r\n          mergeWithDefaultProps(extensions.createFormProps, {\r\n            [eThemeRouteNames.Banner]: DEFAULT_BANNER_CREATE_FORM_PROPS,\r\n            [eThemeRouteNames.BannerDefinition]: DEFAULT_BANNERDEFINITION_CREATE_FORM_PROPS,\r\n            [eThemeRouteNames.Route]: DEFAULT_ROUTE_CREATE_FORM_PROPS,\r\n            [eThemeRouteNames.RouteDefinition]: DEFAULT_ROUTEDEFINITION_CREATE_FORM_PROPS,\r\n            [eThemeRouteNames.WebSiteDefinition]: DEFAULT_WEBSITEDEFINITION_CREATE_FORM_PROPS,\r\n           \r\n          });\r\n\r\n          mergeWithDefaultProps(extensions.editFormProps, {\r\n            [eThemeRouteNames.Banner]: DEFAULT_BANNER_EDIT_FORM_PROPS,\r\n            [eThemeRouteNames.BannerDefinition]: DEFAULT_BANNERDEFINITION_EDIT_FORM_PROPS,\r\n            [eThemeRouteNames.Route]: DEFAULT_ROUTE_EDIT_FORM_PROPS,\r\n            [eThemeRouteNames.RouteDefinition]: DEFAULT_ROUTEDEFINITION_EDIT_FORM_PROPS,\r\n            [eThemeRouteNames.WebSiteDefinition]: DEFAULT_WEBSITEDEFINITION_EDIT_FORM_PROPS,\r\n           \r\n          });\r\n        }),\r\n        mapTo(true)\r\n      )\r\n      .toPromise();\r\n  };\r\n}\r\n"]}