!function(n,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@abp/ng.core"),require("@angular/core"),require("rxjs"),require("ng-zorro-antd/table"),require("@abp/ng.theme.shared/extensions"),require("ng-zorro-antd/button"),require("ng-zorro-antd/dropdown"),require("ng-zorro-antd/icon"),require("@ngx-validate/core"),require("@abp/ng.theme.shared"),require("@delon/abc/sv")):"function"==typeof define&&define.amd?define("@fs-tw/theme-alain-ms/shared/extensions",["exports","@abp/ng.core","@angular/core","rxjs","ng-zorro-antd/table","@abp/ng.theme.shared/extensions","ng-zorro-antd/button","ng-zorro-antd/dropdown","ng-zorro-antd/icon","@ngx-validate/core","@abp/ng.theme.shared","@delon/abc/sv"],t):t(((n="undefined"!=typeof globalThis?globalThis:n||self)["fs-tw"]=n["fs-tw"]||{},n["fs-tw"]["theme-alain-ms"]=n["fs-tw"]["theme-alain-ms"]||{},n["fs-tw"]["theme-alain-ms"].shared=n["fs-tw"]["theme-alain-ms"].shared||{},n["fs-tw"]["theme-alain-ms"].shared.extensions={}),n.ng_core,n.ng.core,n.rxjs,n.table,n.extensions,n.button,n.dropdown,n.icon,n.core$1,n.ng_theme_shared,n.sv)}(this,(function(n,t,e,r,o,i,a,s,c,l,p,u){"use strict";
/*! *****************************************************************************
    Copyright (c) Microsoft Corporation.

    Permission to use, copy, modify, and/or distribute this software for any
    purpose with or without fee is hereby granted.

    THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
    REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
    AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
    INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
    LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
    OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
    PERFORMANCE OF THIS SOFTWARE.
    ***************************************************************************** */var d=function(n,t){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(n[e]=t[e])})(n,t)};function g(n,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=n}d(n,t),n.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}Object.create;function b(n,t){var e="function"==typeof Symbol&&n[Symbol.iterator];if(!e)return n;var r,o,i=e.call(n),a=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(n){o={error:n}}finally{try{r&&!r.done&&(e=i.return)&&e.call(i)}finally{if(o)throw o.error}}return a}function h(){for(var n=[],t=0;t<arguments.length;t++)n=n.concat(b(arguments[t]));return n}Object.create;var f=function(){function n(n,t,e){this.table=n,this.cdRef=t,this.localizationService=e,this.subscription=new r.Subscription,this.querySubscription=new r.Subscription,this.loadingSubscription=new r.Subscription,this.setInitialValues()}return n.prototype.setInitialValues=function(){this.table.nzSize="small",this.table.nzFrontPagination=!1,this.table.nzBordered=!0,this.table.nzShowSizeChanger=!0},n.prototype.subscribeToPage=function(){var n=this,t=this.table.nzQueryParams.subscribe((function(t){var e=n,r=t.sort.filter((function(n){return!!n.value})).map((function(n){return{key:n.key,order:"ascend"===n.value?"asc":"desc"}}))[0],o=function(){var n=e.list.sortKey+"-"+e.list.sortOrder+"-"+e.list.maxResultCount,o="--"+t.pageSize;r&&(o=r.key+"-"+r.order+"-"+t.pageSize);return n!==o}();r?(n.list.sortKey=r.key,n.list.sortOrder=r.order):(n.list.sortKey="",n.list.sortOrder=""),n.list.maxResultCount=t.pageSize,n.list.page=o?0:t.pageIndex-1,n.cdRef.detectChanges()}));this.subscription.add(t)},n.prototype.subscribeToLoading=function(){var n=this;this.loadingSubscription.closed||this.loadingSubscription.unsubscribe(),this.loadingSubscription=this.list.isLoading$.subscribe((function(t){n.table.nzLoading=t}))},n.prototype.subscribeToQuery=function(){var n=this;this.querySubscription.closed||this.querySubscription.unsubscribe(),this.querySubscription=this.list.query$.subscribe((function(t){n.table.onPageIndexChange(n.list.page+1),n.table.onPageSizeChange(n.list.maxResultCount)}))},n.prototype.ngOnChanges=function(n){var t=n.list;if(this.subscribeToQuery(),t.firstChange){var e=t.currentValue,r=e.maxResultCount,o=e.page;this.table.onPageSizeChange(r),this.table.onPageIndexChange(o+1)}},n.prototype.ngOnDestroy=function(){this.subscription.unsubscribe(),this.querySubscription.unsubscribe()},n.prototype.ngOnInit=function(){this.subscribeToPage(),this.subscribeToLoading()},n}();f.decorators=[{type:e.Directive,args:[{selector:"nz-table[list]",exportAs:"nzTableList"}]}],f.ctorParameters=function(){return[{type:o.NzTableComponent},{type:e.ChangeDetectorRef},{type:t.LocalizationService}]},f.propDecorators={list:[{type:e.Input}]};var y=function(n){this.template=n};y.decorators=[{type:e.Directive,args:[{selector:"[row-detail-template]"}]}],y.ctorParameters=function(){return[{type:e.TemplateRef}]};var m=function(n){function t(t,r,o){var i=n.call(this,t,r,o)||this;return i._locale=t,i._config=r,i.responsive=!0,i.expandSet=new Set,i.selectId=null,i.haveRowDetail=!1,i.haveSelect=!1,i.svRowCount=2,i.select=new e.EventEmitter,i._setColumnWidths(100),i}return g(t,n),t.prototype.onExpandChange=function(n,t){t?this.expandSet.add(n):this.expandSet.delete(n)},Object.defineProperty(t.prototype,"actionsText",{get:function(){var n;return null!==(n=this._actionsText)&&void 0!==n?n:this.actionList.length>1?"AbpUi::Actions":""},set:function(n){this._actionsText=n},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"actionsColumnWidth",{set:function(n){this._setColumnWidths(n?Number(n):void 0)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"defaultSelectId",{set:function(n){this.selectId=n},enumerable:!1,configurable:!0}),t.prototype.ngOnInit=function(){this.scroll&&(this.responsive=!1)},t.prototype._setColumnWidths=function(n){var t=[n];this.propList.forEach((function(n){var e=n.value;t.push(e.columnWidth)})),this.columnWidths=t},t.prototype.selected=function(n){this.haveSelect&&(this.selectId=n.id,this.select.emit(n))},t}(i.ExtensibleTableComponent);m.decorators=[{type:e.Component,args:[{exportAs:"nzExtensibleTable",selector:"nz-extensible-table",template:'\r\n  <nz-table [nzData]="data" [nzTotal]="recordsTotal" [list]="list"\r\n    \r\n  [nzScroll]="scroll"  [nzLoading]="list.isLoading$ | async">\r\n    <thead>\r\n      <tr>\r\n        <th [nzWidth]="columnWidths[0]+\'px\'"></th>\r\n        <th *ngIf="haveRowDetail" [nzWidth]="\'50px\'"></th>\r\n        <ng-container *ngFor="let prop of propList; let i = index; trackBy: trackByFn">\r\n          <th [nzSortFn]="prop.sortable" [nzWidth]="prop.columnWidth+\'px\'" [nzColumnKey]="prop.name" [nzSortDirections]="[\'ascend\', \'descend\']">\r\n            {{ prop.displayName | abpLocalization }}\r\n          </th>\r\n        </ng-container>\r\n      </tr>\r\n    </thead>\r\n    <tbody>\r\n      <ng-container *ngFor="let row of data;let no = index">\r\n        <tr class="bg-white" [ngClass]="{ listSelected: row[\'id\'] == selectId,pointer:haveSelect }">\r\n          <td>\r\n            <nz-grid-actions [record]="row"></nz-grid-actions>\r\n          </td>\r\n  \r\n          <td *ngIf="haveRowDetail" [nzExpand]="expandSet.has(row[\'id\'])" (nzExpandChange)="onExpandChange(row[\'id\'], $event)"></td>\r\n  \r\n          <ng-container *ngFor="let prop of propList; let i = index; trackBy: trackByFn">\r\n\r\n            <td (click)="selected(row)">\r\n              <span class="ant-table-rep__title" *ngIf="!scroll" >\r\n                {{ prop.displayName | abpLocalization }}\r\n              </span>\r\n              <div  *ngIf="row[\'_\' + prop.name].visible" [innerHTML]="row[\'_\' + prop.name].value | async" (click)="\r\n                  prop.action && prop.action({ getInjected: getInjected, record: row, index: i })\r\n                " [class.pointer]="prop.action"></div>\r\n            </td>\r\n          </ng-container>\r\n        </tr>\r\n  \r\n        <tr [nzExpand]="expandSet.has(row[\'id\'])">\r\n          <ng-container *ngTemplateOutlet="nodeTemplate; context: { $implicit: row }"></ng-container>\r\n        </tr>\r\n  \r\n        <ng-template #nodeTemplate row-detail-template let-node>\r\n          <ng-container *ngTemplateOutlet="\r\n              rowDetailTemplate ? rowDetailTemplate?.template : defaultTemplate;\r\n                context: { $implicit: node }\r\n              "></ng-container>\r\n        </ng-template>\r\n  \r\n        <ng-template #defaultTemplate let-node>\r\n          <sv-container [col]="svRowCount">ã€€\r\n            <ng-container *ngFor="let prop of propList; let i = index; trackBy: trackByFn">            \r\n              <sv *ngIf="row[\'_\' + prop.name].visible" [label]="prop.displayName| abpLocalization"> <span  style="color: black"\r\n                  [innerHTML]="row[\'_\' + prop.name].value | async"></span></sv>\r\n            </ng-container>\r\n          </sv-container>\r\n        </ng-template>\r\n  \r\n  \r\n      </ng-container>\r\n    </tbody>\r\n  </nz-table>\r\n\r\n',changeDetection:e.ChangeDetectionStrategy.OnPush,host:{"[class.ant-table-rep]":"responsive"},styles:[".listSelected{background-color:rgba(33,33,230,.4392156862745098)!important}nz-list-item{font-size:15px}.bg-white{background-color:#fff}.pointer{cursor:pointer}"]}]}],m.ctorParameters=function(){return[{type:String,decorators:[{type:e.Inject,args:[e.LOCALE_ID]}]},{type:t.ConfigStateService},{type:e.Injector}]},m.propDecorators={responsive:[{type:e.Input}],actionsText:[{type:e.Input}],rowDetailTemplate:[{type:e.ContentChild,args:[y]}],data:[{type:e.Input}],list:[{type:e.Input}],recordsTotal:[{type:e.Input}],actionsColumnWidth:[{type:e.Input}],actionsTemplate:[{type:e.Input}],haveRowDetail:[{type:e.Input}],haveSelect:[{type:e.Input}],svRowCount:[{type:e.Input}],defaultSelectId:[{type:e.Input}],scroll:[{type:e.Input}],select:[{type:e.Output}]};var v=function(n){function t(t){var e=n.call(this,t)||this;return e.icon="fa fa-cog",e.text="",e.trackByFn=function(n,t){return t.text},e}return g(t,n),t}(i.GridActionsComponent);v.decorators=[{type:e.Component,args:[{exportAs:"nzGridActions",selector:"nz-grid-actions",template:'<ng-container *ngIf="actionList.length > 0">\r\n  <button\r\n    nz-button\r\n    nzType="default"\r\n    nz-dropdown\r\n    [nzDropdownMenu]="menu"\r\n    class="ml-md"\r\n  >\r\n    <i nz-icon nzType="down"></i>\r\n    <span>{{ \'AbpUi::Actions\' | abpLocalization }}</span>\r\n  </button>\r\n\r\n  <nz-dropdown-menu #menu="nzDropdownMenu">\r\n    <ul nz-menu>\r\n      <ng-container *ngFor="let action of actionList; trackBy: trackByFn">\r\n        <ng-container *abpPermission="action.permission">\r\n          <li nz-menu-item *ngIf="action.visible(data)">\r\n            <a (click)="action.action(data)">{{\r\n              action.text | abpLocalization\r\n            }}</a>\r\n          </li>\r\n        </ng-container>\r\n      </ng-container>\r\n\r\n\r\n    </ul>\r\n  </nz-dropdown-menu>\r\n</ng-container>',providers:[{provide:i.EXTENSIONS_ACTION_TYPE,useValue:"entityActions"}],changeDetection:e.ChangeDetectionStrategy.OnPush}]}],v.ctorParameters=function(){return[{type:e.Injector}]},v.propDecorators={icon:[{type:e.Input}],index:[{type:e.Input}],text:[{type:e.Input}]};var z=function(n){function t(t){var e=n.call(this,t)||this;return e._injector=t,e.trackByFn=function(n,t){return t.action||t.component},e}return g(t,n),t}(i.PageToolbarComponent);z.decorators=[{type:e.Component,args:[{exportAs:"nzPageToolbar",selector:"nz-page-toolbar",template:'<div class="row justify-content-end mx-n1" id="AbpContentToolbar">\r\n  <div class="col-auto px-1 pt-2" *ngFor="let action of actionList; trackBy: trackByFn">\r\n    <ng-container *ngIf="action.visible(data)">\r\n      <ng-container *abpPermission="action.permission">\r\n        <ng-container *ngIf="action.component as component; else button">\r\n          <ng-container\r\n            *ngComponentOutlet="component; injector: createInjector(action)"\r\n          ></ng-container>\r\n        </ng-container>\r\n\r\n        <ng-template #button>\r\n          <button nz-button nzType="primary" (click)="action.action(data)">\r\n            <i [ngClass]="action.icon" [class.mr-1]="action.icon"></i>\r\n            {{ action.text | abpLocalization }}\r\n          </button>\r\n        </ng-template>\r\n      </ng-container>\r\n    </ng-container>\r\n  </div>\r\n</div>\r\n',providers:[{provide:i.EXTENSIONS_ACTION_TYPE,useValue:"toolbarActions"}],changeDetection:e.ChangeDetectionStrategy.OnPush}]}],z.ctorParameters=function(){return[{type:e.Injector}]};var x=[m,y,v,z,f],w=[a.NzButtonModule,s.NzDropDownModule,c.NzIconModule,o.NzTableModule],S=function(){};S.decorators=[{type:e.NgModule,args:[{exports:h(x,[i.UiExtensionsModule,u.SVModule]),declarations:h(x),imports:h([t.CoreModule,p.ThemeSharedModule,l.NgxValidateCoreModule,i.UiExtensionsModule,u.SVModule],w)}]}];var C=function(){};C.decorators=[{type:e.NgModule,args:[{exports:[S],imports:[S]}]}],n.BaseUiExtensionsModule=S,n.ExtensibleTableComponent=m,n.GridActionsComponent=v,n.NzTableListDirective=f,n.NzTableRowDetailDirective=y,n.PageToolbarComponent=z,n.UiExtensionsModule=C,Object.defineProperty(n,"__esModule",{value:!0})}));
//# sourceMappingURL=fs-tw-theme-alain-ms-shared-extensions.umd.min.js.map