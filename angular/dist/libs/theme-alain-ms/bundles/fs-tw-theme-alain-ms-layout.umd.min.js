!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("@angular/common"),require("@angular/core"),require("rxjs"),require("rxjs/operators"),require("@angular/cdk/layout"),require("@delon/theme"),require("@delon/util"),require("@abp/ng.core"),require("@delon/util/array"),require("snq"),require("@angular/router"),require("@delon/auth"),require("ng-zorro-antd/message"),require("@fs-tw/account"),require("@angular/forms"),require("ng-zorro-antd/core/outlet"),require("ng-zorro-antd/icon"),require("ng-zorro-antd/popover"),require("@delon/abc/reuse-tab"),require("@angular/cdk/drag-drop"),require("@delon/theme/theme-btn"),require("ng-zorro-antd/anchor"),require("ng-zorro-antd/auto-complete"),require("ng-zorro-antd/avatar"),require("ng-zorro-antd/divider"),require("ng-zorro-antd/input"),require("ng-zorro-antd/spin")):"function"==typeof define&&define.amd?define("@fs-tw/theme-alain-ms/layout",["exports","@angular/common","@angular/core","rxjs","rxjs/operators","@angular/cdk/layout","@delon/theme","@delon/util","@abp/ng.core","@delon/util/array","snq","@angular/router","@delon/auth","ng-zorro-antd/message","@fs-tw/account","@angular/forms","ng-zorro-antd/core/outlet","ng-zorro-antd/icon","ng-zorro-antd/popover","@delon/abc/reuse-tab","@angular/cdk/drag-drop","@delon/theme/theme-btn","ng-zorro-antd/anchor","ng-zorro-antd/auto-complete","ng-zorro-antd/avatar","ng-zorro-antd/divider","ng-zorro-antd/input","ng-zorro-antd/spin"],e):e(((t="undefined"!=typeof globalThis?globalThis:t||self)["fs-tw"]=t["fs-tw"]||{},t["fs-tw"]["theme-alain-ms"]=t["fs-tw"]["theme-alain-ms"]||{},t["fs-tw"]["theme-alain-ms"].layout={}),t.ng.common,t.ng.core,t.rxjs,t.rxjs.operators,t.ng.cdk.layout,t.i2,t.util,t.i1$1,t.i3,t.snq,t.ng.router,t.auth,t.message,t.account,t.ng.forms,t.outlet,t.icon,t.popover,t.reuseTab,t.ng.cdk.dragDrop,t.themeBtn,t.anchor,t.autoComplete,t.avatar,t.divider,t.input,t.spin)}(this,(function(t,e,n,r,i,a,o,s,c,l,u,p,d,g,h,f,m,v,y,b,_,S,C,x,P,z,k,O){"use strict";function I(t){return t&&"object"==typeof t&&"default"in t?t:{default:t}}var T,j=I(u);(T=t.Layout||(t.Layout={})).defaultNavConfig={title:"系統管理",doc:"系統管理"},T.defaultSidebarConfig={hasSidebar:!0,hasAllNav:!1,hasPageNav:!0,hasProductNav:!1};var w=function(){function t(t,e){var n=this;this.settings=e,this.notify$=new r.BehaviorSubject(null),this._isMobile=!1,this.topHeight=50,this.hideNav=!1,e.setLayout(Object.assign(Object.assign({},e.layout),{hasTopbar:!0,hasSidebar:!1,hasFixed:!1}));var i="only screen and (max-width: 767.99px)";t.observe(i).subscribe((function(t){return n.checkMedia(t.matches)})),this.checkMedia(t.isMatched(i))}return Object.defineProperty(t.prototype,"notify",{get:function(){return this.notify$.asObservable()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isMobile",{get:function(){return this._isMobile},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"layout",{get:function(){return this.settings.layout},enumerable:!1,configurable:!0}),t.prototype.checkMedia=function(t){this._isMobile=t,this.layout.collapsed=this._isMobile,this.notify$.next("mobile")},t.prototype.setLayout=function(t,e){this.settings.setLayout(t,e),this.notify$.next("layout")},t.prototype.setTopbar=function(t){this.setLayout("hasTopbar",t)},t.prototype.setSidebar=function(t){this.setLayout("hasSidebar",t)},t.prototype.setFixed=function(t){this.setLayout("hasFixed",t)},t.prototype.triggerNotify=function(t){void 0===t&&(t="custom"),this.notify$.next(t)},t.prototype.ngOnDestroy=function(){this.notify$.unsubscribe()},t}();w.ɵprov=n.ɵɵdefineInjectable({factory:function(){return new w(n.ɵɵinject(a.BreakpointObserver),n.ɵɵinject(o.SettingsService))},token:w,providedIn:"root"}),w.decorators=[{type:n.Injectable,args:[{providedIn:"root"}]}],w.ctorParameters=function(){return[{type:a.BreakpointObserver},{type:o.SettingsService}]};function N(t,e,n,r){var i,a=arguments.length,o=a<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(o=(a<3?i(o):a>3?i(e,n,o):i(e,n))||o);return a>3&&o&&Object.defineProperty(e,n,o),o}function M(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)}Object.create;function L(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,i,a=n.call(t),o=[];try{for(;(void 0===e||e-- >0)&&!(r=a.next()).done;)o.push(r.value)}catch(t){i={error:t}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(i)throw i.error}}return o}function D(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(L(arguments[e]));return t}Object.create;var R=function(){function t(t,e,n,r){this.routesService=t,this.localizationPipe=e,this.http=n,this.arrSrv=r}return Object.defineProperty(t.prototype,"allL2",{get:function(){return this._data.nav.filter((function(t){return t.children&&t.children.length>0}))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"allPanel",{get:function(){return this._data.nav.reduce((function(t,e){return t.concat(e.children?e.children:e)}),[])},enumerable:!1,configurable:!0}),t.prototype.getData=function(){return this._data?r.of(this._data):this.getByHttp()},t.prototype.fixData=function(t){var e=function(t){if(t.left){t.leftColumn=t.leftColumn||2;var e=new Array(t.leftColumn).fill({}).map((function(t,e){return{list:[],count:0,idx:e}}));t.left.filter((function(t){return t.list})).forEach((function(t){var n=D(e).sort((function(t,e){return t.count-e.count}))[0].idx;e[n].list.push(t),e[n].count+=t.list.length})),t._left=e}};return t.nav.forEach((function(t){t.level=1,t.children?t.children.forEach((function(n){n.parent=t,n.level=2,e(n)})):e(t)})),t},t.prototype.getByHttp=function(){var t=this;return this.routesService.tree$.pipe(i.map((function(e){var n={navBottom:[],bottomText:"Further.",nav:[]};return n.nav=e.filter((function(e){return!t.routesService.hide(e)})).map((function(e){var r={text:t.localizationPipe.transform(e.name),left:[]};return e.children.filter((function(e){return!t.routesService.hide(e)})).forEach((function(e){var i;(null===(i=null==e?void 0:e.children)||void 0===i?void 0:i.length)>0?r.left.push({text:t.localizationPipe.transform(e.name),list:e.children.map((function(e){return{text:t.localizationPipe.transform(e.name),link:e.path}}))}):n.navBottom.push({text:t.localizationPipe.transform(e.name),link:e.path})})),r})),t._data=t.fixData(n),t._data})))},t.prototype.refreshActive=function(t){for(this.arrSrv.visitTree(this._data.nav,(function(t){t.active=!1}));t;)t.active=!0,t=t.parent},t}();R.ɵprov=n.ɵɵdefineInjectable({factory:function(){return new R(n.ɵɵinject(c.RoutesService),n.ɵɵinject(c.LocalizationPipe),n.ɵɵinject(o._HttpClient),n.ɵɵinject(l.ArrayService))},token:R,providedIn:"root"}),R.decorators=[{type:n.Injectable,args:[{providedIn:"root"}]}],R.ctorParameters=function(){return[{type:c.RoutesService},{type:c.LocalizationPipe},{type:o._HttpClient},{type:s.ArrayService}]};var $=function(){function t(t,e,n,i){this.srv=t,this.brandSrv=e,this.cdr=n,this.doc=i,this.unsubscribe$=new r.Subject,this.loading=!1,this.$mouse=new r.Subject,this.open=!1}return Object.defineProperty(t.prototype,"allL2",{get:function(){return this.srv.allL2},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"allPanel",{get:function(){return this.srv.allPanel},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"validOpen",{get:function(){return this.data&&this.open},enumerable:!1,configurable:!0}),t.prototype.handleOpen=function(t){this.doc.body.classList[t?"add":"remove"]("alain-ms__an-body"),this.open=t,this.cdr.markForCheck(),this.updateHeight().load()},t.prototype.load=function(){var t=this;this.loading||this.data||(this.loading=!0,this.srv.getData().subscribe((function(e){t.data=e,t.cdr.markForCheck()})))},t.prototype.updateHeight=function(){var t=window.innerHeight-this.brandSrv.topHeight;return this.dropdownEl.nativeElement.style.height=t+"px",this},t.prototype._enter=function(){this.validOpen||this.handleOpen(!0)},t.prototype._leave=function(){this.handleOpen(!1)},t.prototype.mouseHandle=function(t,e){this.$mouse.next({i:t,status:e})},t.prototype.handleMouse=function(t){this.srv.refreshActive(t),this.cdr.detectChanges()},t.prototype.ngOnInit=function(){var t=this,e=this.$mouse,n=this.unsubscribe$;e.asObservable().pipe(i.takeUntil(n),i.auditTime(150)).subscribe((function(e){return t.handleMouse(e.i)}))},t.prototype.ngOnDestroy=function(){var t=this.unsubscribe$;t.next(),t.complete()},t}();$.decorators=[{type:n.Component,args:[{selector:"ms-all-nav",template:'<div class="alain-ms__an-trigger">\r\n  <i nz-icon nzType="bars"></i>\r\n  <nz-spin *ngIf="open && !data"></nz-spin>\r\n</div>\r\n<ng-template #menuTpl let-ls>\r\n  <ul class="alain-ms__an-menu">\r\n    <li\r\n      *ngFor="let i of ls"\r\n      class="alain-ms__an-menu-item"\r\n      [ngClass]="{ \'alain-ms__an-menu-item--active\': i.active }"\r\n      (mouseenter)="mouseHandle(i, true)"\r\n    >\r\n      {{ i.text }}\r\n      <i nz-icon nzType="right"></i>\r\n    </li>\r\n  </ul>\r\n</ng-template>\r\n<ng-template #categoryTpl let-ls>\r\n  <div *ngFor="let p of ls" class="alain-ms__an-category">\r\n    <h3 class="alain-ms__an-category-title">{{ p.text }}</h3>\r\n    <div class="alain-ms__an-category-list">\r\n      <a *ngFor="let i of p.list" [link-to]="i" (linkToChanged)="_leave()" class="alain-ms__an-category-link">\r\n        {{ i.text }}\r\n        <span *ngIf="i.tip" class="alain-ms__an-category-tip">{{ i.tip }}</span>\r\n      </a>\r\n    </div>\r\n  </div>\r\n</ng-template>\r\n<div #dropdown class="alain-ms__an-dropdown">\r\n  <div *ngIf="data" class="alain-ms__an">\r\n    <div class="alain-ms__an-panel alain-ms__an-panel-active alain-ms__an-level1">\r\n      <div class="alain-ms__an-panel-inner">\r\n        <ng-template [ngTemplateOutlet]="menuTpl" [ngTemplateOutletContext]="{ $implicit: data.nav }"></ng-template>\r\n        <div *ngIf="data.navBottom" class="alain-ms__an-menu-bottom">\r\n          <a *ngFor="let i of data.navBottom" [link-to]="i" (linkToChanged)="_leave()">\r\n            {{ i.text }}\r\n            <i nz-icon nzType="share-alt"></i>\r\n          </a>\r\n        </div>\r\n        <div *ngIf="data.bottomText" class="alain-ms__an-bottom">{{ data.bottomText }}</div>\r\n      </div>\r\n    </div>\r\n    <div\r\n      *ngFor="let p of allL2"\r\n      class="alain-ms__an-panel alain-ms__an-level2"\r\n      [ngClass]="{ \'alain-ms__an-level2-active\': p.active }"\r\n    >\r\n      <div class="alain-ms__an-panel-inner">\r\n        <ng-template [ngTemplateOutlet]="menuTpl" [ngTemplateOutletContext]="{ $implicit: p.children }"></ng-template>\r\n      </div>\r\n    </div>\r\n    <div\r\n      *ngFor="let i of allPanel"\r\n      class="alain-ms__an-content alain-ms__an-level{{ i.level }}-content alain-ms__an-left-col-{{ i.leftColumn }}"\r\n      [ngClass]="{ \'alain-ms__an-content-active\': i.active }"\r\n    >\r\n      <div *ngIf="i._left && i._left.length > 0" class="alain-ms__an-left">\r\n        <div *ngFor="let col of i._left" class="alain-ms__an-left-col">\r\n          <ng-template\r\n            [ngTemplateOutlet]="categoryTpl"\r\n            [ngTemplateOutletContext]="{ $implicit: col.list }"\r\n          ></ng-template>\r\n        </div>\r\n      </div>\r\n      <div *ngIf="i.right && i.right.length > 0" class="alain-ms__an-right">\r\n        <ng-template [ngTemplateOutlet]="categoryTpl" [ngTemplateOutletContext]="{ $implicit: i.right }"></ng-template>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</div>\r\n',host:{"[class.alain-ms__an-active]":"validOpen"},changeDetection:n.ChangeDetectionStrategy.OnPush}]}],$.ctorParameters=function(){return[{type:R},{type:w},{type:n.ChangeDetectorRef},{type:void 0,decorators:[{type:n.Inject,args:[e.DOCUMENT]}]}]},$.propDecorators={dropdownEl:[{type:n.ViewChild,args:["dropdown",{static:!0}]}],_enter:[{type:n.HostListener,args:["mouseenter"]}],_leave:[{type:n.HostListener,args:["mouseleave"]}]};var F=function(){function t(t,e){this.configState=t,this.sessionState=e,this.languages$=this.configState.getDeep$("localization.languages")}return Object.defineProperty(t.prototype,"defaultLanguage$",{get:function(){var t=this;return this.languages$.pipe(i.map((function(e){var n=j.default((function(){return e.find((function(e){return e.cultureName===t.selectedLangCulture}))}),{});return{displayName:n.displayName||"",flagIcon:n.flagIcon}})))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"dropdownLanguages$",{get:function(){var t=this;return this.languages$.pipe(i.map((function(e){return j.default((function(){return e.filter((function(e){return e.cultureName!==t.selectedLangCulture}))}))}),[]))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"selectedLangCulture",{get:function(){return this.sessionState.getLanguage()},enumerable:!1,configurable:!0}),t.prototype.change=function(t){this.sessionState.setLanguage(t)},t}();F.decorators=[{type:n.Component,args:[{selector:"ms-langs",template:'<ng-container *ngIf="defaultLanguage$ | async as defaultLang">\r\n  <span class="alain-ms__topbar-item-btn" >\r\n    <span >{{ defaultLang.displayName }}</span>\r\n  </span>\r\n  <ul class="alain-ms__topbar-dd-menu">\r\n    <li *ngFor="let lang of (dropdownLanguages$ | async)" (click)="change(lang.cultureName)">\r\n      <a class="alain-ms__topbar-dd-item">{{ lang?.displayName }}</a>\r\n    </li>\r\n  </ul>\r\n</ng-container>\r\n\r\n',host:{"[class.alain-ms__topbar-item]":"true","[class.alain-ms__topbar-dd]":"true"},changeDetection:n.ChangeDetectionStrategy.OnPush}]}],F.ctorParameters=function(){return[{type:c.ConfigStateService},{type:c.SessionStateService}]};var A=function(){function t(t){this.http=t}return Object.defineProperty(t.prototype,"data",{get:function(){return this._data},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"messages",{get:function(){return this._data.messagess},enumerable:!1,configurable:!0}),t.prototype.getData=function(){return this._data?r.of(this._data):this.getByHttp()},t.prototype.getNav=function(t){return this._data.navLinks[t]||{}},t.prototype.getByHttp=function(){var t=this;return this.http.get("./assets/tmp/topbar-zh-TW.json").pipe(i.tap((function(e){t._data=e})))},t}();A.ɵprov=n.ɵɵdefineInjectable({factory:function(){return new A(n.ɵɵinject(o._HttpClient))},token:A,providedIn:"root"}),A.decorators=[{type:n.Injectable,args:[{providedIn:"root"}]}],A.ctorParameters=function(){return[{type:o._HttpClient}]};var E=function(){function t(t,e,n,r,i){this.srv=t,this.router=e,this.tokenService=n,this.settings=r,this.msg=i}return Object.defineProperty(t.prototype,"list",{get:function(){var t=this;return this.srv.messages.map((function(e){return e.link=t.l.messageUrl+e.id,e}))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"l",{get:function(){return this.srv.getNav("message")},enumerable:!1,configurable:!0}),t.prototype.logout=function(){this.tokenService.clear(),this.router.navigateByUrl(this.tokenService.login_url)},t}();E.decorators=[{type:n.Component,args:[{selector:"ms-notice",template:'<span class="alain-ms__topbar-item-btn">\r\n  <span class="position-relative">\r\n    {{ l.titleText }}<em *ngIf="list.length > 0" class="alain-ms__topbar-item-num">{{ list.length }}</em>\r\n  </span>\r\n</span>\r\n<div class="alain-ms__topbar-dd-menu">\r\n  <div class="alain-ms__notice-hd">\r\n    {{ l.title }}\r\n    <a class="brand-color" [link-to]="l.subscribe">{{ l.subscribe.title }}</a>\r\n  </div>\r\n  <a class="alain-ms__notice-item" *ngFor="let i of list" [link-to]="i">\r\n    <div class="alain-ms__notice-item--title">{{ i.title }}</div>\r\n    <span class="alain-ms__notice-item--time">{{ i.time }}</span>\r\n  </a>\r\n  <div class="alain-ms__notice-fd">\r\n    <a class="d-block pt-sm pb-xs text-center" [link-to]="l">{{ l.text }}</a>\r\n  </div>\r\n</div>\r\n',host:{"[class.alain-ms__topbar-item]":"true","[class.alain-ms__topbar-dd]":"true","[class.alain-ms__notice]":"true"},changeDetection:n.ChangeDetectionStrategy.OnPush}]}],E.ctorParameters=function(){return[{type:A},{type:p.Router},{type:void 0,decorators:[{type:n.Inject,args:[d.DA_SERVICE_TOKEN]}]},{type:o.SettingsService},{type:g.NzMessageService}]};var q=function(){function t(t){this.http=t}return Object.defineProperty(t.prototype,"platList",{get:function(){return this._data.reduce((function(t,e){return t.concat(e.list)}),[])},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"item",{get:function(){return this.platList.find((function(t){return t.selected}))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"list",{get:function(){return this._data},enumerable:!1,configurable:!0}),t.prototype.getByHttp=function(){return this.http.get("/region").pipe(i.tap((function(t){})))},t.prototype.getData=function(){return this._data?r.of(null):this.getByHttp()},t.prototype.setSelected=function(t){this.platList.find((function(t){return t.selected})).selected=!1,t.selected=!0},t}();q.ɵprov=n.ɵɵdefineInjectable({factory:function(){return new q(n.ɵɵinject(o._HttpClient))},token:q,providedIn:"root"}),q.decorators=[{type:n.Injectable,args:[{providedIn:"root"}]}],q.ctorParameters=function(){return[{type:o._HttpClient}]};var B=function(){function t(t,e){this.srv=t,this.cdr=e,this.inited=!1}return t.prototype.ngOnInit=function(){var t=this;this.srv.getData().subscribe((function(){t.inited=!0,t.cdr.detectChanges()}))},t.prototype.selected=function(t){this.srv.setSelected(t),this.cdr.detectChanges()},t}();B.decorators=[{type:n.Component,args:[{selector:"ms-region",template:'<ng-container *ngIf="inited">\r\n  <span class="alain-ms__topbar-item-btn">\r\n    <i class="icon icon-{{ srv.item.country }}"></i>\r\n    <span class="text-xs px-xs">{{ srv.item.name }}</span>\r\n    <i nz-icon nzType="caret-up" class="alain-ms__topbar-item-btn-arrow"></i>\r\n  </span>\r\n  <div class="alain-ms__topbar-dd-menu alain-ms__topbar-dd-left alain-ms__region--wrap clearfix">\r\n    <dl *ngFor="let p of srv.list" class="alain-ms__region--list">\r\n      <dt class="mb-sm">{{ p.name }}</dt>\r\n      <dd *ngFor="let i of p.list" (click)="selected(i)">\r\n        <a class="d-block" [ngClass]="{ \'brand-color\': i.selected }">\r\n          <i class="icon icon-{{ i.country }}"></i>{{ i.name }}\r\n        </a>\r\n      </dd>\r\n    </dl>\r\n  </div>\r\n</ng-container>\r\n',host:{"[class.alain-ms__topbar-item]":"true","[class.alain-ms__topbar-dd]":"true","[class.alain-ms__region]":"true"},changeDetection:n.ChangeDetectionStrategy.OnPush}]}],B.ctorParameters=function(){return[{type:q},{type:n.ChangeDetectorRef}]};var H=function(){function t(t,e,n){var a=this;this.srv=e,this.cdr=n,this.show=!1,this.q="",this.search$=new r.Subject,this.list=[],this.search$.pipe(i.debounceTime(300),i.distinctUntilChanged(),i.switchMap((function(e){return t.get("/user",{no:e,pi:1,ps:5})}))).subscribe((function(t){a.list=t.list,a.cdr.detectChanges()}))}return Object.defineProperty(t.prototype,"l",{get:function(){return this.srv.getNav("search")},enumerable:!1,configurable:!0}),t.prototype._click=function(){this.ipt.nativeElement.focus(),this.show=!0},t.prototype.ngOnDestroy=function(){this.search$.unsubscribe()},t}();H.decorators=[{type:n.Component,args:[{selector:"ms-search",template:'<div class="alain-ms__search" [ngClass]="{ \'alain-ms__search-active\': show }">\r\n  <input\r\n    class="alain-ms__search-ipt"\r\n    #ipt\r\n    placeholder="{{ l.placeholder }}"\r\n    nz-input\r\n    [(ngModel)]="q"\r\n    (input)="search$.next($event.target?.value)"\r\n    [nzAutocomplete]="searchAuto"\r\n    (blur)="show = false"\r\n  />\r\n  <i class="alain-ms__search-icon" nz-icon nzType="search"></i>\r\n  <i class="alain-ms__search-outline"></i>\r\n  <nz-autocomplete #searchAuto class="asdlfkjlj">\r\n    <nz-auto-option *ngFor="let item of list" [nzValue]="item">\r\n      {{ item }}\r\n    </nz-auto-option>\r\n  </nz-autocomplete>\r\n</div>\r\n',host:{"[class.alain-ms__topbar-item]":"true","[class.mr-md]":"true"},changeDetection:n.ChangeDetectionStrategy.OnPush}]}],H.ctorParameters=function(){return[{type:o._HttpClient},{type:A},{type:n.ChangeDetectorRef}]},H.propDecorators={ipt:[{type:n.ViewChild,args:["ipt",{static:!0}]}],_click:[{type:n.HostListener,args:["click"]}]};var U=function(){function t(t,e,n,r,i){this.authService=t,this.router=e,this.configStateService=n,this.settings=i,this.currentUser$=this.configStateService.getOne$("currentUser")}return t.prototype.initLogin=function(){this.authService.initLogin()},t.prototype.logout=function(){var t=this;this.authService.logout().subscribe((function(){t.router.navigate(["/"],{state:{redirectUrl:t.router.url}})}))},t}();U.decorators=[{type:n.Component,args:[{selector:"ms-user",template:'<ng-template #loginBtnTpl>\r\n  <a (click)="initLogin()"  class="alain-ms__topbar-item-btn">{{\'AbpAccount::Login\' | abpLocalization}}</a>\r\n</ng-template>\r\n\r\n<div *ngIf="(currentUser$ | async) as currentUser">\r\n  <div *ngIf="currentUser.isAuthenticated; else loginBtnTpl">\r\n\r\n\r\n    <span class="alain-ms__topbar-item-btn">\r\n      \x3c!-- <nz-avatar [nzSrc]="settings.user.avatar" nzSize="small"></nz-avatar> --\x3e\r\n      {{ currentUser.userName }}\r\n    </span>\r\n    <div class="alain-ms__topbar-dd-menu width-md">\r\n      <div class="alain-ms__user-hd">\r\n        <div class="d-flex">\r\n          \x3c!-- <nz-avatar [nzSrc]="settings.user.avatar" nzSize="small"></nz-avatar> --\x3e\r\n          <span class="ml-md">{{ currentUser.userName }}</span>\r\n        </div>\r\n        \x3c!-- <div class="mt-sm">\r\n          <ng-container *ngFor="let i of mainLinks; let last = last">\r\n            <a [link-to]="i">{{ i.text }}</a>\r\n            <nz-divider *ngIf="!last" nzType="vertical"></nz-divider>\r\n          </ng-container>\r\n        </div> --\x3e\r\n      </div>\r\n      <div class="alain-ms__user-bd">\r\n        \x3c!-- <a *ngFor="let i of subLinks" [link-to]="i" class="alain-ms__user-bd-item">\r\n          <i nz-icon nzType="safety"></i>{{ i.text }}\r\n        </a> --\x3e\r\n        <a routerLink="/account/manage-profile" class="alain-ms__user-bd-item">\r\n          <i nz-icon nzType="safety"></i>{{ \'AbpAccount::ManageYourProfile\' | abpLocalization }}\r\n        </a>\r\n      </div>\r\n      <div class="alain-ms__user-fd">\r\n        <a (click)="logout()" class="d-block pt-sm pb-xs text-center">{{ \'AbpUi::Logout\' | abpLocalization }}</a>\r\n      </div>\r\n    </div>\r\n\r\n\r\n  </div>\r\n</div>\r\n\r\n',host:{"[class.alain-ms__topbar-item]":"true","[class.alain-ms__topbar-dd]":"true","[class.alain-ms__user]":"true"},changeDetection:n.ChangeDetectionStrategy.OnPush}]}],U.ctorParameters=function(){return[{type:h.AuthService},{type:p.Router},{type:c.ConfigStateService},{type:A},{type:o.SettingsService}]};var V=function(){function t(t){this.injector=t}return Object.defineProperty(t.prototype,"routesService",{get:function(){return this.injector.get(c.RoutesService)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"localizationPipe",{get:function(){return this.injector.get(c.LocalizationPipe)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"CurrentUrl",{get:function(){var t=this.RouterState.url.split("?")[0];return decodeURI(t)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"CurrentRoute",{get:function(){var t=this;return this.routesService.find((function(e){return t.formatParams(e.path)===t.CurrentUrl}))},enumerable:!1,configurable:!0}),t.prototype.MergeRouteData=function(t,e){var n=e,r=[],i=this.CurrentRoute;if(!i)return[];for(s(i);i.parent;)s(i=i.parent);for(var a=r;0!==a.length;){var o=a.pop();n=Object.assign(Object.assign({},n),o[t])}return n;function s(e){e&&e.hasOwnProperty(t)&&r.push(e)}},Object.defineProperty(t.prototype,"Category$",{get:function(){var t=this;return this.routesService.visible$.pipe(i.map((function(e){if(0!==e.length)return e.filter((function(e){return"AbpUiNavigation::Menu:Administration"===e.name&&!t.routesService.hide(e)})).map((function(t){return t.children})).reduce((function(t,e){return t.concat(e)})).map((function(e){var n={id:e.name,name:t.localizationPipe.transform(e.name),icon:e.iconClass,products:[],link:e.path};return n.products=e.children.filter((function(e){return!t.routesService.hide(e)})).map((function(e){return{productId:e.name,name:t.localizationPipe.transform(e.name),link:e.path,icon:e.iconClass,id:e.name}})),n}))})))},enumerable:!1,configurable:!0}),t.prototype.GetPageNavs=function(t,e){if(!this.CurrentRoute)return[];var n,r=[];return this.RouterState=t,(n=this.routesService.find((function(t){return t.name==e.name})))&&r.push.apply(r,D(this.transMenu(n))),r},t.prototype.transMenu=function(t,e){var n=this;void 0===e&&(e=!0);var r=[];return t.children.filter((function(t){return!n.routesService.hide(t)})).forEach((function(t){var i,a={text:t.displayName||n.localizationPipe.transform(t.name),link:n.formatParams(t.path),icon:t.iconClass,children:[]};(null===(i=null==t?void 0:t.children)||void 0===i?void 0:i.length)>0&&e&&(a.children=n.transMenu(t,!1)),r.push(a)})),r},t.prototype.formatParams=function(t,e){var n=this;if(void 0===e&&(e=this.RouterState.root),!t)return"";var r=/:([^(:\/\-\ )]+)/g,i=t;return t.match(r)&&t.match(r).forEach((function(t){var r,a=t.substr(1),o=null===(r=n.findRouter((function(t){return a in t.params}),[e]))||void 0===r?void 0:r.params[a];i=i.replace(":"+a,o)})),i},t.prototype.findRouter=function(t,e){var n=this;return e.reduce((function(e,r){return e||(t(r)?r:n.findRouter(t,r.children))}),null)},t}(),G=function(){function e(e,n){this.injector=e,this.localizationPipe=n,this.store=new c.InternalStore({isFetching:!1,categories:[],navConfig:t.Layout.defaultNavConfig,sidebarConfig:t.Layout.defaultSidebarConfig,pageNavs:[]}),this.routesProcessor=new V(this.injector),this.listenRoutes()}return e.prototype.getStore$=function(){return this.store.sliceState((function(t){return t}))},e.prototype.getFetching$=function(){return this.store.sliceState((function(t){return t.isFetching}))},e.prototype.getCategories=function(){return this.store.state.categories},e.prototype.getCategories$=function(){return this.store.sliceState((function(t){return t.categories}))},e.prototype.getShortcuts=function(){var t=this.getCategories(),e=[];return t.forEach((function(t){e.push(t)})),e},e.prototype.getShortcuts$=function(){return this.getCategories$().pipe(i.map((function(t){var e=[];return t.forEach((function(t){e.push(t)})),e})))},e.prototype.getNavConfig=function(){return this.store.state.navConfig},e.prototype.getNavConfig$=function(){return this.store.sliceState((function(t){return t.navConfig}))},e.prototype.getPageNavs$=function(){return this.store.sliceState((function(t){return t.pageNavs}))},e.prototype.getPageNavs=function(){return this.store.state.pageNavs},e.prototype.setStore=function(t){this.store.patch(Object.assign({},t))},e.prototype.setFetching=function(t){this.store.patch({isFetching:t})},e.prototype.setNavConfig=function(t){var e;this.store.patch({navConfig:t}),"AbpUiNavigation::Menu:Administration"!==t.name?(e=this.routesProcessor.GetPageNavs(this.routesProcessor.RouterState,t),this.store.state.sidebarConfig.hasPageNav=!0):this.store.state.sidebarConfig.hasPageNav=!1,this.store.patch({pageNavs:e,sidebarConfig:this.store.state.sidebarConfig})},e.prototype.fetchPageNavs=function(e){var n,r;this.routesProcessor.RouterState=e;var i=this.routesProcessor.MergeRouteData("navConfig",Object.assign(Object.assign({},t.Layout.defaultNavConfig),{name:null!==(r=null===(n=this.routesProcessor.CurrentRoute)||void 0===n?void 0:n.parentName)&&void 0!==r?r:""})),a=this.routesProcessor.MergeRouteData("sidebarConfig",t.Layout.defaultSidebarConfig);this.setStore({sidebarConfig:a}),this.setNavConfig(i)},e.prototype.listenRoutes=function(){var t=this;this.routesProcessor.Category$.subscribe((function(e){t.routesProcessor.RouterState&&t.fetchPageNavs(t.routesProcessor.RouterState),t.store.patch({categories:e})}))},e}();G.ɵprov=n.ɵɵdefineInjectable({factory:function(){return new G(n.ɵɵinject(n.INJECTOR),n.ɵɵinject(c.LocalizationPipe))},token:G,providedIn:"root"}),G.decorators=[{type:n.Injectable,args:[{providedIn:"root"}]}],G.ctorParameters=function(){return[{type:n.Injector},{type:c.LocalizationPipe}]};var W=function(){function t(t){this.layoutSateService=t}return Object.defineProperty(t.prototype,"data",{get:function(){return this._data},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"i18n",{get:function(){return{showAll:!0,keywords:"請輸入關鍵詞",allProduct:"查詢全部産品",show:!0,hasResult:"以下是與“<strong>{filterTxt}</strong>”相關的産品：",noResult:"未找到與“<strong>{filterTxt}</strong>”相關的産品。",text:"産品與服務",recent:"最近訪問"}},enumerable:!1,configurable:!0}),t.prototype.getData=function(){var t=this;return this.layoutSateService.getCategories$().pipe(i.tap((function(e){t._data=e})))},t.prototype.search=function(t){var e=[[],[],[]],n=s.deepCopy(this._data);t&&(n=n.map((function(e){var n;return e.products=null===(n=e.products)||void 0===n?void 0:n.filter((function(e){return e.name.includes(t)||e.id.includes(t)})),e})));var r=[],i=0;return n.filter((function(t){return t.products.length>0})).forEach((function(t,n){t._id=++i,e[n%3].push(t),-1===r.findIndex((function(e){return e.name===t.name}))&&r.push({_id:t._id,name:t.name})})),{list:e,categories:r}},t}();W.ɵprov=n.ɵɵdefineInjectable({factory:function(){return new W(n.ɵɵinject(G))},token:W,providedIn:"root"}),W.decorators=[{type:n.Injectable,args:[{providedIn:"root"}]}],W.ctorParameters=function(){return[{type:G}]};var X=function(){function t(t,e,n,r){this.layoutStateService=t,this.brand=e,this.srv=n,this.cdr=r,this.showProduct=!1,this.inited=!1,this.q="",this.searchCategories=[],e.setSidebar(!0)}return Object.defineProperty(t.prototype,"store$",{get:function(){return this.layoutStateService.getStore$()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"shortcuts$",{get:function(){return this.layoutStateService.getShortcuts$()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"l",{get:function(){return this.srv.i18n},enumerable:!1,configurable:!0}),t.prototype.search=function(t){var e=this;void 0===t&&(t=!0);var n=this.srv.search(this.q);this.searchList=n.list,this.searchCategories=n.categories,this.cdr.detectChanges(),t&&setTimeout((function(){e.categoryEl.nativeElement.scrollTop=0}))},t.prototype.ngAfterViewInit=function(){var t=this;this.srv.getData().subscribe((function(e){t.inited=!0,t.search()}))},t.prototype.ngOnDestroy=function(){this.brand.setSidebar(!1)},t}();X.decorators=[{type:n.Component,args:[{selector:"ms-sidebar",template:'<ng-container *ngIf="store$ | async as store">\r\n  <div class="alain-ms__sidebar-wrap">\r\n    <div\r\n      *ngIf="store.sidebarConfig.hasProductNav"\r\n      class="alain-ms__sidebar-product-all"\r\n      (click)="showProduct = !showProduct"\r\n    >\r\n      <div class="alain-ms__sidebar-product alain-ms__sidebar-product-all-wrap">\r\n        <i class="alain-ms__sidebar-product-icon" nz-icon nzType="appstore"></i>\r\n        <span class="alain-ms__sidebar-product-name">{{ l.text }}</span>\r\n        <span class="alain-ms__sidebar-product-toolbar">\r\n          <i nz-icon nzType="right"></i>\r\n        </span>\r\n      </div>\r\n    </div>\r\n    <ul class="alain-ms__sidebar-product-quick">\r\n      <li\r\n        class="alain-ms__sidebar-product"\r\n        *ngFor="let i of shortcuts$ | async; let idx = index"\r\n      >\r\n        <i\r\n          class="alain-ms__sidebar-product-icon {{ i.icon }} "\r\n          [link-to]="i"\r\n          (linkToChanged)="showProduct = false"\r\n        ></i>\r\n        <a\r\n          class="alain-ms__sidebar-product-name"\r\n          [link-to]="i"\r\n          (linkToChanged)="showProduct = false"\r\n        >\r\n          {{ i.name }}\r\n        </a>\r\n      </li>\r\n    </ul>\r\n  </div>\r\n  <div class="alain-ms__sidebar-products">\r\n    <div class="alain-ms__products">\r\n      <div class="alain-ms__products-close" (click)="showProduct = false">\r\n        <i nz-icon nzType="close"></i>\r\n      </div>\r\n      <div class="alain-ms__products-left">\r\n        <div class="alain-ms__products-category-wrap" #categoryEl>\r\n          <div class="d-flex">\r\n            <div\r\n              *ngFor="let c of searchList"\r\n              class="alain-ms__products-category-column"\r\n            >\r\n              <div *ngFor="let p of c" class="alain-ms__products-category">\r\n                <h3\r\n                  class="alain-ms__products-category-title"\r\n                  id="product-cat-{{ p._id }}"\r\n                >\r\n                  {{ p.name }}\r\n                </h3>\r\n                <ul class="list-unstyled">\r\n                  <li\r\n                    *ngFor="let i of p.products"\r\n                    class="alain-ms__products-category-item"\r\n                    [ngClass]="{\r\n                      \'alain-ms__products-category-item-active\': i.shortcut\r\n                    }"\r\n                  >\r\n                    <a\r\n                      [link-to]="i"\r\n                      (linkToChanged)="showProduct = false"\r\n                      class="alain-ms__products-category-item-link"\r\n                      >{{ i.name }}</a\r\n                    >\r\n                  </li>\r\n                </ul>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      <div class="alain-ms__products-right">\r\n        <nz-anchor\r\n          nzAffix="false"\r\n          nzContainer=".alain-ms__products-category-wrap"\r\n          nzOffsetTop="150"\r\n          nzShowInkInFixed="false"\r\n        >\r\n          <nz-link\r\n            *ngFor="let i of searchCategories"\r\n            nzHref="#product-cat-{{ i._id }}"\r\n            [nzTitle]="i.name"\r\n          ></nz-link>\r\n        </nz-anchor>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</ng-container>\r\n',host:{"[class.alain-ms__sidebar]":"true","[class.alain-ms__sidebar-showproduct]":"showProduct"},changeDetection:n.ChangeDetectionStrategy.OnPush}]}],X.ctorParameters=function(){return[{type:G},{type:w},{type:W},{type:n.ChangeDetectorRef}]},X.propDecorators={categoryEl:[{type:n.ViewChild,args:["categoryEl",{static:!1}]}]};var J=function(){function t(t,e,n){this.srv=t,this.cdr=e,this.environment=n,this.inited=!1,this.allNav=!1}return Object.defineProperty(t.prototype,"appInfo",{get:function(){return this.environment.getEnvironment().application},enumerable:!1,configurable:!0}),t.prototype.ngOnInit=function(){var t=this;this.srv.getData().subscribe((function(){t.inited=!0,t.mergeLinks(),t.cdr.detectChanges()}))},t.prototype.mergeLinks=function(){var t=this.srv.data.navLinks;this.links=[t.finance,t.workorder,t.support].map((function(t){return null==t.className&&(t.className=""),t.links&&0!==t.links.length?t.className+=" alain-ms__topbar-dd":t.links=void 0,t}))},t}();J.decorators=[{type:n.Component,args:[{selector:"ms-topbar",template:'<ng-template #defaultLogo>\r\n  <img src="./assets/logo-color.svg" />\r\n</ng-template>\r\n<div class="alain-ms__topbar-main">\r\n  <ms-all-nav *ngIf="allNav"></ms-all-nav>\r\n  <div class="alain-ms__topbar-logo">\r\n    <a routerLink="/" class="alain-ms__topbar-logo-img">\r\n      <img *ngIf="appInfo.logoUrl; else defaultLogo" [src]="appInfo.logoUrl"/>\r\n    </a>\r\n    <a routerLink="/" class="alain-ms__topbar-logo-link">\r\n      {{ appInfo.name }}\r\n    </a>\r\n  </div>\r\n  \x3c!-- <ms-region *ngIf="userSrv?.isLogin" class="hidden-md"></ms-region> --\x3e\r\n</div>\r\n<div class="alain-ms__topbar-widget" *ngIf="inited">\r\n  \x3c!-- 搜索 --\x3e\r\n  \x3c!-- <ms-search class="hidden-xs"></ms-search> --\x3e\r\n  \x3c!-- 消息 --\x3e\r\n  \x3c!-- <ms-notice></ms-notice> --\x3e\r\n  \x3c!-- 菜单 --\x3e\r\n  \x3c!-- <div *ngFor="let p of links" class="alain-ms__topbar-item" [ngClass]="p.className">\r\n    <a class="alain-ms__topbar-item-btn" [link-to]="p">{{ p.text }}</a>\r\n    <ul class="alain-ms__topbar-dd-menu" *ngIf="p.links">\r\n      <li *ngFor="let i of p.links">\r\n        <a class="alain-ms__topbar-dd-item" [link-to]="i">{{ i.text }}</a>\r\n      </li>\r\n    </ul>\r\n  </div> --\x3e\r\n  \x3c!-- 购物车 --\x3e\r\n  \x3c!-- <div class="alain-ms__topbar-item hidden-mobile" class="hidden-xs">\r\n    <a class="alain-ms__topbar-item-btn alain-ms__topbar-item-icon" routerLink="/">\r\n      <i nz-icon nzType="shopping-cart"></i>\r\n    </a>\r\n  </div> --\x3e\r\n  \x3c!-- 语言 --\x3e\r\n  <ms-langs></ms-langs>\r\n  \x3c!-- 用户 --\x3e\r\n  <ms-user></ms-user>\r\n</div>\r\n',host:{"[class.alain-ms__topbar]":"true","[class.alain-ms__topbar-single]":"allNav"},changeDetection:n.ChangeDetectionStrategy.OnPush}]}],J.ctorParameters=function(){return[{type:A},{type:n.ChangeDetectorRef},{type:c.EnvironmentService}]},J.propDecorators={allNav:[{type:n.Input}]};var K=function(){};K.decorators=[{type:n.Component,args:[{selector:"help",template:'<div class="ms-help__wrap" nz-popover nzPopoverTrigger="click" [nzPopoverContent]="helpTpl">\r\n  <span class="ms-help__text">\r\n    咨询·建议\r\n  </span>\r\n</div>\r\n<ng-template #helpTpl>\r\n  <div class="d-flex align-items-center mb-sm">\r\n    <i nz-icon nzType="phone" class="mr-sm text-xl"></i>\r\n    <a routerLink="/">\r\n      售前咨询电话\r\n      <div class="text-orange text-xs">xxxx 转 1</div>\r\n    </a>\r\n  </div>\r\n  <div class="d-flex align-items-center mb-sm">\r\n    <i nz-icon nzType="customer-service" class="mr-sm text-xl"></i>\r\n    <a routerLink="/smart">\r\n      智能顾问\r\n      <div class="text-grey text-xs">智能诊断，秒级解答</div>\r\n    </a>\r\n  </div>\r\n  <div class="d-flex align-items-center">\r\n    <i nz-icon nzType="edit" class="mr-sm text-xl"></i>\r\n    <a routerLink="/">\r\n      建议反馈\r\n      <div class="text-grey text-xs">XXX不是完美的，我们渴望您的建议</div>\r\n    </a>\r\n  </div>\r\n</ng-template>\r\n',host:{"[class.ms-help]":"true"},changeDetection:n.ChangeDetectionStrategy.OnPush}]}];var Y=function(){function t(t){this.router=t,this.linkToChanged=new n.EventEmitter}return t.prototype._click=function(t){var e=this,n=this.i,r=n.link,i=n.target;if(null!=i)return"_blank"===i?window.open(r):window.location.href=r,void this.linkToChanged.emit(t);setTimeout((function(){e.router.navigateByUrl(r).then((function(){return e.linkToChanged.emit(t)}))}))},t}();Y.decorators=[{type:n.Directive,args:[{selector:"[link-to]"}]}],Y.ctorParameters=function(){return[{type:p.Router}]},Y.propDecorators={i:[{type:n.Input,args:["link-to"]}],linkToChanged:[{type:n.Output}],_click:[{type:n.HostListener,args:["click",["$event"]]}]};var Z=function(){function t(t,e,n,r){this.router=t,this.srv=e,this.menuSrv=n,this.cdr=r,this._menus=null,this.autoTitle=!0,this.recursiveBreadcrumb=!0}return Object.defineProperty(t.prototype,"menus",{get:function(){return this._menus||(this._menus=this.menuSrv.getPathByUrl(this.router.url.split("?")[0],this.recursiveBreadcrumb)),this._menus},enumerable:!1,configurable:!0}),t.prototype.setTitle=function(){if(void 0===this.title&&this.autoTitle&&this.menus.length>0){var t=this.menus[this.menus.length-1];this.title=t.text}this.cdr.detectChanges()},t.prototype.ngAfterViewInit=function(){var t=this;this.router$=r.merge(this.router.events.pipe(i.filter((function(t){return t instanceof p.NavigationEnd}))),this.srv.notify,this.menuSrv.change).subscribe((function(){t._menus=null,t.setTitle()}))},t.prototype.ngOnDestroy=function(){this.router$.unsubscribe()},t}();Z.decorators=[{type:n.Component,args:[{selector:"page-bar",template:'<div class="ms-page-bar__title">\r\n  <h2 *ngIf="title" class="ms-page-bar__title-main">\r\n    <ng-container *nzStringTemplateOutlet="title">{{ title | abpLocalization }}</ng-container>\r\n  </h2>\r\n  <div *ngIf="subTitle" class="ms-page-bar__title-sub">\r\n    <ng-container *nzStringTemplateOutlet="subTitle">{{ subTitle | abpLocalization }}</ng-container>\r\n  </div>\r\n</div>\r\n<div class="ms-page-bar__action">\r\n  <ng-content></ng-content>\r\n</div>\r\n',host:{"[class.ms-page-bar]":"true"},changeDetection:n.ChangeDetectionStrategy.OnPush}]}],Z.ctorParameters=function(){return[{type:p.Router},{type:w},{type:o.MenuService},{type:n.ChangeDetectorRef}]},Z.propDecorators={autoTitle:[{type:n.Input}],recursiveBreadcrumb:[{type:n.Input}],title:[{type:n.Input}],subTitle:[{type:n.Input}]},N([s.InputBoolean(),M("design:type",Object)],Z.prototype,"autoTitle",void 0),N([s.InputBoolean(),M("design:type",Object)],Z.prototype,"recursiveBreadcrumb",void 0);var Q=function(){function t(t,e,n,r,i){this.srv=t,this.router=e,this.titSrv=n,this.menuSrv=r,this.cdr=i,this._config={},this._menus=[]}return Object.defineProperty(t.prototype,"config",{get:function(){return this._config},set:function(t){var e=t.title,n=(t.titleI18n,t.backHref);t.doc,t.docI18n;this._config.title=e,this._config.backHref=n||""},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"list",{get:function(){return this._menus},set:function(t){this.menuSrv.add(t),this.menuSrv.visit(t,(function(t){return t.active=!0})),this._menus=this.menuSrv.menus},enumerable:!1,configurable:!0}),t.prototype.to=function(t,e){e.preventDefault(),t&&this.router.navigateByUrl(t)},t.prototype.toggle=function(){this.srv.hideNav=!this.srv.hideNav,this.srv.triggerNotify("page-nav")},t.prototype.ngOnChanges=function(){this.cdr.detectChanges()},t}();Q.decorators=[{type:n.Component,args:[{selector:"page-nav",template:'<div class="ms-page-nav__body">\r\n  <div class="ms-page-nav__stage">\r\n    <div class="ms-page-nav__scene ms-page-nav__scene-main">\r\n      <div\r\n        class="ms-page-nav__title"\r\n        [ngClass]="{ \'ms-page-nav__back\': config.backHref }"\r\n        (click)="to(config.backHref!, $event)"\r\n        [title]="config.backHref ? (\'ms.page-nav.back\' | i18n) : \'\'"\r\n      >\r\n        <i *ngIf="config.backHref" nz-icon nzType="left"></i>\r\n        {{ config.title | abpLocalization }}\r\n      </div>\r\n      <div class="ms-page-nav__list scrollbar">\r\n        <ng-template #treeTpl let-ls let-level="level">\r\n          <li *ngFor="let i of ls">\r\n            <ng-container *ngIf="i.children.length == 0">\r\n              <div\r\n                *ngIf="i.link"\r\n                class="ms-page-nav__item"\r\n                role="treeitem"\r\n                routerLink="{{ i.link }}"\r\n                routerLinkActive="ms-page-nav__item-active"\r\n              >\r\n                <span class="ms-page-nav__item-icon"></span>\r\n                <span class="ms-page-nav__item-tit">{{ i.text }}</span>\r\n                <span *ngIf="i.badge" class="ms-page-nav__item-badge">{{ i.badge }}</span>\r\n              </div>\r\n              <a *ngIf="!i.link" [href]="i.externalLink" [target]="i.target" class="ms-page-nav__item" role="treeitem">\r\n                <span class="ms-page-nav__item-icon"></span>\r\n                <span class="ms-page-nav__item-tit">{{ i.text }}</span>\r\n                <span *ngIf="i.badge" class="ms-page-nav__item-badge">{{ i.badge }}</span>\r\n              </a>\r\n            </ng-container>\r\n            <ng-container *ngIf="i.children.length > 0">\r\n              <div class="ms-page-nav__item" role="treeitem" (click)="i.active = !i.active">\r\n                <span class="ms-page-nav__item-icon">\r\n                  <i nz-icon [nzType]="i.active ? \'caret-down\' : \'caret-right\'"></i>\r\n                </span>\r\n                <span class="ms-page-nav__item-tit">{{ i.text }}</span>\r\n              </div>\r\n              <ul role="tree" class="list-unstyled" [ngClass]="{ \'d-none\': !i.active }">\r\n                <ng-container *ngTemplateOutlet="treeTpl; context: { $implicit: i.children, level: level + 1 }"></ng-container>\r\n              </ul>\r\n            </ng-container>\r\n          </li>\r\n        </ng-template>\r\n        <ul role="tree" class="list-unstyled">\r\n          <ng-container *ngTemplateOutlet="treeTpl; context: { $implicit: list, level: 1 }"></ng-container>\r\n        </ul>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</div>\r\n<div class="ms-page-nav__control" (click)="toggle()">\r\n  <div class="ms-page-nav__control-wrap">\r\n    <div class="ms-page-nav__control-bg"></div>\r\n    <div class="ms-page-nav__control-btn">\r\n      <i nz-icon nzType="menu-fold"></i>\r\n    </div>\r\n  </div>\r\n</div>\r\n',changeDetection:n.ChangeDetectionStrategy.OnPush}]}],Q.ctorParameters=function(){return[{type:w},{type:p.Router},{type:o.TitleService},{type:o.MenuService},{type:n.ChangeDetectorRef}]},Q.propDecorators={config:[{type:n.Input}],list:[{type:n.Input}]};var tt=function(){function t(t){this.brand=t,this.wide=!0,this.fixed=!1}return t.prototype.ngOnInit=function(){},t.prototype.ngOnChanges=function(){this.brand.setFixed(this.fixed)},t.prototype.ngOnDestroy=function(){this.brand.setFixed(!1)},t}();tt.decorators=[{type:n.Component,args:[{selector:"page-single",template:'<div class="ms-page-single__bar">\r\n  <div class="ms-page-single__wrap" [ngClass]="{ \'ms-page-single__wide\': wide }">\r\n    <div class="ms-page-single__bar-desc">\r\n      <div *ngIf="title" class="ms-page-single__bar-title">\r\n        <ng-container *nzStringTemplateOutlet="title">{{ title }}</ng-container>\r\n      </div>\r\n      <div *ngIf="subTitle" class="ms-page-single__bar-sub-title">\r\n        <ng-container *nzStringTemplateOutlet="subTitle">{{ subTitle }}</ng-container>\r\n      </div>\r\n    </div>\r\n    <div *ngIf="extra" class="ms-page-single__bar-extra">\r\n      <ng-container *nzStringTemplateOutlet="extra">{{ extra }}</ng-container>\r\n    </div>\r\n  </div>\r\n</div>\r\n<div class="ms-page-single__wrap ms-page-single__body" [ngClass]="{ \'ms-page-single__wide\': wide }">\r\n  <ng-content></ng-content>\r\n</div>\r\n',host:{"[class.ms-page-single]":"true"},changeDetection:n.ChangeDetectionStrategy.OnPush}]}],tt.ctorParameters=function(){return[{type:w}]},tt.propDecorators={wide:[{type:n.Input}],fixed:[{type:n.Input}],title:[{type:n.Input}],subTitle:[{type:n.Input}],extra:[{type:n.Input}]},N([s.InputBoolean(),M("design:type",Object)],tt.prototype,"wide",void 0),N([s.InputBoolean(),M("design:type",Object)],tt.prototype,"fixed",void 0);var et=function(){};et.decorators=[{type:n.Component,args:[{selector:"panel",template:'<div class="ms-panel__hd">\r\n  <div *ngIf="title" class="ms-panel__hd-title">\r\n    <ng-container *nzStringTemplateOutlet="title">{{ title }}</ng-container>\r\n  </div>\r\n  <div *ngIf="extra" class="ms-panel__hd-extra">\r\n    <ng-container *nzStringTemplateOutlet="extra">{{ extra }}</ng-container>\r\n  </div>\r\n</div>\r\n<div class="ms-panel__bd">\r\n  <ng-content></ng-content>\r\n</div>\r\n',host:{"[class.ms-panel]":"true"},changeDetection:n.ChangeDetectionStrategy.OnPush}]}],et.propDecorators={title:[{type:n.Input}],extra:[{type:n.Input}]};var nt=function(){function t(t){this.srv=t,this.nav=!1,this.navConfig={},this.navList=[],this.hasConsoleCss=!0}return Object.defineProperty(t.prototype,"hideNav",{get:function(){return this.srv.hideNav},enumerable:!1,configurable:!0}),t}();nt.decorators=[{type:n.Component,args:[{selector:"service-layout",template:'<div class="alain-ms__product" [ngClass]="{ \'alain-ms__product-col-1\': nav && !hideNav }">\r\n  <page-nav *ngIf="nav" [config]="navConfig" [list]="navList"></page-nav>\r\n  <div class="alain-ms__product-body scrollbar">\r\n    <div [ngClass]="{\'alain-ms__console\':hasConsoleCss}">\r\n      <ng-content></ng-content>\r\n    </div>\r\n  </div>\r\n</div>\r\n'}]}],nt.ctorParameters=function(){return[{type:w}]},nt.propDecorators={nav:[{type:n.Input}],navConfig:[{type:n.Input}],navList:[{type:n.Input}],hasConsoleCss:[{type:n.Input}]},N([s.InputBoolean(),M("design:type",Object)],nt.prototype,"nav",void 0);var rt=[K,Y,Z,Q,tt,et,nt],it=function(){};it.decorators=[{type:n.NgModule,args:[{imports:[e.CommonModule,p.RouterModule,f.FormsModule,o.AlainThemeModule.forChild(),y.NzPopoverModule,v.NzIconModule,m.NzOutletModule,c.LocalizationModule],declarations:rt,exports:rt}]}];var at=function(){function t(t,e,n,r,i,a,o,s,c,l){var u=this;this.el=o,this.renderer=s,this.srv=c,this.doc=l,this.isFetching=!1,this.hasAllNav=!1,this.hasSidebar=!0;var d=Object.assign({hasAllNav:!1,hasSidebar:!0},r.snapshot.data);this.hasAllNav=!0===d.hasAllNav,this.hasSidebar=!0===d.hasSidebar,n.events.subscribe((function(t){if(!u.isFetching&&t instanceof p.RouteConfigLoadStart&&(u.isFetching=!0,u.scrollToTop()),t instanceof p.NavigationError)return u.isFetching=!1,void i.error("无法加载"+t.url+"路由",{nzDuration:3e3});t instanceof p.NavigationEnd&&(u.isFetching=!1,a.exists(t.url)||u.scrollToTop())}));var g={"screen-xs":"(max-width: 575px)","screen-sm":"(min-width: 576px) and (max-width: 767px)","screen-md":"(min-width: 768px) and (max-width: 991px)","screen-lg":"(min-width: 992px) and (max-width: 1199px)","screen-xl":"(min-width: 1200px)"};t.observe(["(min-width: 1200px)","(min-width: 992px) and (max-width: 1199px)","(min-width: 768px) and (max-width: 991px)","(min-width: 576px) and (max-width: 767px)","(max-width: 575px)"]).subscribe((function(){u.queryCls=Object.keys(g).find((function(t){return e.matchMedia(g[t]).matches})),u.setClass()}))}return Object.defineProperty(t.prototype,"isMobile",{get:function(){return this.srv.isMobile},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"body",{get:function(){return this.doc.body},enumerable:!1,configurable:!0}),t.prototype.scrollToTop=function(){var t=this.doc.querySelector(".alain-ms__product-body");t&&(t.scrollTop=0)},t.prototype.setClass=function(){var t,e=this,n=e.el,r=e.renderer,i=e.queryCls;s.updateHostClass(n.nativeElement,r,((t={})["alain-ms"]=!0,t[i]=!0,t),!0)},t.prototype.setBodyClass=function(){var t,e=this.srv.layout,n=e.hasTopbar,r=e.hasSidebar,i=e.hasFixed,a=e.colorWeak;s.updateHostClass(this.body,this.renderer,((t={"color-weak":a})["alain-ms__has-topbar"]=n,t["alain-ms__has-sidebar"]=r,t["alain-ms__has-fixed"]=i,t))},t.prototype.ngOnInit=function(){var t=this;this.notify$=this.srv.notify.subscribe((function(){t.setClass(),t.setBodyClass()}))},t.prototype.ngOnDestroy=function(){this.notify$.unsubscribe(),this.body.classList.remove("alain-ms__has-topbar","alain-ms__has-sidebar","alain-ms__has-fixed")},t}();at.decorators=[{type:n.Component,args:[{selector:"layout-ms",template:'<ms-topbar [allNav]="hasAllNav"></ms-topbar>\r\n<ms-sidebar *ngIf="hasSidebar"></ms-sidebar>\r\n<div class="brand-page-loading" [hidden]="!isFetching">\r\n  <nz-spin nzSpinning></nz-spin>\r\n</div>\r\n<div class="alain-ms__body" [hidden]="isFetching">\r\n  <router-outlet></router-outlet>\r\n</div>\r\n\x3c!-- <help></help>\r\n<theme-btn></theme-btn> --\x3e\r\n'}]}],at.ctorParameters=function(){return[{type:a.BreakpointObserver},{type:a.MediaMatcher},{type:p.Router},{type:p.ActivatedRoute},{type:g.NzMessageService},{type:b.ReuseTabService},{type:n.ElementRef},{type:n.Renderer2},{type:w},{type:void 0,decorators:[{type:n.Inject,args:[e.DOCUMENT]}]}]};var ot=[{provide:n.APP_INITIALIZER,useFactory:st,deps:[n.Injector],multi:!0}];function st(t){return function(){!function(t){var e=t.get(p.Router),n=t.get(G);e.events.pipe(i.filter((function(t){return t instanceof p.ResolveEnd}))).subscribe((function(t){n.fetchPageNavs(t.state)}))}(t)}}var ct=[$,H,F,U,E,B],lt=D([at,X,J],ct),ut=[K,Q,Z,tt,et,nt,Y],pt=function(){function t(){}return t.forRoot=function(){return{ngModule:t,providers:[ot]}},t}();pt.decorators=[{type:n.NgModule,args:[{imports:[c.CoreModule,p.RouterModule,f.FormsModule,_.DragDropModule,it,O.NzSpinModule,C.NzAnchorModule,x.NzAutocompleteModule,P.NzAvatarModule,z.NzDividerModule,k.NzInputModule,v.NzIconModule,o.AlainThemeModule.forChild(),S.ThemeBtnModule],declarations:D(lt),exports:D(lt,[ut])}]}],pt.ctorParameters=function(){return[]},t.BrandService=w,t.LayoutModule=pt,t.LayoutStateService=G,t.MSAllNavComponent=$,t.MSAllNavService=R,t.MSHelpComponent=K,t.MSLangsComponent=F,t.MSLayoutComponent=at,t.MSLinkToDirective=Y,t.MSNoticeComponent=E,t.MSPageBarComponent=Z,t.MSPageNavComponent=Q,t.MSPageSingleComponent=tt,t.MSPanelComponent=et,t.MSProductService=W,t.MSRegionComponent=B,t.MSRegionService=q,t.MSSearchComponent=H,t.MSServiceLayoutComponent=nt,t.MSSharedModule=it,t.MSSidebarComponent=X,t.MSTopbarComponent=J,t.MSTopbarService=A,t.MSUserComponent=U,t.MS_COMPONENTS=lt,t.MS_SHARED_COMPONENTS=ut,t.MS_WIDGETS=ct,t.RoutesProcessor=V,t.ɵa=ot,t.ɵb=st,Object.defineProperty(t,"__esModule",{value:!0})}));
//# sourceMappingURL=fs-tw-theme-alain-ms-layout.umd.min.js.map