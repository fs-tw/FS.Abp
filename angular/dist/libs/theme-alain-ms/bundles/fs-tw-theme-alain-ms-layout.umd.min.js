!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@angular/common"),require("@angular/core"),require("rxjs"),require("rxjs/operators"),require("@abp/ng.core"),require("@delon/theme"),require("@delon/util"),require("@angular/cdk/layout"),require("ng-zorro-antd/icon"),require("ng-zorro-antd/spin"),require("@angular/router"),require("snq"),require("@delon/auth"),require("ng-zorro-antd/message"),require("ng-zorro-antd/input"),require("@angular/forms"),require("ng-zorro-antd/auto-complete"),require("@fs-tw/account"),require("ng-zorro-antd/anchor"),require("ng-zorro-antd/core/outlet"),require("ng-zorro-antd/popover"),require("@delon/abc/reuse-tab"),require("@angular/cdk/drag-drop"),require("@delon/theme/theme-btn"),require("ng-zorro-antd/avatar"),require("ng-zorro-antd/divider")):"function"==typeof define&&define.amd?define("@fs-tw/theme-alain-ms/layout",["exports","@angular/common","@angular/core","rxjs","rxjs/operators","@abp/ng.core","@delon/theme","@delon/util","@angular/cdk/layout","ng-zorro-antd/icon","ng-zorro-antd/spin","@angular/router","snq","@delon/auth","ng-zorro-antd/message","ng-zorro-antd/input","@angular/forms","ng-zorro-antd/auto-complete","@fs-tw/account","ng-zorro-antd/anchor","ng-zorro-antd/core/outlet","ng-zorro-antd/popover","@delon/abc/reuse-tab","@angular/cdk/drag-drop","@delon/theme/theme-btn","ng-zorro-antd/avatar","ng-zorro-antd/divider"],t):t(((e="undefined"!=typeof globalThis?globalThis:e||self)["fs-tw"]=e["fs-tw"]||{},e["fs-tw"]["theme-alain-ms"]=e["fs-tw"]["theme-alain-ms"]||{},e["fs-tw"]["theme-alain-ms"].layout={}),e.ng.common,e.ng.core,e.rxjs,e.rxjs.operators,e.i1,e.i3,e.i3$1,e.ng.cdk.layout,e.i3$2,e.i5,e.ng.router,e.snq,e.auth,e.i4$1,e.i4$2,e.ng.forms,e.i6,e.i1$2,e.i6$1,e.i5$2,e.i1$3,e.i4$3,e.ng.cdk.dragDrop,e.themeBtn,e.avatar,e.divider)}(this,(function(e,t,n,r,i,a,o,l,s,c,p,u,d,m,f,g,v,h,y,_,b,C,S,x,I,M,E){"use strict";function O(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var z,N=O(d);(z=e.Layout||(e.Layout={})).defaultNavConfig={title:"系統管理",doc:"系統管理"},z.defaultSidebarConfig={hasSidebar:!0,hasAllNav:!1,hasPageNav:!0,hasProductNav:!1};function j(e,t,n,r){var i,a=arguments.length,o=a<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,r);else for(var l=e.length-1;l>=0;l--)(i=e[l])&&(o=(a<3?i(o):a>3?i(t,n,o):i(t,n))||o);return a>3&&o&&Object.defineProperty(t,n,o),o}function D(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}Object.create;function k(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,a=n.call(e),o=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)o.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(i)throw i.error}}return o}function w(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(k(arguments[t]));return e}Object.create;var T=function(){function e(e,t,n,r){this.routesService=e,this.localizationPipe=t,this.http=n,this.arrSrv=r}return Object.defineProperty(e.prototype,"allL2",{get:function(){return this._data.nav.filter((function(e){return e.children&&e.children.length>0}))},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"allPanel",{get:function(){return this._data.nav.reduce((function(e,t){return e.concat(t.children?t.children:t)}),[])},enumerable:!1,configurable:!0}),e.prototype.getData=function(){return this._data?r.of(this._data):this.getByHttp()},e.prototype.fixData=function(e){var t=function(e){if(e.left){e.leftColumn=e.leftColumn||2;var t=new Array(e.leftColumn).fill({}).map((function(e,t){return{list:[],count:0,idx:t}}));e.left.filter((function(e){return e.list})).forEach((function(e){var n=w(t).sort((function(e,t){return e.count-t.count}))[0].idx;t[n].list.push(e),t[n].count+=e.list.length})),e._left=t}};return e.nav.forEach((function(e){e.level=1,e.children?e.children.forEach((function(n){n.parent=e,n.level=2,t(n)})):t(e)})),e},e.prototype.getByHttp=function(){var e=this;return this.routesService.tree$.pipe(i.map((function(t){var n={navBottom:[],bottomText:"Further.",nav:[]};return n.nav=t.filter((function(t){return!e.routesService.hide(t)})).map((function(t){var r={text:e.localizationPipe.transform(t.name),left:[]};return t.children.filter((function(t){return!e.routesService.hide(t)})).forEach((function(t){var i;(null===(i=null==t?void 0:t.children)||void 0===i?void 0:i.length)>0?r.left.push({text:e.localizationPipe.transform(t.name),list:t.children.map((function(t){return{text:e.localizationPipe.transform(t.name),link:t.path}}))}):n.navBottom.push({text:e.localizationPipe.transform(t.name),link:t.path})})),r})),e._data=e.fixData(n),e._data})))},e.prototype.refreshActive=function(e){for(this.arrSrv.visitTree(this._data.nav,(function(e){e.active=!1}));e;)e.active=!0,e=e.parent},e}();T.ɵfac=function(e){return new(e||T)(n.ɵɵinject(a.RoutesService),n.ɵɵinject(a.LocalizationPipe),n.ɵɵinject(o._HttpClient),n.ɵɵinject(l.ArrayService))},T.ɵprov=n.ɵɵdefineInjectable({token:T,factory:T.ɵfac,providedIn:"root"}),("undefined"==typeof ngDevMode||ngDevMode)&&n.ɵsetClassMetadata(T,[{type:n.Injectable,args:[{providedIn:"root"}]}],(function(){return[{type:a.RoutesService},{type:a.LocalizationPipe},{type:o._HttpClient},{type:l.ArrayService}]}),null);var P=function(){function e(e,t){var n=this;this.settings=t,this.notify$=new r.BehaviorSubject(null),this._isMobile=!1,this.topHeight=50,this.hideNav=!1,t.setLayout(Object.assign(Object.assign({},t.layout),{hasTopbar:!0,hasSidebar:!1,hasFixed:!1}));var i="only screen and (max-width: 767.99px)";e.observe(i).subscribe((function(e){return n.checkMedia(e.matches)})),this.checkMedia(e.isMatched(i))}return Object.defineProperty(e.prototype,"notify",{get:function(){return this.notify$.asObservable()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isMobile",{get:function(){return this._isMobile},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"layout",{get:function(){return this.settings.layout},enumerable:!1,configurable:!0}),e.prototype.checkMedia=function(e){this._isMobile=e,this.layout.collapsed=this._isMobile,this.notify$.next("mobile")},e.prototype.setLayout=function(e,t){this.settings.setLayout(e,t),this.notify$.next("layout")},e.prototype.setTopbar=function(e){this.setLayout("hasTopbar",e)},e.prototype.setSidebar=function(e){this.setLayout("hasSidebar",e)},e.prototype.setFixed=function(e){this.setLayout("hasFixed",e)},e.prototype.triggerNotify=function(e){void 0===e&&(e="custom"),this.notify$.next(e)},e.prototype.ngOnDestroy=function(){this.notify$.unsubscribe()},e}();P.ɵfac=function(e){return new(e||P)(n.ɵɵinject(s.BreakpointObserver),n.ɵɵinject(o.SettingsService))},P.ɵprov=n.ɵɵdefineInjectable({token:P,factory:P.ɵfac,providedIn:"root"}),("undefined"==typeof ngDevMode||ngDevMode)&&n.ɵsetClassMetadata(P,[{type:n.Injectable,args:[{providedIn:"root"}]}],(function(){return[{type:s.BreakpointObserver},{type:o.SettingsService}]}),null);var F=function(){function e(e){this.router=e,this.linkToChanged=new n.EventEmitter}return e.prototype._click=function(e){var t=this,n=this.i,r=n.link,i=n.target;if(null!=i)return"_blank"===i?window.open(r):window.location.href=r,void this.linkToChanged.emit(e);setTimeout((function(){t.router.navigateByUrl(r).then((function(){return t.linkToChanged.emit(e)}))}))},e}();F.ɵfac=function(e){return new(e||F)(n.ɵɵdirectiveInject(u.Router))},F.ɵdir=n.ɵɵdefineDirective({type:F,selectors:[["","link-to",""]],hostBindings:function(e,t){1&e&&n.ɵɵlistener("click",(function(e){return t._click(e)}))},inputs:{i:["link-to","i"]},outputs:{linkToChanged:"linkToChanged"}}),("undefined"==typeof ngDevMode||ngDevMode)&&n.ɵsetClassMetadata(F,[{type:n.Directive,args:[{selector:"[link-to]"}]}],(function(){return[{type:u.Router}]}),{i:[{type:n.Input,args:["link-to"]}],linkToChanged:[{type:n.Output}],_click:[{type:n.HostListener,args:["click",["$event"]]}]});var R=["dropdown"];function $(e,t){1&e&&n.ɵɵelement(0,"nz-spin")}var L=function(e){return{"alain-ms__an-menu-item--active":e}};function A(e,t){if(1&e){var r=n.ɵɵgetCurrentView();n.ɵɵelementStart(0,"li",10),n.ɵɵlistener("mouseenter",(function(){n.ɵɵrestoreView(r);var e=t.$implicit;return n.ɵɵnextContext(2).mouseHandle(e,!0)})),n.ɵɵtext(1),n.ɵɵelement(2,"i",11),n.ɵɵelementEnd()}if(2&e){var i=t.$implicit;n.ɵɵproperty("ngClass",n.ɵɵpureFunction1(2,L,i.active)),n.ɵɵadvance(1),n.ɵɵtextInterpolate1(" ",i.text," ")}}function B(e,t){if(1&e&&(n.ɵɵelementStart(0,"ul",8),n.ɵɵtemplate(1,A,3,4,"li",9),n.ɵɵelementEnd()),2&e){var r=t.$implicit;n.ɵɵadvance(1),n.ɵɵproperty("ngForOf",r)}}function V(e,t){if(1&e&&(n.ɵɵelementStart(0,"span",19),n.ɵɵtext(1),n.ɵɵelementEnd()),2&e){var r=n.ɵɵnextContext().$implicit;n.ɵɵadvance(1),n.ɵɵtextInterpolate(r.tip)}}function q(e,t){if(1&e){var r=n.ɵɵgetCurrentView();n.ɵɵelementStart(0,"a",17),n.ɵɵlistener("linkToChanged",(function(){return n.ɵɵrestoreView(r),n.ɵɵnextContext(3)._leave()})),n.ɵɵtext(1),n.ɵɵtemplate(2,V,2,1,"span",18),n.ɵɵelementEnd()}if(2&e){var i=t.$implicit;n.ɵɵproperty("link-to",i),n.ɵɵadvance(1),n.ɵɵtextInterpolate1(" ",i.text," "),n.ɵɵadvance(1),n.ɵɵproperty("ngIf",i.tip)}}function H(e,t){if(1&e&&(n.ɵɵelementStart(0,"div",13),n.ɵɵelementStart(1,"h3",14),n.ɵɵtext(2),n.ɵɵelementEnd(),n.ɵɵelementStart(3,"div",15),n.ɵɵtemplate(4,q,3,3,"a",16),n.ɵɵelementEnd(),n.ɵɵelementEnd()),2&e){var r=t.$implicit;n.ɵɵadvance(2),n.ɵɵtextInterpolate(r.text),n.ɵɵadvance(2),n.ɵɵproperty("ngForOf",r.list)}}function U(e,t){if(1&e&&n.ɵɵtemplate(0,H,5,2,"div",12),2&e){var r=t.$implicit;n.ɵɵproperty("ngForOf",r)}}function Q(e,t){}function W(e,t){if(1&e){var r=n.ɵɵgetCurrentView();n.ɵɵelementStart(0,"a",30),n.ɵɵlistener("linkToChanged",(function(){return n.ɵɵrestoreView(r),n.ɵɵnextContext(3)._leave()})),n.ɵɵtext(1),n.ɵɵelement(2,"i",31),n.ɵɵelementEnd()}if(2&e){var i=t.$implicit;n.ɵɵproperty("link-to",i),n.ɵɵadvance(1),n.ɵɵtextInterpolate1(" ",i.text," ")}}function J(e,t){if(1&e&&(n.ɵɵelementStart(0,"div",28),n.ɵɵtemplate(1,W,3,2,"a",29),n.ɵɵelementEnd()),2&e){var r=n.ɵɵnextContext(2);n.ɵɵadvance(1),n.ɵɵproperty("ngForOf",r.data.navBottom)}}function G(e,t){if(1&e&&(n.ɵɵelementStart(0,"div",32),n.ɵɵtext(1),n.ɵɵelementEnd()),2&e){var r=n.ɵɵnextContext(2);n.ɵɵadvance(1),n.ɵɵtextInterpolate(r.data.bottomText)}}function X(e,t){}var K=function(e){return{"alain-ms__an-level2-active":e}},Y=function(e){return{$implicit:e}};function Z(e,t){if(1&e&&(n.ɵɵelementStart(0,"div",33),n.ɵɵelementStart(1,"div",22),n.ɵɵtemplate(2,X,0,0,"ng-template",23),n.ɵɵelementEnd(),n.ɵɵelementEnd()),2&e){var r=t.$implicit;n.ɵɵnextContext(2);var i=n.ɵɵreference(4);n.ɵɵproperty("ngClass",n.ɵɵpureFunction1(3,K,r.active)),n.ɵɵadvance(2),n.ɵɵproperty("ngTemplateOutlet",i)("ngTemplateOutletContext",n.ɵɵpureFunction1(5,Y,r.children))}}function ee(e,t){}function te(e,t){if(1&e&&(n.ɵɵelementStart(0,"div",39),n.ɵɵtemplate(1,ee,0,0,"ng-template",23),n.ɵɵelementEnd()),2&e){var r=t.$implicit;n.ɵɵnextContext(4);var i=n.ɵɵreference(6);n.ɵɵadvance(1),n.ɵɵproperty("ngTemplateOutlet",i)("ngTemplateOutletContext",n.ɵɵpureFunction1(2,Y,r.list))}}function ne(e,t){if(1&e&&(n.ɵɵelementStart(0,"div",37),n.ɵɵtemplate(1,te,2,4,"div",38),n.ɵɵelementEnd()),2&e){var r=n.ɵɵnextContext().$implicit;n.ɵɵadvance(1),n.ɵɵproperty("ngForOf",r._left)}}function re(e,t){}function ie(e,t){if(1&e&&(n.ɵɵelementStart(0,"div",40),n.ɵɵtemplate(1,re,0,0,"ng-template",23),n.ɵɵelementEnd()),2&e){var r=n.ɵɵnextContext().$implicit;n.ɵɵnextContext(2);var i=n.ɵɵreference(6);n.ɵɵadvance(1),n.ɵɵproperty("ngTemplateOutlet",i)("ngTemplateOutletContext",n.ɵɵpureFunction1(2,Y,r.right))}}var ae=function(e){return{"alain-ms__an-content-active":e}};function oe(e,t){if(1&e&&(n.ɵɵelementStart(0,"div",34),n.ɵɵtemplate(1,ne,2,1,"div",35),n.ɵɵtemplate(2,ie,2,4,"div",36),n.ɵɵelementEnd()),2&e){var r=t.$implicit;n.ɵɵclassMapInterpolate2("alain-ms__an-content alain-ms__an-level",r.level,"-content alain-ms__an-left-col-",r.leftColumn,""),n.ɵɵproperty("ngClass",n.ɵɵpureFunction1(7,ae,r.active)),n.ɵɵadvance(1),n.ɵɵproperty("ngIf",r._left&&r._left.length>0),n.ɵɵadvance(1),n.ɵɵproperty("ngIf",r.right&&r.right.length>0)}}function le(e,t){if(1&e&&(n.ɵɵelementStart(0,"div",20),n.ɵɵelementStart(1,"div",21),n.ɵɵelementStart(2,"div",22),n.ɵɵtemplate(3,Q,0,0,"ng-template",23),n.ɵɵtemplate(4,J,2,1,"div",24),n.ɵɵtemplate(5,G,2,1,"div",25),n.ɵɵelementEnd(),n.ɵɵelementEnd(),n.ɵɵtemplate(6,Z,3,7,"div",26),n.ɵɵtemplate(7,oe,3,9,"div",27),n.ɵɵelementEnd()),2&e){var r=n.ɵɵnextContext(),i=n.ɵɵreference(4);n.ɵɵadvance(3),n.ɵɵproperty("ngTemplateOutlet",i)("ngTemplateOutletContext",n.ɵɵpureFunction1(6,Y,r.data.nav)),n.ɵɵadvance(1),n.ɵɵproperty("ngIf",r.data.navBottom),n.ɵɵadvance(1),n.ɵɵproperty("ngIf",r.data.bottomText),n.ɵɵadvance(1),n.ɵɵproperty("ngForOf",r.allL2),n.ɵɵadvance(1),n.ɵɵproperty("ngForOf",r.allPanel)}}var se=function(){function e(e,t,n,i){this.srv=e,this.brandSrv=t,this.cdr=n,this.doc=i,this.unsubscribe$=new r.Subject,this.loading=!1,this.$mouse=new r.Subject,this.open=!1}return Object.defineProperty(e.prototype,"allL2",{get:function(){return this.srv.allL2},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"allPanel",{get:function(){return this.srv.allPanel},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"validOpen",{get:function(){return this.data&&this.open},enumerable:!1,configurable:!0}),e.prototype.handleOpen=function(e){this.doc.body.classList[e?"add":"remove"]("alain-ms__an-body"),this.open=e,this.cdr.markForCheck(),this.updateHeight().load()},e.prototype.load=function(){var e=this;this.loading||this.data||(this.loading=!0,this.srv.getData().subscribe((function(t){e.data=t,e.cdr.markForCheck()})))},e.prototype.updateHeight=function(){var e=window.innerHeight-this.brandSrv.topHeight;return this.dropdownEl.nativeElement.style.height=e+"px",this},e.prototype._enter=function(){this.validOpen||this.handleOpen(!0)},e.prototype._leave=function(){this.handleOpen(!1)},e.prototype.mouseHandle=function(e,t){this.$mouse.next({i:e,status:t})},e.prototype.handleMouse=function(e){this.srv.refreshActive(e),this.cdr.detectChanges()},e.prototype.ngOnInit=function(){var e=this,t=this.$mouse,n=this.unsubscribe$;t.asObservable().pipe(i.takeUntil(n),i.auditTime(150)).subscribe((function(t){return e.handleMouse(t.i)}))},e.prototype.ngOnDestroy=function(){var e=this.unsubscribe$;e.next(),e.complete()},e}();function ce(e,t){if(1&e){var r=n.ɵɵgetCurrentView();n.ɵɵelementStart(0,"li",4),n.ɵɵlistener("click",(function(){n.ɵɵrestoreView(r);var e=t.$implicit;return n.ɵɵnextContext(2).change(e.cultureName)})),n.ɵɵelementStart(1,"a",5),n.ɵɵtext(2),n.ɵɵelementEnd(),n.ɵɵelementEnd()}if(2&e){var i=t.$implicit;n.ɵɵadvance(2),n.ɵɵtextInterpolate(null==i?null:i.displayName)}}function pe(e,t){if(1&e&&(n.ɵɵelementContainerStart(0),n.ɵɵelementStart(1,"span",1),n.ɵɵelementStart(2,"span"),n.ɵɵtext(3),n.ɵɵelementEnd(),n.ɵɵelementEnd(),n.ɵɵelementStart(4,"ul",2),n.ɵɵtemplate(5,ce,3,1,"li",3),n.ɵɵpipe(6,"async"),n.ɵɵelementEnd(),n.ɵɵelementContainerEnd()),2&e){var r=t.ngIf,i=n.ɵɵnextContext();n.ɵɵadvance(3),n.ɵɵtextInterpolate(r.displayName),n.ɵɵadvance(2),n.ɵɵproperty("ngForOf",n.ɵɵpipeBind1(6,2,i.dropdownLanguages$))}}se.ɵfac=function(e){return new(e||se)(n.ɵɵdirectiveInject(T),n.ɵɵdirectiveInject(P),n.ɵɵdirectiveInject(n.ChangeDetectorRef),n.ɵɵdirectiveInject(t.DOCUMENT))},se.ɵcmp=n.ɵɵdefineComponent({type:se,selectors:[["ms-all-nav"]],viewQuery:function(e,t){if(1&e&&n.ɵɵviewQuery(R,3),2&e){var r;n.ɵɵqueryRefresh(r=n.ɵɵloadQuery())&&(t.dropdownEl=r.first)}},hostVars:2,hostBindings:function(e,t){1&e&&n.ɵɵlistener("mouseenter",(function(){return t._enter()}))("mouseleave",(function(){return t._leave()})),2&e&&n.ɵɵclassProp("alain-ms__an-active",t.validOpen)},decls:10,vars:2,consts:[[1,"alain-ms__an-trigger"],["nz-icon","","nzType","bars"],[4,"ngIf"],["menuTpl",""],["categoryTpl",""],[1,"alain-ms__an-dropdown"],["dropdown",""],["class","alain-ms__an",4,"ngIf"],[1,"alain-ms__an-menu"],["class","alain-ms__an-menu-item",3,"ngClass","mouseenter",4,"ngFor","ngForOf"],[1,"alain-ms__an-menu-item",3,"ngClass","mouseenter"],["nz-icon","","nzType","right"],["class","alain-ms__an-category",4,"ngFor","ngForOf"],[1,"alain-ms__an-category"],[1,"alain-ms__an-category-title"],[1,"alain-ms__an-category-list"],["class","alain-ms__an-category-link",3,"link-to","linkToChanged",4,"ngFor","ngForOf"],[1,"alain-ms__an-category-link",3,"link-to","linkToChanged"],["class","alain-ms__an-category-tip",4,"ngIf"],[1,"alain-ms__an-category-tip"],[1,"alain-ms__an"],[1,"alain-ms__an-panel","alain-ms__an-panel-active","alain-ms__an-level1"],[1,"alain-ms__an-panel-inner"],[3,"ngTemplateOutlet","ngTemplateOutletContext"],["class","alain-ms__an-menu-bottom",4,"ngIf"],["class","alain-ms__an-bottom",4,"ngIf"],["class","alain-ms__an-panel alain-ms__an-level2",3,"ngClass",4,"ngFor","ngForOf"],[3,"class","ngClass",4,"ngFor","ngForOf"],[1,"alain-ms__an-menu-bottom"],[3,"link-to","linkToChanged",4,"ngFor","ngForOf"],[3,"link-to","linkToChanged"],["nz-icon","","nzType","share-alt"],[1,"alain-ms__an-bottom"],[1,"alain-ms__an-panel","alain-ms__an-level2",3,"ngClass"],[3,"ngClass"],["class","alain-ms__an-left",4,"ngIf"],["class","alain-ms__an-right",4,"ngIf"],[1,"alain-ms__an-left"],["class","alain-ms__an-left-col",4,"ngFor","ngForOf"],[1,"alain-ms__an-left-col"],[1,"alain-ms__an-right"]],template:function(e,t){1&e&&(n.ɵɵelementStart(0,"div",0),n.ɵɵelement(1,"i",1),n.ɵɵtemplate(2,$,1,0,"nz-spin",2),n.ɵɵelementEnd(),n.ɵɵtemplate(3,B,2,1,"ng-template",null,3,n.ɵɵtemplateRefExtractor),n.ɵɵtemplate(5,U,1,1,"ng-template",null,4,n.ɵɵtemplateRefExtractor),n.ɵɵelementStart(7,"div",5,6),n.ɵɵtemplate(9,le,8,8,"div",7),n.ɵɵelementEnd()),2&e&&(n.ɵɵadvance(2),n.ɵɵproperty("ngIf",t.open&&!t.data),n.ɵɵadvance(7),n.ɵɵproperty("ngIf",t.data))},directives:[c.NzIconDirective,t.NgIf,p.NzSpinComponent,t.NgForOf,t.NgClass,F,t.NgTemplateOutlet],encapsulation:2,changeDetection:0}),("undefined"==typeof ngDevMode||ngDevMode)&&n.ɵsetClassMetadata(se,[{type:n.Component,args:[{selector:"ms-all-nav",templateUrl:"./all-nav.component.html",host:{"[class.alain-ms__an-active]":"validOpen"},changeDetection:n.ChangeDetectionStrategy.OnPush}]}],(function(){return[{type:T},{type:P},{type:n.ChangeDetectorRef},{type:void 0,decorators:[{type:n.Inject,args:[t.DOCUMENT]}]}]}),{dropdownEl:[{type:n.ViewChild,args:["dropdown",{static:!0}]}],_enter:[{type:n.HostListener,args:["mouseenter"]}],_leave:[{type:n.HostListener,args:["mouseleave"]}]});var ue=function(){function e(e,t){this.configState=e,this.sessionState=t,this.languages$=this.configState.getDeep$("localization.languages")}return Object.defineProperty(e.prototype,"defaultLanguage$",{get:function(){var e=this;return this.languages$.pipe(i.map((function(t){var n=N.default((function(){return t.find((function(t){return t.cultureName===e.selectedLangCulture}))}),{});return{displayName:n.displayName||"",flagIcon:n.flagIcon}})))},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"dropdownLanguages$",{get:function(){var e=this;return this.languages$.pipe(i.map((function(t){return N.default((function(){return t.filter((function(t){return t.cultureName!==e.selectedLangCulture}))}))}),[]))},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"selectedLangCulture",{get:function(){return this.sessionState.getLanguage()},enumerable:!1,configurable:!0}),e.prototype.change=function(e){this.sessionState.setLanguage(e)},e}();ue.ɵfac=function(e){return new(e||ue)(n.ɵɵdirectiveInject(a.ConfigStateService),n.ɵɵdirectiveInject(a.SessionStateService))},ue.ɵcmp=n.ɵɵdefineComponent({type:ue,selectors:[["ms-langs"]],hostVars:4,hostBindings:function(e,t){2&e&&n.ɵɵclassProp("alain-ms__topbar-item",!0)("alain-ms__topbar-dd",!0)},decls:2,vars:3,consts:[[4,"ngIf"],[1,"alain-ms__topbar-item-btn"],[1,"alain-ms__topbar-dd-menu"],[3,"click",4,"ngFor","ngForOf"],[3,"click"],[1,"alain-ms__topbar-dd-item"]],template:function(e,t){1&e&&(n.ɵɵtemplate(0,pe,7,4,"ng-container",0),n.ɵɵpipe(1,"async")),2&e&&n.ɵɵproperty("ngIf",n.ɵɵpipeBind1(1,1,t.defaultLanguage$))},directives:[t.NgIf,t.NgForOf],pipes:[t.AsyncPipe],encapsulation:2,changeDetection:0}),("undefined"==typeof ngDevMode||ngDevMode)&&n.ɵsetClassMetadata(ue,[{type:n.Component,args:[{selector:"ms-langs",templateUrl:"./langs.component.html",host:{"[class.alain-ms__topbar-item]":"true","[class.alain-ms__topbar-dd]":"true"},changeDetection:n.ChangeDetectionStrategy.OnPush}]}],(function(){return[{type:a.ConfigStateService},{type:a.SessionStateService}]}),null);var de=function(){function e(e){this.http=e}return Object.defineProperty(e.prototype,"data",{get:function(){return this._data},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"messages",{get:function(){return this._data.messagess},enumerable:!1,configurable:!0}),e.prototype.getData=function(){return this._data?r.of(this._data):this.getByHttp()},e.prototype.getNav=function(e){return this._data.navLinks[e]||{}},e.prototype.getByHttp=function(){var e=this;return this.http.get("./assets/tmp/topbar-zh-TW.json").pipe(i.tap((function(t){e._data=t})))},e}();function me(e,t){if(1&e&&(n.ɵɵelementStart(0,"em",9),n.ɵɵtext(1),n.ɵɵelementEnd()),2&e){var r=n.ɵɵnextContext();n.ɵɵadvance(1),n.ɵɵtextInterpolate(r.list.length)}}function fe(e,t){if(1&e&&(n.ɵɵelementStart(0,"a",10),n.ɵɵelementStart(1,"div",11),n.ɵɵtext(2),n.ɵɵelementEnd(),n.ɵɵelementStart(3,"span",12),n.ɵɵtext(4),n.ɵɵelementEnd(),n.ɵɵelementEnd()),2&e){var r=t.$implicit;n.ɵɵproperty("link-to",r),n.ɵɵadvance(2),n.ɵɵtextInterpolate(r.title),n.ɵɵadvance(2),n.ɵɵtextInterpolate(r.time)}}de.ɵfac=function(e){return new(e||de)(n.ɵɵinject(o._HttpClient))},de.ɵprov=n.ɵɵdefineInjectable({token:de,factory:de.ɵfac,providedIn:"root"}),("undefined"==typeof ngDevMode||ngDevMode)&&n.ɵsetClassMetadata(de,[{type:n.Injectable,args:[{providedIn:"root"}]}],(function(){return[{type:o._HttpClient}]}),null);var ge=function(){function e(e,t,n,r,i){this.srv=e,this.router=t,this.tokenService=n,this.settings=r,this.msg=i}return Object.defineProperty(e.prototype,"list",{get:function(){var e=this;return this.srv.messages.map((function(t){return t.link=e.l.messageUrl+t.id,t}))},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"l",{get:function(){return this.srv.getNav("message")},enumerable:!1,configurable:!0}),e.prototype.logout=function(){this.tokenService.clear(),this.router.navigateByUrl(this.tokenService.login_url)},e}();ge.ɵfac=function(e){return new(e||ge)(n.ɵɵdirectiveInject(de),n.ɵɵdirectiveInject(u.Router),n.ɵɵdirectiveInject(m.DA_SERVICE_TOKEN),n.ɵɵdirectiveInject(o.SettingsService),n.ɵɵdirectiveInject(f.NzMessageService))},ge.ɵcmp=n.ɵɵdefineComponent({type:ge,selectors:[["ms-notice"]],hostVars:6,hostBindings:function(e,t){2&e&&n.ɵɵclassProp("alain-ms__topbar-item",!0)("alain-ms__topbar-dd",!0)("alain-ms__notice",!0)},decls:13,vars:8,consts:[[1,"alain-ms__topbar-item-btn"],[1,"position-relative"],["class","alain-ms__topbar-item-num",4,"ngIf"],[1,"alain-ms__topbar-dd-menu"],[1,"alain-ms__notice-hd"],[1,"brand-color",3,"link-to"],["class","alain-ms__notice-item",3,"link-to",4,"ngFor","ngForOf"],[1,"alain-ms__notice-fd"],[1,"d-block","pt-sm","pb-xs","text-center",3,"link-to"],[1,"alain-ms__topbar-item-num"],[1,"alain-ms__notice-item",3,"link-to"],[1,"alain-ms__notice-item--title"],[1,"alain-ms__notice-item--time"]],template:function(e,t){1&e&&(n.ɵɵelementStart(0,"span",0),n.ɵɵelementStart(1,"span",1),n.ɵɵtext(2),n.ɵɵtemplate(3,me,2,1,"em",2),n.ɵɵelementEnd(),n.ɵɵelementEnd(),n.ɵɵelementStart(4,"div",3),n.ɵɵelementStart(5,"div",4),n.ɵɵtext(6),n.ɵɵelementStart(7,"a",5),n.ɵɵtext(8),n.ɵɵelementEnd(),n.ɵɵelementEnd(),n.ɵɵtemplate(9,fe,5,3,"a",6),n.ɵɵelementStart(10,"div",7),n.ɵɵelementStart(11,"a",8),n.ɵɵtext(12),n.ɵɵelementEnd(),n.ɵɵelementEnd(),n.ɵɵelementEnd()),2&e&&(n.ɵɵadvance(2),n.ɵɵtextInterpolate1(" ",t.l.titleText,""),n.ɵɵadvance(1),n.ɵɵproperty("ngIf",t.list.length>0),n.ɵɵadvance(3),n.ɵɵtextInterpolate1(" ",t.l.title," "),n.ɵɵadvance(1),n.ɵɵproperty("link-to",t.l.subscribe),n.ɵɵadvance(1),n.ɵɵtextInterpolate(t.l.subscribe.title),n.ɵɵadvance(1),n.ɵɵproperty("ngForOf",t.list),n.ɵɵadvance(2),n.ɵɵproperty("link-to",t.l),n.ɵɵadvance(1),n.ɵɵtextInterpolate(t.l.text))},directives:[t.NgIf,F,t.NgForOf],encapsulation:2,changeDetection:0}),("undefined"==typeof ngDevMode||ngDevMode)&&n.ɵsetClassMetadata(ge,[{type:n.Component,args:[{selector:"ms-notice",templateUrl:"./notice.component.html",host:{"[class.alain-ms__topbar-item]":"true","[class.alain-ms__topbar-dd]":"true","[class.alain-ms__notice]":"true"},changeDetection:n.ChangeDetectionStrategy.OnPush}]}],(function(){return[{type:de},{type:u.Router},{type:void 0,decorators:[{type:n.Inject,args:[m.DA_SERVICE_TOKEN]}]},{type:o.SettingsService},{type:f.NzMessageService}]}),null);var ve=function(){function e(e){this.http=e}return Object.defineProperty(e.prototype,"platList",{get:function(){return this._data.reduce((function(e,t){return e.concat(t.list)}),[])},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"item",{get:function(){return this.platList.find((function(e){return e.selected}))},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"list",{get:function(){return this._data},enumerable:!1,configurable:!0}),e.prototype.getByHttp=function(){return this.http.get("/region").pipe(i.tap((function(e){})))},e.prototype.getData=function(){return this._data?r.of(null):this.getByHttp()},e.prototype.setSelected=function(e){this.platList.find((function(e){return e.selected})).selected=!1,e.selected=!0},e}();ve.ɵfac=function(e){return new(e||ve)(n.ɵɵinject(o._HttpClient))},ve.ɵprov=n.ɵɵdefineInjectable({token:ve,factory:ve.ɵfac,providedIn:"root"}),("undefined"==typeof ngDevMode||ngDevMode)&&n.ɵsetClassMetadata(ve,[{type:n.Injectable,args:[{providedIn:"root"}]}],(function(){return[{type:o._HttpClient}]}),null);var he=function(e){return{"brand-color":e}};function ye(e,t){if(1&e){var r=n.ɵɵgetCurrentView();n.ɵɵelementStart(0,"dd",9),n.ɵɵlistener("click",(function(){n.ɵɵrestoreView(r);var e=t.$implicit;return n.ɵɵnextContext(3).selected(e)})),n.ɵɵelementStart(1,"a",10),n.ɵɵelement(2,"i"),n.ɵɵtext(3),n.ɵɵelementEnd(),n.ɵɵelementEnd()}if(2&e){var i=t.$implicit;n.ɵɵadvance(1),n.ɵɵproperty("ngClass",n.ɵɵpureFunction1(5,he,i.selected)),n.ɵɵadvance(1),n.ɵɵclassMapInterpolate1("icon icon-",i.country,""),n.ɵɵadvance(1),n.ɵɵtextInterpolate1("",i.name," ")}}function _e(e,t){if(1&e&&(n.ɵɵelementStart(0,"dl",6),n.ɵɵelementStart(1,"dt",7),n.ɵɵtext(2),n.ɵɵelementEnd(),n.ɵɵtemplate(3,ye,4,7,"dd",8),n.ɵɵelementEnd()),2&e){var r=t.$implicit;n.ɵɵadvance(2),n.ɵɵtextInterpolate(r.name),n.ɵɵadvance(1),n.ɵɵproperty("ngForOf",r.list)}}function be(e,t){if(1&e&&(n.ɵɵelementContainerStart(0),n.ɵɵelementStart(1,"span",1),n.ɵɵelement(2,"i"),n.ɵɵelementStart(3,"span",2),n.ɵɵtext(4),n.ɵɵelementEnd(),n.ɵɵelement(5,"i",3),n.ɵɵelementEnd(),n.ɵɵelementStart(6,"div",4),n.ɵɵtemplate(7,_e,4,2,"dl",5),n.ɵɵelementEnd(),n.ɵɵelementContainerEnd()),2&e){var r=n.ɵɵnextContext();n.ɵɵadvance(2),n.ɵɵclassMapInterpolate1("icon icon-",r.srv.item.country,""),n.ɵɵadvance(2),n.ɵɵtextInterpolate(r.srv.item.name),n.ɵɵadvance(3),n.ɵɵproperty("ngForOf",r.srv.list)}}var Ce=function(){function e(e,t){this.srv=e,this.cdr=t,this.inited=!1}return e.prototype.ngOnInit=function(){var e=this;this.srv.getData().subscribe((function(){e.inited=!0,e.cdr.detectChanges()}))},e.prototype.selected=function(e){this.srv.setSelected(e),this.cdr.detectChanges()},e}();Ce.ɵfac=function(e){return new(e||Ce)(n.ɵɵdirectiveInject(ve),n.ɵɵdirectiveInject(n.ChangeDetectorRef))},Ce.ɵcmp=n.ɵɵdefineComponent({type:Ce,selectors:[["ms-region"]],hostVars:6,hostBindings:function(e,t){2&e&&n.ɵɵclassProp("alain-ms__topbar-item",!0)("alain-ms__topbar-dd",!0)("alain-ms__region",!0)},decls:1,vars:1,consts:[[4,"ngIf"],[1,"alain-ms__topbar-item-btn"],[1,"text-xs","px-xs"],["nz-icon","","nzType","caret-up",1,"alain-ms__topbar-item-btn-arrow"],[1,"alain-ms__topbar-dd-menu","alain-ms__topbar-dd-left","alain-ms__region--wrap","clearfix"],["class","alain-ms__region--list",4,"ngFor","ngForOf"],[1,"alain-ms__region--list"],[1,"mb-sm"],[3,"click",4,"ngFor","ngForOf"],[3,"click"],[1,"d-block",3,"ngClass"]],template:function(e,t){1&e&&n.ɵɵtemplate(0,be,8,5,"ng-container",0),2&e&&n.ɵɵproperty("ngIf",t.inited)},directives:[t.NgIf,c.NzIconDirective,t.NgForOf,t.NgClass],encapsulation:2,changeDetection:0}),("undefined"==typeof ngDevMode||ngDevMode)&&n.ɵsetClassMetadata(Ce,[{type:n.Component,args:[{selector:"ms-region",templateUrl:"./region.component.html",host:{"[class.alain-ms__topbar-item]":"true","[class.alain-ms__topbar-dd]":"true","[class.alain-ms__region]":"true"},changeDetection:n.ChangeDetectionStrategy.OnPush}]}],(function(){return[{type:ve},{type:n.ChangeDetectorRef}]}),null);var Se=["ipt"];function xe(e,t){if(1&e&&(n.ɵɵelementStart(0,"nz-auto-option",8),n.ɵɵtext(1),n.ɵɵelementEnd()),2&e){var r=t.$implicit;n.ɵɵproperty("nzValue",r),n.ɵɵadvance(1),n.ɵɵtextInterpolate1(" ",r," ")}}var Ie=function(e){return{"alain-ms__search-active":e}},Me=function(){function e(e,t,n){var a=this;this.srv=t,this.cdr=n,this.show=!1,this.q="",this.search$=new r.Subject,this.list=[],this.search$.pipe(i.debounceTime(300),i.distinctUntilChanged(),i.switchMap((function(t){return e.get("/user",{no:t,pi:1,ps:5})}))).subscribe((function(e){a.list=e.list,a.cdr.detectChanges()}))}return Object.defineProperty(e.prototype,"l",{get:function(){return this.srv.getNav("search")},enumerable:!1,configurable:!0}),e.prototype._click=function(){this.ipt.nativeElement.focus(),this.show=!0},e.prototype.ngOnDestroy=function(){this.search$.unsubscribe()},e}();function Ee(e,t){if(1&e){var r=n.ɵɵgetCurrentView();n.ɵɵelementStart(0,"a",2),n.ɵɵlistener("click",(function(){return n.ɵɵrestoreView(r),n.ɵɵnextContext().initLogin()})),n.ɵɵtext(1),n.ɵɵpipe(2,"abpLocalization"),n.ɵɵelementEnd()}2&e&&(n.ɵɵadvance(1),n.ɵɵtextInterpolate(n.ɵɵpipeBind1(2,1,"AbpAccount::Login")))}function Oe(e,t){if(1&e){var r=n.ɵɵgetCurrentView();n.ɵɵelementStart(0,"div"),n.ɵɵelementStart(1,"span",4),n.ɵɵtext(2),n.ɵɵelementEnd(),n.ɵɵelementStart(3,"div",5),n.ɵɵelementStart(4,"div",6),n.ɵɵelementStart(5,"div",7),n.ɵɵelementStart(6,"span",8),n.ɵɵtext(7),n.ɵɵelementEnd(),n.ɵɵelementEnd(),n.ɵɵelementEnd(),n.ɵɵelementStart(8,"div",9),n.ɵɵelementStart(9,"a",10),n.ɵɵelement(10,"i",11),n.ɵɵtext(11),n.ɵɵpipe(12,"abpLocalization"),n.ɵɵelementEnd(),n.ɵɵelementEnd(),n.ɵɵelementStart(13,"div",12),n.ɵɵelementStart(14,"a",13),n.ɵɵlistener("click",(function(){return n.ɵɵrestoreView(r),n.ɵɵnextContext(2).logout()})),n.ɵɵtext(15),n.ɵɵpipe(16,"abpLocalization"),n.ɵɵelementEnd(),n.ɵɵelementEnd(),n.ɵɵelementEnd(),n.ɵɵelementEnd()}if(2&e){var i=n.ɵɵnextContext().ngIf;n.ɵɵadvance(2),n.ɵɵtextInterpolate1(" ",i.userName," "),n.ɵɵadvance(5),n.ɵɵtextInterpolate(i.userName),n.ɵɵadvance(4),n.ɵɵtextInterpolate1("",n.ɵɵpipeBind1(12,4,"AbpAccount::ManageYourProfile")," "),n.ɵɵadvance(4),n.ɵɵtextInterpolate(n.ɵɵpipeBind1(16,6,"AbpUi::Logout"))}}function ze(e,t){if(1&e&&(n.ɵɵelementStart(0,"div"),n.ɵɵtemplate(1,Oe,17,8,"div",3),n.ɵɵelementEnd()),2&e){var r=t.ngIf;n.ɵɵnextContext();var i=n.ɵɵreference(1);n.ɵɵadvance(1),n.ɵɵproperty("ngIf",r.isAuthenticated)("ngIfElse",i)}}Me.ɵfac=function(e){return new(e||Me)(n.ɵɵdirectiveInject(o._HttpClient),n.ɵɵdirectiveInject(de),n.ɵɵdirectiveInject(n.ChangeDetectorRef))},Me.ɵcmp=n.ɵɵdefineComponent({type:Me,selectors:[["ms-search"]],viewQuery:function(e,t){if(1&e&&n.ɵɵviewQuery(Se,3),2&e){var r;n.ɵɵqueryRefresh(r=n.ɵɵloadQuery())&&(t.ipt=r.first)}},hostVars:4,hostBindings:function(e,t){1&e&&n.ɵɵlistener("click",(function(){return t._click()})),2&e&&n.ɵɵclassProp("alain-ms__topbar-item",!0)("mr-md",!0)},decls:8,vars:7,consts:[[1,"alain-ms__search",3,"ngClass"],["nz-input","",1,"alain-ms__search-ipt",3,"placeholder","ngModel","nzAutocomplete","ngModelChange","input","blur"],["ipt",""],["nz-icon","","nzType","search",1,"alain-ms__search-icon"],[1,"alain-ms__search-outline"],[1,"asdlfkjlj"],["searchAuto",""],[3,"nzValue",4,"ngFor","ngForOf"],[3,"nzValue"]],template:function(e,t){if(1&e&&(n.ɵɵelementStart(0,"div",0),n.ɵɵelementStart(1,"input",1,2),n.ɵɵlistener("ngModelChange",(function(e){return t.q=e}))("input",(function(e){return t.search$.next(null==e.target?null:e.target.value)}))("blur",(function(){return t.show=!1})),n.ɵɵelementEnd(),n.ɵɵelement(3,"i",3),n.ɵɵelement(4,"i",4),n.ɵɵelementStart(5,"nz-autocomplete",5,6),n.ɵɵtemplate(7,xe,2,2,"nz-auto-option",7),n.ɵɵelementEnd(),n.ɵɵelementEnd()),2&e){var r=n.ɵɵreference(6);n.ɵɵproperty("ngClass",n.ɵɵpureFunction1(5,Ie,t.show)),n.ɵɵadvance(1),n.ɵɵpropertyInterpolate("placeholder",t.l.placeholder),n.ɵɵproperty("ngModel",t.q)("nzAutocomplete",r),n.ɵɵadvance(6),n.ɵɵproperty("ngForOf",t.list)}},directives:[t.NgClass,g.NzInputDirective,v.DefaultValueAccessor,h.NzAutocompleteTriggerDirective,v.NgControlStatus,v.NgModel,c.NzIconDirective,h.NzAutocompleteComponent,t.NgForOf,h.NzAutocompleteOptionComponent],encapsulation:2,changeDetection:0}),("undefined"==typeof ngDevMode||ngDevMode)&&n.ɵsetClassMetadata(Me,[{type:n.Component,args:[{selector:"ms-search",templateUrl:"./search.component.html",host:{"[class.alain-ms__topbar-item]":"true","[class.mr-md]":"true"},changeDetection:n.ChangeDetectionStrategy.OnPush}]}],(function(){return[{type:o._HttpClient},{type:de},{type:n.ChangeDetectorRef}]}),{ipt:[{type:n.ViewChild,args:["ipt",{static:!0}]}],_click:[{type:n.HostListener,args:["click"]}]});var Ne=function(){function e(e,t,n,r,i){this.authService=e,this.router=t,this.configStateService=n,this.settings=i,this.currentUser$=this.configStateService.getOne$("currentUser")}return e.prototype.initLogin=function(){this.authService.initLogin()},e.prototype.logout=function(){var e=this;this.authService.logout().subscribe((function(){e.router.navigate(["/"],{state:{redirectUrl:e.router.url}})}))},e}();Ne.ɵfac=function(e){return new(e||Ne)(n.ɵɵdirectiveInject(y.AuthService),n.ɵɵdirectiveInject(u.Router),n.ɵɵdirectiveInject(a.ConfigStateService),n.ɵɵdirectiveInject(de),n.ɵɵdirectiveInject(o.SettingsService))},Ne.ɵcmp=n.ɵɵdefineComponent({type:Ne,selectors:[["ms-user"]],hostVars:6,hostBindings:function(e,t){2&e&&n.ɵɵclassProp("alain-ms__topbar-item",!0)("alain-ms__topbar-dd",!0)("alain-ms__user",!0)},decls:4,vars:3,consts:[["loginBtnTpl",""],[4,"ngIf"],[1,"alain-ms__topbar-item-btn",3,"click"],[4,"ngIf","ngIfElse"],[1,"alain-ms__topbar-item-btn"],[1,"alain-ms__topbar-dd-menu","width-md"],[1,"alain-ms__user-hd"],[1,"d-flex"],[1,"ml-md"],[1,"alain-ms__user-bd"],["routerLink","/account/manage-profile",1,"alain-ms__user-bd-item"],["nz-icon","","nzType","safety"],[1,"alain-ms__user-fd"],[1,"d-block","pt-sm","pb-xs","text-center",3,"click"]],template:function(e,t){1&e&&(n.ɵɵtemplate(0,Ee,3,3,"ng-template",null,0,n.ɵɵtemplateRefExtractor),n.ɵɵtemplate(2,ze,2,2,"div",1),n.ɵɵpipe(3,"async")),2&e&&(n.ɵɵadvance(2),n.ɵɵproperty("ngIf",n.ɵɵpipeBind1(3,1,t.currentUser$)))},directives:[t.NgIf,u.RouterLinkWithHref,c.NzIconDirective],pipes:[t.AsyncPipe,a.LocalizationPipe],encapsulation:2,changeDetection:0}),("undefined"==typeof ngDevMode||ngDevMode)&&n.ɵsetClassMetadata(Ne,[{type:n.Component,args:[{selector:"ms-user",templateUrl:"./user.component.html",host:{"[class.alain-ms__topbar-item]":"true","[class.alain-ms__topbar-dd]":"true","[class.alain-ms__user]":"true"},changeDetection:n.ChangeDetectionStrategy.OnPush}]}],(function(){return[{type:y.AuthService},{type:u.Router},{type:a.ConfigStateService},{type:de},{type:o.SettingsService}]}),null);var je=function(){function e(e){this.injector=e}return Object.defineProperty(e.prototype,"routesService",{get:function(){return this.injector.get(a.RoutesService)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"localizationPipe",{get:function(){return this.injector.get(a.LocalizationPipe)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"CurrentUrl",{get:function(){var e=this.RouterState.url.split("?")[0];return decodeURI(e)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"CurrentRoute",{get:function(){var e=this;return this.routesService.find((function(t){return e.formatParams(t.path)===e.CurrentUrl}))},enumerable:!1,configurable:!0}),e.prototype.MergeRouteData=function(e,t){var n=t,r=[],i=this.CurrentRoute;if(!i)return[];for(l(i);i.parent;)l(i=i.parent);for(var a=r;0!==a.length;){var o=a.pop();n=Object.assign(Object.assign({},n),o[e])}return n;function l(t){t&&t.hasOwnProperty(e)&&r.push(t)}},Object.defineProperty(e.prototype,"Category$",{get:function(){var e=this;return this.routesService.visible$.pipe(i.map((function(t){if(0!==t.length)return t.filter((function(t){return"AbpUiNavigation::Menu:Administration"===t.name&&!e.routesService.hide(t)})).map((function(e){return e.children})).reduce((function(e,t){return e.concat(t)})).map((function(t){var n={id:t.name,name:e.localizationPipe.transform(t.name),icon:t.iconClass,products:[],link:t.path};return n.products=t.children.filter((function(t){return!e.routesService.hide(t)})).map((function(t){return{productId:t.name,name:e.localizationPipe.transform(t.name),link:t.path,icon:t.iconClass,id:t.name}})),n}))})))},enumerable:!1,configurable:!0}),e.prototype.GetPageNavs=function(e,t){if(!this.CurrentRoute)return[];var n,r=[];return this.RouterState=e,(n=this.routesService.find((function(e){return e.name==t.name})))&&r.push.apply(r,w(this.transMenu(n))),r},e.prototype.transMenu=function(e,t){var n=this;void 0===t&&(t=!0);var r=[];return e.children.filter((function(e){return!n.routesService.hide(e)})).forEach((function(e){var i,a={text:e.displayName||n.localizationPipe.transform(e.name),link:n.formatParams(e.path),icon:e.iconClass,children:[]};(null===(i=null==e?void 0:e.children)||void 0===i?void 0:i.length)>0&&t&&(a.children=n.transMenu(e,!1)),r.push(a)})),r},e.prototype.formatParams=function(e,t){var n=this;if(void 0===t&&(t=this.RouterState.root),!e)return"";var r=/:([^(:\/\-\ )]+)/g,i=e;return e.match(r)&&e.match(r).forEach((function(e){var r,a=e.substr(1),o=null===(r=n.findRouter((function(e){return a in e.params}),[t]))||void 0===r?void 0:r.params[a];i=i.replace(":"+a,o)})),i},e.prototype.findRouter=function(e,t){var n=this;return t.reduce((function(t,r){return t||(e(r)?r:n.findRouter(e,r.children))}),null)},e}(),De=function(){function t(t,n){this.injector=t,this.localizationPipe=n,this.store=new a.InternalStore({isFetching:!1,categories:[],navConfig:e.Layout.defaultNavConfig,sidebarConfig:e.Layout.defaultSidebarConfig,pageNavs:[]}),this.routesProcessor=new je(this.injector),this.listenRoutes()}return t.prototype.getStore$=function(){return this.store.sliceState((function(e){return e}))},t.prototype.getFetching$=function(){return this.store.sliceState((function(e){return e.isFetching}))},t.prototype.getCategories=function(){return this.store.state.categories},t.prototype.getCategories$=function(){return this.store.sliceState((function(e){return e.categories}))},t.prototype.getShortcuts=function(){var e=this.getCategories(),t=[];return e.forEach((function(e){t.push(e)})),t},t.prototype.getShortcuts$=function(){return this.getCategories$().pipe(i.map((function(e){var t=[];return e.forEach((function(e){t.push(e)})),t})))},t.prototype.getNavConfig=function(){return this.store.state.navConfig},t.prototype.getNavConfig$=function(){return this.store.sliceState((function(e){return e.navConfig}))},t.prototype.getPageNavs$=function(){return this.store.sliceState((function(e){return e.pageNavs}))},t.prototype.getPageNavs=function(){return this.store.state.pageNavs},t.prototype.setStore=function(e){this.store.patch(Object.assign({},e))},t.prototype.setFetching=function(e){this.store.patch({isFetching:e})},t.prototype.setNavConfig=function(e){var t;this.store.patch({navConfig:e}),"AbpUiNavigation::Menu:Administration"!==e.name?(t=this.routesProcessor.GetPageNavs(this.routesProcessor.RouterState,e),this.store.state.sidebarConfig.hasPageNav=!0):this.store.state.sidebarConfig.hasPageNav=!1,this.store.patch({pageNavs:t,sidebarConfig:this.store.state.sidebarConfig})},t.prototype.fetchPageNavs=function(t){var n,r;this.routesProcessor.RouterState=t;var i=this.routesProcessor.MergeRouteData("navConfig",Object.assign(Object.assign({},e.Layout.defaultNavConfig),{name:null!==(r=null===(n=this.routesProcessor.CurrentRoute)||void 0===n?void 0:n.parentName)&&void 0!==r?r:""})),a=this.routesProcessor.MergeRouteData("sidebarConfig",e.Layout.defaultSidebarConfig);this.setStore({sidebarConfig:a}),this.setNavConfig(i)},t.prototype.listenRoutes=function(){var e=this;this.routesProcessor.Category$.subscribe((function(t){e.routesProcessor.RouterState&&e.fetchPageNavs(e.routesProcessor.RouterState),e.store.patch({categories:t})}))},t}();De.ɵfac=function(e){return new(e||De)(n.ɵɵinject(n.Injector),n.ɵɵinject(a.LocalizationPipe))},De.ɵprov=n.ɵɵdefineInjectable({token:De,factory:De.ɵfac,providedIn:"root"}),("undefined"==typeof ngDevMode||ngDevMode)&&n.ɵsetClassMetadata(De,[{type:n.Injectable,args:[{providedIn:"root"}]}],(function(){return[{type:n.Injector},{type:a.LocalizationPipe}]}),null);var ke=function(){function e(e){this.layoutSateService=e}return Object.defineProperty(e.prototype,"data",{get:function(){return this._data},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"i18n",{get:function(){return{showAll:!0,keywords:"請輸入關鍵詞",allProduct:"查詢全部産品",show:!0,hasResult:"以下是與“<strong>{filterTxt}</strong>”相關的産品：",noResult:"未找到與“<strong>{filterTxt}</strong>”相關的産品。",text:"産品與服務",recent:"最近訪問"}},enumerable:!1,configurable:!0}),e.prototype.getData=function(){var e=this;return this.layoutSateService.getCategories$().pipe(i.tap((function(t){e._data=t})))},e.prototype.search=function(e){var t=[[],[],[]],n=l.deepCopy(this._data);e&&(n=n.map((function(t){var n;return t.products=null===(n=t.products)||void 0===n?void 0:n.filter((function(t){return t.name.includes(e)||t.id.includes(e)})),t})));var r=[],i=0;return n.filter((function(e){return e.products.length>0})).forEach((function(e,n){e._id=++i,t[n%3].push(e),-1===r.findIndex((function(t){return t.name===e.name}))&&r.push({_id:e._id,name:e.name})})),{list:t,categories:r}},e}();ke.ɵfac=function(e){return new(e||ke)(n.ɵɵinject(De))},ke.ɵprov=n.ɵɵdefineInjectable({token:ke,factory:ke.ɵfac,providedIn:"root"}),("undefined"==typeof ngDevMode||ngDevMode)&&n.ɵsetClassMetadata(ke,[{type:n.Injectable,args:[{providedIn:"root"}]}],(function(){return[{type:De}]}),null);var we=["categoryEl"];function Te(e,t){if(1&e){var r=n.ɵɵgetCurrentView();n.ɵɵelementStart(0,"div",17),n.ɵɵlistener("click",(function(){n.ɵɵrestoreView(r);var e=n.ɵɵnextContext(2);return e.showProduct=!e.showProduct})),n.ɵɵelementStart(1,"div",18),n.ɵɵelement(2,"i",19),n.ɵɵelementStart(3,"span",20),n.ɵɵtext(4),n.ɵɵelementEnd(),n.ɵɵelementStart(5,"span",21),n.ɵɵelement(6,"i",22),n.ɵɵelementEnd(),n.ɵɵelementEnd(),n.ɵɵelementEnd()}if(2&e){var i=n.ɵɵnextContext(2);n.ɵɵadvance(4),n.ɵɵtextInterpolate(i.l.text)}}function Pe(e,t){if(1&e){var r=n.ɵɵgetCurrentView();n.ɵɵelementStart(0,"li",23),n.ɵɵelementStart(1,"i",24),n.ɵɵlistener("linkToChanged",(function(){return n.ɵɵrestoreView(r),n.ɵɵnextContext(2).showProduct=!1})),n.ɵɵelementEnd(),n.ɵɵelementStart(2,"a",25),n.ɵɵlistener("linkToChanged",(function(){return n.ɵɵrestoreView(r),n.ɵɵnextContext(2).showProduct=!1})),n.ɵɵtext(3),n.ɵɵelementEnd(),n.ɵɵelementEnd()}if(2&e){var i=t.$implicit;n.ɵɵadvance(1),n.ɵɵclassMapInterpolate1("alain-ms__sidebar-product-icon ",i.icon," "),n.ɵɵproperty("link-to",i),n.ɵɵadvance(1),n.ɵɵproperty("link-to",i),n.ɵɵadvance(1),n.ɵɵtextInterpolate1(" ",i.name," ")}}var Fe=function(e){return{"alain-ms__products-category-item-active":e}};function Re(e,t){if(1&e){var r=n.ɵɵgetCurrentView();n.ɵɵelementStart(0,"li",32),n.ɵɵelementStart(1,"a",33),n.ɵɵlistener("linkToChanged",(function(){return n.ɵɵrestoreView(r),n.ɵɵnextContext(4).showProduct=!1})),n.ɵɵtext(2),n.ɵɵelementEnd(),n.ɵɵelementEnd()}if(2&e){var i=t.$implicit;n.ɵɵproperty("ngClass",n.ɵɵpureFunction1(3,Fe,i.shortcut)),n.ɵɵadvance(1),n.ɵɵproperty("link-to",i),n.ɵɵadvance(1),n.ɵɵtextInterpolate(i.name)}}function $e(e,t){if(1&e&&(n.ɵɵelementStart(0,"div",28),n.ɵɵelementStart(1,"h3",29),n.ɵɵtext(2),n.ɵɵelementEnd(),n.ɵɵelementStart(3,"ul",30),n.ɵɵtemplate(4,Re,3,5,"li",31),n.ɵɵelementEnd(),n.ɵɵelementEnd()),2&e){var r=t.$implicit;n.ɵɵadvance(1),n.ɵɵpropertyInterpolate1("id","product-cat-",r._id,""),n.ɵɵadvance(1),n.ɵɵtextInterpolate1(" ",r.name," "),n.ɵɵadvance(2),n.ɵɵproperty("ngForOf",r.products)}}function Le(e,t){if(1&e&&(n.ɵɵelementStart(0,"div",26),n.ɵɵtemplate(1,$e,5,3,"div",27),n.ɵɵelementEnd()),2&e){var r=t.$implicit;n.ɵɵadvance(1),n.ɵɵproperty("ngForOf",r)}}function Ae(e,t){if(1&e&&n.ɵɵelement(0,"nz-link",34),2&e){var r=t.$implicit;n.ɵɵpropertyInterpolate1("nzHref","#product-cat-",r._id,""),n.ɵɵproperty("nzTitle",r.name)}}function Be(e,t){if(1&e){var r=n.ɵɵgetCurrentView();n.ɵɵelementContainerStart(0),n.ɵɵelementStart(1,"div",1),n.ɵɵtemplate(2,Te,7,1,"div",2),n.ɵɵelementStart(3,"ul",3),n.ɵɵtemplate(4,Pe,4,6,"li",4),n.ɵɵpipe(5,"async"),n.ɵɵelementEnd(),n.ɵɵelementEnd(),n.ɵɵelementStart(6,"div",5),n.ɵɵelementStart(7,"div",6),n.ɵɵelementStart(8,"div",7),n.ɵɵlistener("click",(function(){return n.ɵɵrestoreView(r),n.ɵɵnextContext().showProduct=!1})),n.ɵɵelement(9,"i",8),n.ɵɵelementEnd(),n.ɵɵelementStart(10,"div",9),n.ɵɵelementStart(11,"div",10,11),n.ɵɵelementStart(13,"div",12),n.ɵɵtemplate(14,Le,2,1,"div",13),n.ɵɵelementEnd(),n.ɵɵelementEnd(),n.ɵɵelementEnd(),n.ɵɵelementStart(15,"div",14),n.ɵɵelementStart(16,"nz-anchor",15),n.ɵɵtemplate(17,Ae,1,2,"nz-link",16),n.ɵɵelementEnd(),n.ɵɵelementEnd(),n.ɵɵelementEnd(),n.ɵɵelementEnd(),n.ɵɵelementContainerEnd()}if(2&e){var i=t.ngIf,a=n.ɵɵnextContext();n.ɵɵadvance(2),n.ɵɵproperty("ngIf",i.sidebarConfig.hasProductNav),n.ɵɵadvance(2),n.ɵɵproperty("ngForOf",n.ɵɵpipeBind1(5,4,a.shortcuts$)),n.ɵɵadvance(10),n.ɵɵproperty("ngForOf",a.searchList),n.ɵɵadvance(3),n.ɵɵproperty("ngForOf",a.searchCategories)}}var Ve=function(){function e(e,t,n,r){this.layoutStateService=e,this.brand=t,this.srv=n,this.cdr=r,this.showProduct=!1,this.inited=!1,this.q="",this.searchCategories=[],t.setSidebar(!0)}return Object.defineProperty(e.prototype,"store$",{get:function(){return this.layoutStateService.getStore$()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"shortcuts$",{get:function(){return this.layoutStateService.getShortcuts$()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"l",{get:function(){return this.srv.i18n},enumerable:!1,configurable:!0}),e.prototype.search=function(e){var t=this;void 0===e&&(e=!0);var n=this.srv.search(this.q);this.searchList=n.list,this.searchCategories=n.categories,this.cdr.detectChanges(),e&&setTimeout((function(){t.categoryEl.nativeElement.scrollTop=0}))},e.prototype.ngAfterViewInit=function(){var e=this;this.srv.getData().subscribe((function(t){e.inited=!0,e.search()}))},e.prototype.ngOnDestroy=function(){this.brand.setSidebar(!1)},e}();function qe(e,t){1&e&&n.ɵɵelement(0,"img",8)}function He(e,t){1&e&&n.ɵɵelement(0,"ms-all-nav")}function Ue(e,t){if(1&e&&n.ɵɵelement(0,"img",9),2&e){var r=n.ɵɵnextContext();n.ɵɵproperty("src",r.appInfo.logoUrl,n.ɵɵsanitizeUrl)}}function Qe(e,t){1&e&&(n.ɵɵelementStart(0,"div",10),n.ɵɵelement(1,"ms-langs"),n.ɵɵelement(2,"ms-user"),n.ɵɵelementEnd())}Ve.ɵfac=function(e){return new(e||Ve)(n.ɵɵdirectiveInject(De),n.ɵɵdirectiveInject(P),n.ɵɵdirectiveInject(ke),n.ɵɵdirectiveInject(n.ChangeDetectorRef))},Ve.ɵcmp=n.ɵɵdefineComponent({type:Ve,selectors:[["ms-sidebar"]],viewQuery:function(e,t){if(1&e&&n.ɵɵviewQuery(we,1),2&e){var r;n.ɵɵqueryRefresh(r=n.ɵɵloadQuery())&&(t.categoryEl=r.first)}},hostVars:4,hostBindings:function(e,t){2&e&&n.ɵɵclassProp("alain-ms__sidebar",!0)("alain-ms__sidebar-showproduct",t.showProduct)},decls:2,vars:3,consts:[[4,"ngIf"],[1,"alain-ms__sidebar-wrap"],["class","alain-ms__sidebar-product-all",3,"click",4,"ngIf"],[1,"alain-ms__sidebar-product-quick"],["class","alain-ms__sidebar-product",4,"ngFor","ngForOf"],[1,"alain-ms__sidebar-products"],[1,"alain-ms__products"],[1,"alain-ms__products-close",3,"click"],["nz-icon","","nzType","close"],[1,"alain-ms__products-left"],[1,"alain-ms__products-category-wrap"],["categoryEl",""],[1,"d-flex"],["class","alain-ms__products-category-column",4,"ngFor","ngForOf"],[1,"alain-ms__products-right"],["nzAffix","false","nzContainer",".alain-ms__products-category-wrap","nzOffsetTop","150","nzShowInkInFixed","false"],[3,"nzHref","nzTitle",4,"ngFor","ngForOf"],[1,"alain-ms__sidebar-product-all",3,"click"],[1,"alain-ms__sidebar-product","alain-ms__sidebar-product-all-wrap"],["nz-icon","","nzType","appstore",1,"alain-ms__sidebar-product-icon"],[1,"alain-ms__sidebar-product-name"],[1,"alain-ms__sidebar-product-toolbar"],["nz-icon","","nzType","right"],[1,"alain-ms__sidebar-product"],[3,"link-to","linkToChanged"],[1,"alain-ms__sidebar-product-name",3,"link-to","linkToChanged"],[1,"alain-ms__products-category-column"],["class","alain-ms__products-category",4,"ngFor","ngForOf"],[1,"alain-ms__products-category"],[1,"alain-ms__products-category-title",3,"id"],[1,"list-unstyled"],["class","alain-ms__products-category-item",3,"ngClass",4,"ngFor","ngForOf"],[1,"alain-ms__products-category-item",3,"ngClass"],[1,"alain-ms__products-category-item-link",3,"link-to","linkToChanged"],[3,"nzHref","nzTitle"]],template:function(e,t){1&e&&(n.ɵɵtemplate(0,Be,18,6,"ng-container",0),n.ɵɵpipe(1,"async")),2&e&&n.ɵɵproperty("ngIf",n.ɵɵpipeBind1(1,1,t.store$))},directives:[t.NgIf,t.NgForOf,c.NzIconDirective,_.NzAnchorComponent,F,t.NgClass,_.NzAnchorLinkComponent],pipes:[t.AsyncPipe],encapsulation:2,changeDetection:0}),("undefined"==typeof ngDevMode||ngDevMode)&&n.ɵsetClassMetadata(Ve,[{type:n.Component,args:[{selector:"ms-sidebar",templateUrl:"./sidebar.component.html",host:{"[class.alain-ms__sidebar]":"true","[class.alain-ms__sidebar-showproduct]":"showProduct"},changeDetection:n.ChangeDetectionStrategy.OnPush}]}],(function(){return[{type:De},{type:P},{type:ke},{type:n.ChangeDetectorRef}]}),{categoryEl:[{type:n.ViewChild,args:["categoryEl",{static:!1}]}]});var We=function(){function e(e,t,n){this.srv=e,this.cdr=t,this.environment=n,this.inited=!1,this.allNav=!1}return Object.defineProperty(e.prototype,"appInfo",{get:function(){return this.environment.getEnvironment().application},enumerable:!1,configurable:!0}),e.prototype.ngOnInit=function(){var e=this;this.srv.getData().subscribe((function(){e.inited=!0,e.mergeLinks(),e.cdr.detectChanges()}))},e.prototype.mergeLinks=function(){var e=this.srv.data.navLinks;this.links=[e.finance,e.workorder,e.support].map((function(e){return null==e.className&&(e.className=""),e.links&&0!==e.links.length?e.className+=" alain-ms__topbar-dd":e.links=void 0,e}))},e}();function Je(e,t){1&e&&(n.ɵɵelementStart(0,"div",3),n.ɵɵelement(1,"i",4),n.ɵɵelementStart(2,"a",5),n.ɵɵtext(3," 售前咨询电话 "),n.ɵɵelementStart(4,"div",6),n.ɵɵtext(5,"xxxx 转 1"),n.ɵɵelementEnd(),n.ɵɵelementEnd(),n.ɵɵelementEnd(),n.ɵɵelementStart(6,"div",3),n.ɵɵelement(7,"i",7),n.ɵɵelementStart(8,"a",8),n.ɵɵtext(9," 智能顾问 "),n.ɵɵelementStart(10,"div",9),n.ɵɵtext(11,"智能诊断，秒级解答"),n.ɵɵelementEnd(),n.ɵɵelementEnd(),n.ɵɵelementEnd(),n.ɵɵelementStart(12,"div",10),n.ɵɵelement(13,"i",11),n.ɵɵelementStart(14,"a",5),n.ɵɵtext(15," 建议反馈 "),n.ɵɵelementStart(16,"div",9),n.ɵɵtext(17,"XXX不是完美的，我们渴望您的建议"),n.ɵɵelementEnd(),n.ɵɵelementEnd(),n.ɵɵelementEnd())}We.ɵfac=function(e){return new(e||We)(n.ɵɵdirectiveInject(de),n.ɵɵdirectiveInject(n.ChangeDetectorRef),n.ɵɵdirectiveInject(a.EnvironmentService))},We.ɵcmp=n.ɵɵdefineComponent({type:We,selectors:[["ms-topbar"]],hostVars:4,hostBindings:function(e,t){2&e&&n.ɵɵclassProp("alain-ms__topbar",!0)("alain-ms__topbar-single",t.allNav)},inputs:{allNav:"allNav"},decls:10,vars:5,consts:[["defaultLogo",""],[1,"alain-ms__topbar-main"],[4,"ngIf"],[1,"alain-ms__topbar-logo"],["routerLink","/",1,"alain-ms__topbar-logo-img"],[3,"src",4,"ngIf","ngIfElse"],["routerLink","/",1,"alain-ms__topbar-logo-link"],["class","alain-ms__topbar-widget",4,"ngIf"],["src","./assets/logo-color.svg"],[3,"src"],[1,"alain-ms__topbar-widget"]],template:function(e,t){if(1&e&&(n.ɵɵtemplate(0,qe,1,0,"ng-template",null,0,n.ɵɵtemplateRefExtractor),n.ɵɵelementStart(2,"div",1),n.ɵɵtemplate(3,He,1,0,"ms-all-nav",2),n.ɵɵelementStart(4,"div",3),n.ɵɵelementStart(5,"a",4),n.ɵɵtemplate(6,Ue,1,1,"img",5),n.ɵɵelementEnd(),n.ɵɵelementStart(7,"a",6),n.ɵɵtext(8),n.ɵɵelementEnd(),n.ɵɵelementEnd(),n.ɵɵelementEnd(),n.ɵɵtemplate(9,Qe,3,0,"div",7)),2&e){var r=n.ɵɵreference(1);n.ɵɵadvance(3),n.ɵɵproperty("ngIf",t.allNav),n.ɵɵadvance(3),n.ɵɵproperty("ngIf",t.appInfo.logoUrl)("ngIfElse",r),n.ɵɵadvance(2),n.ɵɵtextInterpolate1(" ",t.appInfo.name," "),n.ɵɵadvance(1),n.ɵɵproperty("ngIf",t.inited)}},directives:[t.NgIf,u.RouterLinkWithHref,se,ue,Ne],encapsulation:2,changeDetection:0}),("undefined"==typeof ngDevMode||ngDevMode)&&n.ɵsetClassMetadata(We,[{type:n.Component,args:[{selector:"ms-topbar",templateUrl:"./topbar.component.html",host:{"[class.alain-ms__topbar]":"true","[class.alain-ms__topbar-single]":"allNav"},changeDetection:n.ChangeDetectionStrategy.OnPush}]}],(function(){return[{type:de},{type:n.ChangeDetectorRef},{type:a.EnvironmentService}]}),{allNav:[{type:n.Input}]});var Ge=function(){};function Xe(e,t){if(1&e&&(n.ɵɵelementContainerStart(0),n.ɵɵtext(1),n.ɵɵpipe(2,"abpLocalization"),n.ɵɵelementContainerEnd()),2&e){var r=n.ɵɵnextContext(2);n.ɵɵadvance(1),n.ɵɵtextInterpolate(n.ɵɵpipeBind1(2,1,r.title))}}function Ke(e,t){if(1&e&&(n.ɵɵelementStart(0,"h2",4),n.ɵɵtemplate(1,Xe,3,3,"ng-container",5),n.ɵɵelementEnd()),2&e){var r=n.ɵɵnextContext();n.ɵɵadvance(1),n.ɵɵproperty("nzStringTemplateOutlet",r.title)}}function Ye(e,t){if(1&e&&(n.ɵɵelementContainerStart(0),n.ɵɵtext(1),n.ɵɵpipe(2,"abpLocalization"),n.ɵɵelementContainerEnd()),2&e){var r=n.ɵɵnextContext(2);n.ɵɵadvance(1),n.ɵɵtextInterpolate(n.ɵɵpipeBind1(2,1,r.subTitle))}}function Ze(e,t){if(1&e&&(n.ɵɵelementStart(0,"div",6),n.ɵɵtemplate(1,Ye,3,3,"ng-container",5),n.ɵɵelementEnd()),2&e){var r=n.ɵɵnextContext();n.ɵɵadvance(1),n.ɵɵproperty("nzStringTemplateOutlet",r.subTitle)}}Ge.ɵfac=function(e){return new(e||Ge)},Ge.ɵcmp=n.ɵɵdefineComponent({type:Ge,selectors:[["help"]],hostVars:2,hostBindings:function(e,t){2&e&&n.ɵɵclassProp("ms-help",!0)},decls:5,vars:1,consts:[["nz-popover","","nzPopoverTrigger","click",1,"ms-help__wrap",3,"nzPopoverContent"],[1,"ms-help__text"],["helpTpl",""],[1,"d-flex","align-items-center","mb-sm"],["nz-icon","","nzType","phone",1,"mr-sm","text-xl"],["routerLink","/"],[1,"text-orange","text-xs"],["nz-icon","","nzType","customer-service",1,"mr-sm","text-xl"],["routerLink","/smart"],[1,"text-grey","text-xs"],[1,"d-flex","align-items-center"],["nz-icon","","nzType","edit",1,"mr-sm","text-xl"]],template:function(e,t){if(1&e&&(n.ɵɵelementStart(0,"div",0),n.ɵɵelementStart(1,"span",1),n.ɵɵtext(2," 咨询·建议 "),n.ɵɵelementEnd(),n.ɵɵelementEnd(),n.ɵɵtemplate(3,Je,18,0,"ng-template",null,2,n.ɵɵtemplateRefExtractor)),2&e){var r=n.ɵɵreference(4);n.ɵɵproperty("nzPopoverContent",r)}},directives:[C.NzPopoverDirective,c.NzIconDirective,u.RouterLinkWithHref],encapsulation:2,changeDetection:0}),("undefined"==typeof ngDevMode||ngDevMode)&&n.ɵsetClassMetadata(Ge,[{type:n.Component,args:[{selector:"help",templateUrl:"./help.component.html",host:{"[class.ms-help]":"true"},changeDetection:n.ChangeDetectionStrategy.OnPush}]}],null,null);var et=function(){function e(e,t,n,r){this.router=e,this.srv=t,this.menuSrv=n,this.cdr=r,this._menus=null,this.autoTitle=!0,this.recursiveBreadcrumb=!0}return Object.defineProperty(e.prototype,"menus",{get:function(){return this._menus||(this._menus=this.menuSrv.getPathByUrl(this.router.url.split("?")[0],this.recursiveBreadcrumb)),this._menus},enumerable:!1,configurable:!0}),e.prototype.setTitle=function(){if(void 0===this.title&&this.autoTitle&&this.menus.length>0){var e=this.menus[this.menus.length-1];this.title=e.text}this.cdr.detectChanges()},e.prototype.ngAfterViewInit=function(){var e=this;this.router$=r.merge(this.router.events.pipe(i.filter((function(e){return e instanceof u.NavigationEnd}))),this.srv.notify,this.menuSrv.change).subscribe((function(){e._menus=null,e.setTitle()}))},e.prototype.ngOnDestroy=function(){this.router$.unsubscribe()},e}();function tt(e,t){1&e&&n.ɵɵelement(0,"i",14)}function nt(e,t){if(1&e&&(n.ɵɵelementStart(0,"span",23),n.ɵɵtext(1),n.ɵɵelementEnd()),2&e){var r=n.ɵɵnextContext(3).$implicit;n.ɵɵadvance(1),n.ɵɵtextInterpolate(r.badge)}}function rt(e,t){if(1&e&&(n.ɵɵelementStart(0,"div",19),n.ɵɵelement(1,"span",20),n.ɵɵelementStart(2,"span",21),n.ɵɵtext(3),n.ɵɵelementEnd(),n.ɵɵtemplate(4,nt,2,1,"span",22),n.ɵɵelementEnd()),2&e){var r=n.ɵɵnextContext(2).$implicit;n.ɵɵpropertyInterpolate("routerLink",r.link),n.ɵɵadvance(3),n.ɵɵtextInterpolate(r.text),n.ɵɵadvance(1),n.ɵɵproperty("ngIf",r.badge)}}function it(e,t){if(1&e&&(n.ɵɵelementStart(0,"span",23),n.ɵɵtext(1),n.ɵɵelementEnd()),2&e){var r=n.ɵɵnextContext(3).$implicit;n.ɵɵadvance(1),n.ɵɵtextInterpolate(r.badge)}}function at(e,t){if(1&e&&(n.ɵɵelementStart(0,"a",24),n.ɵɵelement(1,"span",20),n.ɵɵelementStart(2,"span",21),n.ɵɵtext(3),n.ɵɵelementEnd(),n.ɵɵtemplate(4,it,2,1,"span",22),n.ɵɵelementEnd()),2&e){var r=n.ɵɵnextContext(2).$implicit;n.ɵɵproperty("href",r.externalLink,n.ɵɵsanitizeUrl)("target",r.target),n.ɵɵadvance(3),n.ɵɵtextInterpolate(r.text),n.ɵɵadvance(1),n.ɵɵproperty("ngIf",r.badge)}}function ot(e,t){if(1&e&&(n.ɵɵelementContainerStart(0),n.ɵɵtemplate(1,rt,5,3,"div",17),n.ɵɵtemplate(2,at,5,4,"a",18),n.ɵɵelementContainerEnd()),2&e){var r=n.ɵɵnextContext().$implicit;n.ɵɵadvance(1),n.ɵɵproperty("ngIf",r.link),n.ɵɵadvance(1),n.ɵɵproperty("ngIf",!r.link)}}function lt(e,t){1&e&&n.ɵɵelementContainer(0)}et.ɵfac=function(e){return new(e||et)(n.ɵɵdirectiveInject(u.Router),n.ɵɵdirectiveInject(P),n.ɵɵdirectiveInject(o.MenuService),n.ɵɵdirectiveInject(n.ChangeDetectorRef))},et.ɵcmp=n.ɵɵdefineComponent({type:et,selectors:[["page-bar"]],hostVars:2,hostBindings:function(e,t){2&e&&n.ɵɵclassProp("ms-page-bar",!0)},inputs:{autoTitle:"autoTitle",recursiveBreadcrumb:"recursiveBreadcrumb",title:"title",subTitle:"subTitle"},ngContentSelectors:["*"],decls:5,vars:2,consts:[[1,"ms-page-bar__title"],["class","ms-page-bar__title-main",4,"ngIf"],["class","ms-page-bar__title-sub",4,"ngIf"],[1,"ms-page-bar__action"],[1,"ms-page-bar__title-main"],[4,"nzStringTemplateOutlet"],[1,"ms-page-bar__title-sub"]],template:function(e,t){1&e&&(n.ɵɵprojectionDef(),n.ɵɵelementStart(0,"div",0),n.ɵɵtemplate(1,Ke,2,1,"h2",1),n.ɵɵtemplate(2,Ze,2,1,"div",2),n.ɵɵelementEnd(),n.ɵɵelementStart(3,"div",3),n.ɵɵprojection(4),n.ɵɵelementEnd()),2&e&&(n.ɵɵadvance(1),n.ɵɵproperty("ngIf",t.title),n.ɵɵadvance(1),n.ɵɵproperty("ngIf",t.subTitle))},directives:[t.NgIf,b.NzStringTemplateOutletDirective],pipes:[a.LocalizationPipe],encapsulation:2,changeDetection:0}),j([l.InputBoolean(),D("design:type",Object)],et.prototype,"autoTitle",void 0),j([l.InputBoolean(),D("design:type",Object)],et.prototype,"recursiveBreadcrumb",void 0),("undefined"==typeof ngDevMode||ngDevMode)&&n.ɵsetClassMetadata(et,[{type:n.Component,args:[{selector:"page-bar",templateUrl:"./page-bar.component.html",host:{"[class.ms-page-bar]":"true"},changeDetection:n.ChangeDetectionStrategy.OnPush}]}],(function(){return[{type:u.Router},{type:P},{type:o.MenuService},{type:n.ChangeDetectorRef}]}),{autoTitle:[{type:n.Input}],recursiveBreadcrumb:[{type:n.Input}],title:[{type:n.Input}],subTitle:[{type:n.Input}]});var st=function(e){return{"d-none":e}},ct=function(e,t){return{$implicit:e,level:t}};function pt(e,t){if(1&e){var r=n.ɵɵgetCurrentView();n.ɵɵelementContainerStart(0),n.ɵɵelementStart(1,"div",25),n.ɵɵlistener("click",(function(){n.ɵɵrestoreView(r);var e=n.ɵɵnextContext().$implicit;return e.active=!e.active})),n.ɵɵelementStart(2,"span",20),n.ɵɵelement(3,"i",26),n.ɵɵelementEnd(),n.ɵɵelementStart(4,"span",21),n.ɵɵtext(5),n.ɵɵelementEnd(),n.ɵɵelementEnd(),n.ɵɵelementStart(6,"ul",27),n.ɵɵtemplate(7,lt,1,0,"ng-container",8),n.ɵɵelementEnd(),n.ɵɵelementContainerEnd()}if(2&e){var i=n.ɵɵnextContext().$implicit,a=n.ɵɵnextContext().level;n.ɵɵnextContext();var o=n.ɵɵreference(10);n.ɵɵadvance(3),n.ɵɵproperty("nzType",i.active?"caret-down":"caret-right"),n.ɵɵadvance(2),n.ɵɵtextInterpolate(i.text),n.ɵɵadvance(1),n.ɵɵproperty("ngClass",n.ɵɵpureFunction1(5,st,!i.active)),n.ɵɵadvance(1),n.ɵɵproperty("ngTemplateOutlet",o)("ngTemplateOutletContext",n.ɵɵpureFunction2(7,ct,i.children,a+1))}}function ut(e,t){if(1&e&&(n.ɵɵelementStart(0,"li"),n.ɵɵtemplate(1,ot,3,2,"ng-container",16),n.ɵɵtemplate(2,pt,8,10,"ng-container",16),n.ɵɵelementEnd()),2&e){var r=t.$implicit;n.ɵɵadvance(1),n.ɵɵproperty("ngIf",0==r.children.length),n.ɵɵadvance(1),n.ɵɵproperty("ngIf",r.children.length>0)}}function dt(e,t){if(1&e&&n.ɵɵtemplate(0,ut,3,2,"li",15),2&e){var r=t.$implicit;n.ɵɵproperty("ngForOf",r)}}function mt(e,t){1&e&&n.ɵɵelementContainer(0)}var ft=function(e){return{"ms-page-nav__back":e}},gt=function(e){return{$implicit:e,level:1}},vt=function(){function e(e,t,n,r,i){this.srv=e,this.router=t,this.titSrv=n,this.menuSrv=r,this.cdr=i,this._config={},this._menus=[]}return Object.defineProperty(e.prototype,"config",{get:function(){return this._config},set:function(e){var t=e.title,n=(e.titleI18n,e.backHref);e.doc,e.docI18n;this._config.title=t,this._config.backHref=n||""},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"list",{get:function(){return this._menus},set:function(e){this.menuSrv.add(e),this.menuSrv.visit(e,(function(e){return e.active=!0})),this._menus=this.menuSrv.menus},enumerable:!1,configurable:!0}),e.prototype.to=function(e,t){t.preventDefault(),e&&this.router.navigateByUrl(e)},e.prototype.toggle=function(){this.srv.hideNav=!this.srv.hideNav,this.srv.triggerNotify("page-nav")},e.prototype.ngOnChanges=function(){this.cdr.detectChanges()},e}();function ht(e,t){if(1&e&&(n.ɵɵelementContainerStart(0),n.ɵɵtext(1),n.ɵɵelementContainerEnd()),2&e){var r=n.ɵɵnextContext(2);n.ɵɵadvance(1),n.ɵɵtextInterpolate(r.title)}}function yt(e,t){if(1&e&&(n.ɵɵelementStart(0,"div",7),n.ɵɵtemplate(1,ht,2,1,"ng-container",8),n.ɵɵelementEnd()),2&e){var r=n.ɵɵnextContext();n.ɵɵadvance(1),n.ɵɵproperty("nzStringTemplateOutlet",r.title)}}function _t(e,t){if(1&e&&(n.ɵɵelementContainerStart(0),n.ɵɵtext(1),n.ɵɵelementContainerEnd()),2&e){var r=n.ɵɵnextContext(2);n.ɵɵadvance(1),n.ɵɵtextInterpolate(r.subTitle)}}function bt(e,t){if(1&e&&(n.ɵɵelementStart(0,"div",9),n.ɵɵtemplate(1,_t,2,1,"ng-container",8),n.ɵɵelementEnd()),2&e){var r=n.ɵɵnextContext();n.ɵɵadvance(1),n.ɵɵproperty("nzStringTemplateOutlet",r.subTitle)}}function Ct(e,t){if(1&e&&(n.ɵɵelementContainerStart(0),n.ɵɵtext(1),n.ɵɵelementContainerEnd()),2&e){var r=n.ɵɵnextContext(2);n.ɵɵadvance(1),n.ɵɵtextInterpolate(r.extra)}}function St(e,t){if(1&e&&(n.ɵɵelementStart(0,"div",10),n.ɵɵtemplate(1,Ct,2,1,"ng-container",8),n.ɵɵelementEnd()),2&e){var r=n.ɵɵnextContext();n.ɵɵadvance(1),n.ɵɵproperty("nzStringTemplateOutlet",r.extra)}}vt.ɵfac=function(e){return new(e||vt)(n.ɵɵdirectiveInject(P),n.ɵɵdirectiveInject(u.Router),n.ɵɵdirectiveInject(o.TitleService),n.ɵɵdirectiveInject(o.MenuService),n.ɵɵdirectiveInject(n.ChangeDetectorRef))},vt.ɵcmp=n.ɵɵdefineComponent({type:vt,selectors:[["page-nav"]],inputs:{config:"config",list:"list"},features:[n.ɵɵNgOnChangesFeature],decls:18,vars:14,consts:[[1,"ms-page-nav__body"],[1,"ms-page-nav__stage"],[1,"ms-page-nav__scene","ms-page-nav__scene-main"],[1,"ms-page-nav__title",3,"ngClass","title","click"],["nz-icon","","nzType","left",4,"ngIf"],[1,"ms-page-nav__list","scrollbar"],["treeTpl",""],["role","tree",1,"list-unstyled"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"ms-page-nav__control",3,"click"],[1,"ms-page-nav__control-wrap"],[1,"ms-page-nav__control-bg"],[1,"ms-page-nav__control-btn"],["nz-icon","","nzType","menu-fold"],["nz-icon","","nzType","left"],[4,"ngFor","ngForOf"],[4,"ngIf"],["class","ms-page-nav__item","role","treeitem","routerLinkActive","ms-page-nav__item-active",3,"routerLink",4,"ngIf"],["class","ms-page-nav__item","role","treeitem",3,"href","target",4,"ngIf"],["role","treeitem","routerLinkActive","ms-page-nav__item-active",1,"ms-page-nav__item",3,"routerLink"],[1,"ms-page-nav__item-icon"],[1,"ms-page-nav__item-tit"],["class","ms-page-nav__item-badge",4,"ngIf"],[1,"ms-page-nav__item-badge"],["role","treeitem",1,"ms-page-nav__item",3,"href","target"],["role","treeitem",1,"ms-page-nav__item",3,"click"],["nz-icon","",3,"nzType"],["role","tree",1,"list-unstyled",3,"ngClass"]],template:function(e,t){if(1&e&&(n.ɵɵelementStart(0,"div",0),n.ɵɵelementStart(1,"div",1),n.ɵɵelementStart(2,"div",2),n.ɵɵelementStart(3,"div",3),n.ɵɵlistener("click",(function(e){return t.to(t.config.backHref,e)})),n.ɵɵpipe(4,"i18n"),n.ɵɵtemplate(5,tt,1,0,"i",4),n.ɵɵtext(6),n.ɵɵpipe(7,"abpLocalization"),n.ɵɵelementEnd(),n.ɵɵelementStart(8,"div",5),n.ɵɵtemplate(9,dt,1,1,"ng-template",null,6,n.ɵɵtemplateRefExtractor),n.ɵɵelementStart(11,"ul",7),n.ɵɵtemplate(12,mt,1,0,"ng-container",8),n.ɵɵelementEnd(),n.ɵɵelementEnd(),n.ɵɵelementEnd(),n.ɵɵelementEnd(),n.ɵɵelementEnd(),n.ɵɵelementStart(13,"div",9),n.ɵɵlistener("click",(function(){return t.toggle()})),n.ɵɵelementStart(14,"div",10),n.ɵɵelement(15,"div",11),n.ɵɵelementStart(16,"div",12),n.ɵɵelement(17,"i",13),n.ɵɵelementEnd(),n.ɵɵelementEnd(),n.ɵɵelementEnd()),2&e){var r=n.ɵɵreference(10);n.ɵɵadvance(3),n.ɵɵproperty("ngClass",n.ɵɵpureFunction1(10,ft,t.config.backHref))("title",t.config.backHref?n.ɵɵpipeBind1(4,6,"ms.page-nav.back"):""),n.ɵɵadvance(2),n.ɵɵproperty("ngIf",t.config.backHref),n.ɵɵadvance(1),n.ɵɵtextInterpolate1(" ",n.ɵɵpipeBind1(7,8,t.config.title)," "),n.ɵɵadvance(6),n.ɵɵproperty("ngTemplateOutlet",r)("ngTemplateOutletContext",n.ɵɵpureFunction1(12,gt,t.list))}},directives:[t.NgClass,t.NgIf,t.NgTemplateOutlet,c.NzIconDirective,t.NgForOf,u.RouterLinkActive,u.RouterLink],pipes:[o.ɵa,a.LocalizationPipe],encapsulation:2,changeDetection:0}),("undefined"==typeof ngDevMode||ngDevMode)&&n.ɵsetClassMetadata(vt,[{type:n.Component,args:[{selector:"page-nav",templateUrl:"./page-nav.component.html",changeDetection:n.ChangeDetectionStrategy.OnPush}]}],(function(){return[{type:P},{type:u.Router},{type:o.TitleService},{type:o.MenuService},{type:n.ChangeDetectorRef}]}),{config:[{type:n.Input}],list:[{type:n.Input}]});var xt=function(e){return{"ms-page-single__wide":e}},It=function(){function e(e){this.brand=e,this.wide=!0,this.fixed=!1}return e.prototype.ngOnInit=function(){},e.prototype.ngOnChanges=function(){this.brand.setFixed(this.fixed)},e.prototype.ngOnDestroy=function(){this.brand.setFixed(!1)},e}();function Mt(e,t){if(1&e&&(n.ɵɵelementContainerStart(0),n.ɵɵtext(1),n.ɵɵelementContainerEnd()),2&e){var r=n.ɵɵnextContext(2);n.ɵɵadvance(1),n.ɵɵtextInterpolate(r.title)}}function Et(e,t){if(1&e&&(n.ɵɵelementStart(0,"div",4),n.ɵɵtemplate(1,Mt,2,1,"ng-container",5),n.ɵɵelementEnd()),2&e){var r=n.ɵɵnextContext();n.ɵɵadvance(1),n.ɵɵproperty("nzStringTemplateOutlet",r.title)}}function Ot(e,t){if(1&e&&(n.ɵɵelementContainerStart(0),n.ɵɵtext(1),n.ɵɵelementContainerEnd()),2&e){var r=n.ɵɵnextContext(2);n.ɵɵadvance(1),n.ɵɵtextInterpolate(r.extra)}}function zt(e,t){if(1&e&&(n.ɵɵelementStart(0,"div",6),n.ɵɵtemplate(1,Ot,2,1,"ng-container",5),n.ɵɵelementEnd()),2&e){var r=n.ɵɵnextContext();n.ɵɵadvance(1),n.ɵɵproperty("nzStringTemplateOutlet",r.extra)}}It.ɵfac=function(e){return new(e||It)(n.ɵɵdirectiveInject(P))},It.ɵcmp=n.ɵɵdefineComponent({type:It,selectors:[["page-single"]],hostVars:2,hostBindings:function(e,t){2&e&&n.ɵɵclassProp("ms-page-single",!0)},inputs:{wide:"wide",fixed:"fixed",title:"title",subTitle:"subTitle",extra:"extra"},features:[n.ɵɵNgOnChangesFeature],ngContentSelectors:["*"],decls:8,vars:9,consts:[[1,"ms-page-single__bar"],[1,"ms-page-single__wrap",3,"ngClass"],[1,"ms-page-single__bar-desc"],["class","ms-page-single__bar-title",4,"ngIf"],["class","ms-page-single__bar-sub-title",4,"ngIf"],["class","ms-page-single__bar-extra",4,"ngIf"],[1,"ms-page-single__wrap","ms-page-single__body",3,"ngClass"],[1,"ms-page-single__bar-title"],[4,"nzStringTemplateOutlet"],[1,"ms-page-single__bar-sub-title"],[1,"ms-page-single__bar-extra"]],template:function(e,t){1&e&&(n.ɵɵprojectionDef(),n.ɵɵelementStart(0,"div",0),n.ɵɵelementStart(1,"div",1),n.ɵɵelementStart(2,"div",2),n.ɵɵtemplate(3,yt,2,1,"div",3),n.ɵɵtemplate(4,bt,2,1,"div",4),n.ɵɵelementEnd(),n.ɵɵtemplate(5,St,2,1,"div",5),n.ɵɵelementEnd(),n.ɵɵelementEnd(),n.ɵɵelementStart(6,"div",6),n.ɵɵprojection(7),n.ɵɵelementEnd()),2&e&&(n.ɵɵadvance(1),n.ɵɵproperty("ngClass",n.ɵɵpureFunction1(5,xt,t.wide)),n.ɵɵadvance(2),n.ɵɵproperty("ngIf",t.title),n.ɵɵadvance(1),n.ɵɵproperty("ngIf",t.subTitle),n.ɵɵadvance(1),n.ɵɵproperty("ngIf",t.extra),n.ɵɵadvance(1),n.ɵɵproperty("ngClass",n.ɵɵpureFunction1(7,xt,t.wide)))},directives:[t.NgClass,t.NgIf,b.NzStringTemplateOutletDirective],encapsulation:2,changeDetection:0}),j([l.InputBoolean(),D("design:type",Object)],It.prototype,"wide",void 0),j([l.InputBoolean(),D("design:type",Object)],It.prototype,"fixed",void 0),("undefined"==typeof ngDevMode||ngDevMode)&&n.ɵsetClassMetadata(It,[{type:n.Component,args:[{selector:"page-single",templateUrl:"./page-single.component.html",host:{"[class.ms-page-single]":"true"},changeDetection:n.ChangeDetectionStrategy.OnPush}]}],(function(){return[{type:P}]}),{wide:[{type:n.Input}],fixed:[{type:n.Input}],title:[{type:n.Input}],subTitle:[{type:n.Input}],extra:[{type:n.Input}]});var Nt=function(){};function jt(e,t){if(1&e&&n.ɵɵelement(0,"page-nav",4),2&e){var r=n.ɵɵnextContext();n.ɵɵproperty("config",r.navConfig)("list",r.navList)}}Nt.ɵfac=function(e){return new(e||Nt)},Nt.ɵcmp=n.ɵɵdefineComponent({type:Nt,selectors:[["panel"]],hostVars:2,hostBindings:function(e,t){2&e&&n.ɵɵclassProp("ms-panel",!0)},inputs:{title:"title",extra:"extra"},ngContentSelectors:["*"],decls:5,vars:2,consts:[[1,"ms-panel__hd"],["class","ms-panel__hd-title",4,"ngIf"],["class","ms-panel__hd-extra",4,"ngIf"],[1,"ms-panel__bd"],[1,"ms-panel__hd-title"],[4,"nzStringTemplateOutlet"],[1,"ms-panel__hd-extra"]],template:function(e,t){1&e&&(n.ɵɵprojectionDef(),n.ɵɵelementStart(0,"div",0),n.ɵɵtemplate(1,Et,2,1,"div",1),n.ɵɵtemplate(2,zt,2,1,"div",2),n.ɵɵelementEnd(),n.ɵɵelementStart(3,"div",3),n.ɵɵprojection(4),n.ɵɵelementEnd()),2&e&&(n.ɵɵadvance(1),n.ɵɵproperty("ngIf",t.title),n.ɵɵadvance(1),n.ɵɵproperty("ngIf",t.extra))},directives:[t.NgIf,b.NzStringTemplateOutletDirective],encapsulation:2,changeDetection:0}),("undefined"==typeof ngDevMode||ngDevMode)&&n.ɵsetClassMetadata(Nt,[{type:n.Component,args:[{selector:"panel",templateUrl:"./panel.component.html",host:{"[class.ms-panel]":"true"},changeDetection:n.ChangeDetectionStrategy.OnPush}]}],null,{title:[{type:n.Input}],extra:[{type:n.Input}]});var Dt=function(e){return{"alain-ms__product-col-1":e}},kt=function(e){return{"alain-ms__console":e}},wt=function(){function e(e){this.srv=e,this.nav=!1,this.navConfig={},this.navList=[],this.hasConsoleCss=!0}return Object.defineProperty(e.prototype,"hideNav",{get:function(){return this.srv.hideNav},enumerable:!1,configurable:!0}),e}();wt.ɵfac=function(e){return new(e||wt)(n.ɵɵdirectiveInject(P))},wt.ɵcmp=n.ɵɵdefineComponent({type:wt,selectors:[["service-layout"]],inputs:{nav:"nav",navConfig:"navConfig",navList:"navList",hasConsoleCss:"hasConsoleCss"},ngContentSelectors:["*"],decls:5,vars:7,consts:[[1,"alain-ms__product",3,"ngClass"],[3,"config","list",4,"ngIf"],[1,"alain-ms__product-body","scrollbar"],[3,"ngClass"],[3,"config","list"]],template:function(e,t){1&e&&(n.ɵɵprojectionDef(),n.ɵɵelementStart(0,"div",0),n.ɵɵtemplate(1,jt,1,2,"page-nav",1),n.ɵɵelementStart(2,"div",2),n.ɵɵelementStart(3,"div",3),n.ɵɵprojection(4),n.ɵɵelementEnd(),n.ɵɵelementEnd(),n.ɵɵelementEnd()),2&e&&(n.ɵɵproperty("ngClass",n.ɵɵpureFunction1(3,Dt,t.nav&&!t.hideNav)),n.ɵɵadvance(1),n.ɵɵproperty("ngIf",t.nav),n.ɵɵadvance(2),n.ɵɵproperty("ngClass",n.ɵɵpureFunction1(5,kt,t.hasConsoleCss)))},directives:[t.NgClass,t.NgIf,vt],encapsulation:2}),j([l.InputBoolean(),D("design:type",Object)],wt.prototype,"nav",void 0),("undefined"==typeof ngDevMode||ngDevMode)&&n.ɵsetClassMetadata(wt,[{type:n.Component,args:[{selector:"service-layout",templateUrl:"./service-layout.component.html"}]}],(function(){return[{type:P}]}),{nav:[{type:n.Input}],navConfig:[{type:n.Input}],navList:[{type:n.Input}],hasConsoleCss:[{type:n.Input}]});var Tt=[Ge,F,et,vt,It,Nt,wt],Pt=function(){};function Ft(e,t){1&e&&n.ɵɵelement(0,"ms-sidebar")}Pt.ɵfac=function(e){return new(e||Pt)},Pt.ɵmod=n.ɵɵdefineNgModule({type:Pt}),Pt.ɵinj=n.ɵɵdefineInjector({imports:[[t.CommonModule,u.RouterModule,v.FormsModule,o.AlainThemeModule.forChild(),C.NzPopoverModule,c.NzIconModule,b.NzOutletModule,a.LocalizationModule]]}),("undefined"==typeof ngJitMode||ngJitMode)&&n.ɵɵsetNgModuleScope(Pt,{declarations:[Ge,F,et,vt,It,Nt,wt],imports:[t.CommonModule,u.RouterModule,v.FormsModule,o.AlainThemeModule,C.NzPopoverModule,c.NzIconModule,b.NzOutletModule,a.LocalizationModule],exports:[Ge,F,et,vt,It,Nt,wt]}),("undefined"==typeof ngDevMode||ngDevMode)&&n.ɵsetClassMetadata(Pt,[{type:n.NgModule,args:[{imports:[t.CommonModule,u.RouterModule,v.FormsModule,o.AlainThemeModule.forChild(),C.NzPopoverModule,c.NzIconModule,b.NzOutletModule,a.LocalizationModule],declarations:Tt,exports:Tt}]}],null,null);var Rt=function(){function e(e,t,n,r,i,a,o,l,s,c){var p=this;this.el=o,this.renderer=l,this.srv=s,this.doc=c,this.isFetching=!1,this.hasAllNav=!1,this.hasSidebar=!0;var d=Object.assign({hasAllNav:!1,hasSidebar:!0},r.snapshot.data);this.hasAllNav=!0===d.hasAllNav,this.hasSidebar=!0===d.hasSidebar,n.events.subscribe((function(e){if(!p.isFetching&&e instanceof u.RouteConfigLoadStart&&(p.isFetching=!0,p.scrollToTop()),e instanceof u.NavigationError)return p.isFetching=!1,void i.error("无法加载"+e.url+"路由",{nzDuration:3e3});e instanceof u.NavigationEnd&&(p.isFetching=!1,a.exists(e.url)||p.scrollToTop())}));var m={"screen-xs":"(max-width: 575px)","screen-sm":"(min-width: 576px) and (max-width: 767px)","screen-md":"(min-width: 768px) and (max-width: 991px)","screen-lg":"(min-width: 992px) and (max-width: 1199px)","screen-xl":"(min-width: 1200px)"};e.observe(["(min-width: 1200px)","(min-width: 992px) and (max-width: 1199px)","(min-width: 768px) and (max-width: 991px)","(min-width: 576px) and (max-width: 767px)","(max-width: 575px)"]).subscribe((function(){p.queryCls=Object.keys(m).find((function(e){return t.matchMedia(m[e]).matches})),p.setClass()}))}return Object.defineProperty(e.prototype,"isMobile",{get:function(){return this.srv.isMobile},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"body",{get:function(){return this.doc.body},enumerable:!1,configurable:!0}),e.prototype.scrollToTop=function(){var e=this.doc.querySelector(".alain-ms__product-body");e&&(e.scrollTop=0)},e.prototype.setClass=function(){var e,t=this,n=t.el,r=t.renderer,i=t.queryCls;l.updateHostClass(n.nativeElement,r,((e={})["alain-ms"]=!0,e[i]=!0,e),!0)},e.prototype.setBodyClass=function(){var e,t=this.srv.layout,n=t.hasTopbar,r=t.hasSidebar,i=t.hasFixed,a=t.colorWeak;l.updateHostClass(this.body,this.renderer,((e={"color-weak":a})["alain-ms__has-topbar"]=n,e["alain-ms__has-sidebar"]=r,e["alain-ms__has-fixed"]=i,e))},e.prototype.ngOnInit=function(){var e=this;this.notify$=this.srv.notify.subscribe((function(){e.setClass(),e.setBodyClass()}))},e.prototype.ngOnDestroy=function(){this.notify$.unsubscribe(),this.body.classList.remove("alain-ms__has-topbar","alain-ms__has-sidebar","alain-ms__has-fixed")},e}();Rt.ɵfac=function(e){return new(e||Rt)(n.ɵɵdirectiveInject(s.BreakpointObserver),n.ɵɵdirectiveInject(s.MediaMatcher),n.ɵɵdirectiveInject(u.Router),n.ɵɵdirectiveInject(u.ActivatedRoute),n.ɵɵdirectiveInject(f.NzMessageService),n.ɵɵdirectiveInject(S.ReuseTabService),n.ɵɵdirectiveInject(n.ElementRef),n.ɵɵdirectiveInject(n.Renderer2),n.ɵɵdirectiveInject(P),n.ɵɵdirectiveInject(t.DOCUMENT))},Rt.ɵcmp=n.ɵɵdefineComponent({type:Rt,selectors:[["layout-ms"]],decls:6,vars:4,consts:[[3,"allNav"],[4,"ngIf"],[1,"brand-page-loading",3,"hidden"],["nzSpinning",""],[1,"alain-ms__body",3,"hidden"]],template:function(e,t){1&e&&(n.ɵɵelement(0,"ms-topbar",0),n.ɵɵtemplate(1,Ft,1,0,"ms-sidebar",1),n.ɵɵelementStart(2,"div",2),n.ɵɵelement(3,"nz-spin",3),n.ɵɵelementEnd(),n.ɵɵelementStart(4,"div",4),n.ɵɵelement(5,"router-outlet"),n.ɵɵelementEnd()),2&e&&(n.ɵɵproperty("allNav",t.hasAllNav),n.ɵɵadvance(1),n.ɵɵproperty("ngIf",t.hasSidebar),n.ɵɵadvance(1),n.ɵɵproperty("hidden",!t.isFetching),n.ɵɵadvance(2),n.ɵɵproperty("hidden",t.isFetching))},directives:[We,t.NgIf,p.NzSpinComponent,u.RouterOutlet,Ve],encapsulation:2}),("undefined"==typeof ngDevMode||ngDevMode)&&n.ɵsetClassMetadata(Rt,[{type:n.Component,args:[{selector:"layout-ms",templateUrl:"./ms.component.html"}]}],(function(){return[{type:s.BreakpointObserver},{type:s.MediaMatcher},{type:u.Router},{type:u.ActivatedRoute},{type:f.NzMessageService},{type:S.ReuseTabService},{type:n.ElementRef},{type:n.Renderer2},{type:P},{type:void 0,decorators:[{type:n.Inject,args:[t.DOCUMENT]}]}]}),null);var $t=[{provide:n.APP_INITIALIZER,useFactory:function(e){return function(){!function(e){var t=e.get(u.Router),n=e.get(De);t.events.pipe(i.filter((function(e){return e instanceof u.ResolveEnd}))).subscribe((function(e){n.fetchPageNavs(e.state)}))}(e)}},deps:[n.Injector],multi:!0}];var Lt=[se,Me,ue,Ne,ge,Ce],At=w([Rt,Ve,We],Lt),Bt=[Ge,vt,et,It,Nt,wt,F],Vt=function(){function e(){}return e.forRoot=function(){return{ngModule:e,providers:[$t]}},e}();Vt.ɵfac=function(e){return new(e||Vt)},Vt.ɵmod=n.ɵɵdefineNgModule({type:Vt}),Vt.ɵinj=n.ɵɵdefineInjector({imports:[[a.CoreModule,u.RouterModule,v.FormsModule,x.DragDropModule,Pt,p.NzSpinModule,_.NzAnchorModule,h.NzAutocompleteModule,M.NzAvatarModule,E.NzDividerModule,g.NzInputModule,c.NzIconModule,o.AlainThemeModule.forChild(),I.ThemeBtnModule]]}),("undefined"==typeof ngJitMode||ngJitMode)&&n.ɵɵsetNgModuleScope(Vt,{declarations:[Rt,Ve,We,se,Me,ue,Ne,ge,Ce],imports:[a.CoreModule,u.RouterModule,v.FormsModule,x.DragDropModule,Pt,p.NzSpinModule,_.NzAnchorModule,h.NzAutocompleteModule,M.NzAvatarModule,E.NzDividerModule,g.NzInputModule,c.NzIconModule,o.AlainThemeModule,I.ThemeBtnModule],exports:[Rt,Ve,We,se,Me,ue,Ne,ge,Ce,Ge,vt,et,It,Nt,wt,F]}),("undefined"==typeof ngDevMode||ngDevMode)&&n.ɵsetClassMetadata(Vt,[{type:n.NgModule,args:[{imports:[a.CoreModule,u.RouterModule,v.FormsModule,x.DragDropModule,Pt,p.NzSpinModule,_.NzAnchorModule,h.NzAutocompleteModule,M.NzAvatarModule,E.NzDividerModule,g.NzInputModule,c.NzIconModule,o.AlainThemeModule.forChild(),I.ThemeBtnModule],declarations:w(At),exports:w(At,[Bt])}]}],(function(){return[]}),null),e.BrandService=P,e.LayoutModule=Vt,e.LayoutStateService=De,e.MSAllNavComponent=se,e.MSAllNavService=T,e.MSHelpComponent=Ge,e.MSLangsComponent=ue,e.MSLayoutComponent=Rt,e.MSLinkToDirective=F,e.MSNoticeComponent=ge,e.MSPageBarComponent=et,e.MSPageNavComponent=vt,e.MSPageSingleComponent=It,e.MSPanelComponent=Nt,e.MSProductService=ke,e.MSRegionComponent=Ce,e.MSRegionService=ve,e.MSSearchComponent=Me,e.MSServiceLayoutComponent=wt,e.MSSharedModule=Pt,e.MSSidebarComponent=Ve,e.MSTopbarComponent=We,e.MSTopbarService=de,e.MSUserComponent=Ne,e.MS_COMPONENTS=At,e.MS_SHARED_COMPONENTS=Bt,e.MS_WIDGETS=Lt,e.RoutesProcessor=je,Object.defineProperty(e,"__esModule",{value:!0})}));
//# sourceMappingURL=fs-tw-theme-alain-ms-layout.umd.min.js.map