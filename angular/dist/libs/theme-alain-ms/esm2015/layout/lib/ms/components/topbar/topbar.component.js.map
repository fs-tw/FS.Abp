{"version":3,"file":"topbar.component.js","sourceRoot":"","sources":["../../../../../../../../../libs/theme-alain-ms/layout/src/lib/ms/components/topbar/topbar.component.ts","../../../../../../../../../libs/theme-alain-ms/layout/src/lib/ms/components/topbar/topbar.component.html"],"names":[],"mappings":"AAAA,OAAO,EACL,uBAAuB,EACvB,iBAAiB,EACjB,SAAS,EACT,KAAK,GAEN,MAAM,eAAe,CAAC;AAIvB,OAAO,EAEL,eAAe,GAChB,MAAM,+BAA+B,CAAC;AACvC,OAAO,EAAmB,kBAAkB,EAAE,MAAM,cAAc,CAAC;;;;;;;;;;ICbjE,yBAAqC;;;IAGrC,6BAAwC;;;IAGpC,yBAAwE;;;IAAzB,8DAAuB;;;IAQ5E,+BAAoD;IAqBlD,2BAAqB;IAErB,0BAAmB;IACrB,iBAAM;;ADdN,MAAM,OAAO,iBAAiB;IAU5B,YACU,GAAoB;IAC5B,gCAAgC;IACxB,GAAsB,EACtB,WAA+B;QAH/B,QAAG,GAAH,GAAG,CAAiB;QAEpB,QAAG,GAAH,GAAG,CAAmB;QACtB,gBAAW,GAAX,WAAW,CAAoB;QAVzC,WAAM,GAAG,KAAK,CAAC;QAIN,WAAM,GAAG,KAAK,CAAC;IAOrB,CAAC;IAdJ,IAAI,OAAO;QACT,OAAO,IAAI,CAAC,WAAW,CAAC,cAAc,EAAE,CAAC,WAAW,CAAC;IACvD,CAAC;IAcD,QAAQ;QACN,IAAI,CAAC,GAAG,CAAC,OAAO,EAAE,CAAC,SAAS,CAAC,GAAG,EAAE;YAChC,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC;YACnB,IAAI,CAAC,UAAU,EAAE,CAAC;YAClB,IAAI,CAAC,GAAG,CAAC,aAAa,EAAE,CAAC;QAC3B,CAAC,CAAC,CAAC;IACL,CAAC;IAEO,UAAU;QAChB,MAAM,GAAG,GAAG,IAAI,CAAC,GAAG,CAAC,IAAI,CAAC,QAAS,CAAC;QACpC,IAAI,CAAC,KAAK,GAAG,CAAC,GAAG,CAAC,OAAO,EAAE,GAAG,CAAC,SAAS,EAAE,GAAG,CAAC,OAAO,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,EAAE,EAAE;YAC/D,IAAI,CAAC,CAAC,SAAS,IAAI,IAAI,EAAE;gBACvB,CAAC,CAAC,SAAS,GAAG,EAAE,CAAC;aAClB;YACD,IAAI,CAAC,CAAC,CAAC,KAAK,IAAI,CAAC,CAAC,KAAK,CAAC,MAAM,KAAK,CAAC,EAAE;gBACpC,CAAC,CAAC,KAAK,GAAG,SAAS,CAAC;aACrB;iBAAM;gBACL,CAAC,CAAC,SAAS,IAAI,sBAAsB,CAAC;aACvC;YACD,OAAO,CAAC,CAAC;QACX,CAAC,CAAC,CAAC;IACL,CAAC;;kFAtCU,iBAAiB;sDAAjB,iBAAiB;;;QCzB9B,mHAEc;QACd,8BAAmC;QACjC,gFAAwC;QACxC,8BAAmC;QACjC,4BAAoD;QAClD,kEAAwE;QAC1E,iBAAI;QACJ,4BAAqD;QACnD,YACF;QAAA,iBAAI;QACN,iBAAM;QAER,iBAAM;QACN,kEAwBM;;;QAnCS,eAAY;QAAZ,iCAAY;QAGf,eAAuB;QAAvB,0CAAuB,iBAAA;QAG7B,eACF;QADE,iDACF;QAIkC,eAAY;QAAZ,iCAAY;;uFDUrC,iBAAiB;cAT7B,SAAS;eAAC;gBACT,QAAQ,EAAE,WAAW;gBACrB,WAAW,EAAE,yBAAyB;gBACtC,IAAI,EAAE;oBACJ,0BAA0B,EAAE,MAAM;oBAClC,iCAAiC,EAAE,QAAQ;iBAC5C;gBACD,eAAe,EAAE,uBAAuB,CAAC,MAAM;aAChD;mIASU,MAAM;kBAAd,KAAK","sourcesContent":["import {\r\n  ChangeDetectionStrategy,\r\n  ChangeDetectorRef,\r\n  Component,\r\n  Input,\r\n  OnInit,\r\n} from '@angular/core';\r\n// import { UserService } from '@core';\r\nimport { _HttpClient } from '@delon/theme';\r\n\r\nimport {\r\n  MSTopbarNavLink,\r\n  MSTopbarService,\r\n} from '../../services/topbar.service';\r\nimport { ApplicationInfo, EnvironmentService } from '@abp/ng.core';\r\n\r\n@Component({\r\n  selector: 'ms-topbar',\r\n  templateUrl: './topbar.component.html',\r\n  host: {\r\n    '[class.alain-ms__topbar]': 'true',\r\n    '[class.alain-ms__topbar-single]': 'allNav',\r\n  },\r\n  changeDetection: ChangeDetectionStrategy.OnPush,\r\n})\r\nexport class MSTopbarComponent implements OnInit {\r\n  get appInfo(): ApplicationInfo {\r\n    return this.environment.getEnvironment().application;\r\n  }\r\n  inited = false;\r\n\r\n  links!: MSTopbarNavLink[];\r\n\r\n  @Input() allNav = false;\r\n  userSrv: any;\r\n  constructor(\r\n    private srv: MSTopbarService,\r\n    //  public userSrv: UserService,\r\n    private cdr: ChangeDetectorRef,\r\n    private environment: EnvironmentService\r\n  ) {}\r\n\r\n  ngOnInit(): void {\r\n    this.srv.getData().subscribe(() => {\r\n      this.inited = true;\r\n      this.mergeLinks();\r\n      this.cdr.detectChanges();\r\n    });\r\n  }\r\n\r\n  private mergeLinks(): void {\r\n    const res = this.srv.data.navLinks!;\r\n    this.links = [res.finance, res.workorder, res.support].map((i) => {\r\n      if (i.className == null) {\r\n        i.className = '';\r\n      }\r\n      if (!i.links || i.links.length === 0) {\r\n        i.links = undefined;\r\n      } else {\r\n        i.className += ' alain-ms__topbar-dd';\r\n      }\r\n      return i;\r\n    });\r\n  }\r\n}\r\n","<ng-template #defaultLogo>\r\n  <img src=\"./assets/logo-color.svg\" />\r\n</ng-template>\r\n<div class=\"alain-ms__topbar-main\">\r\n  <ms-all-nav *ngIf=\"allNav\"></ms-all-nav>\r\n  <div class=\"alain-ms__topbar-logo\">\r\n    <a routerLink=\"/\" class=\"alain-ms__topbar-logo-img\">\r\n      <img *ngIf=\"appInfo.logoUrl; else defaultLogo\" [src]=\"appInfo.logoUrl\"/>\r\n    </a>\r\n    <a routerLink=\"/\" class=\"alain-ms__topbar-logo-link\">\r\n      {{ appInfo.name }}\r\n    </a>\r\n  </div>\r\n  <!-- <ms-region *ngIf=\"userSrv?.isLogin\" class=\"hidden-md\"></ms-region> -->\r\n</div>\r\n<div class=\"alain-ms__topbar-widget\" *ngIf=\"inited\">\r\n  <!-- 搜索 -->\r\n  <!-- <ms-search class=\"hidden-xs\"></ms-search> -->\r\n  <!-- 消息 -->\r\n  <!-- <ms-notice></ms-notice> -->\r\n  <!-- 菜单 -->\r\n  <!-- <div *ngFor=\"let p of links\" class=\"alain-ms__topbar-item\" [ngClass]=\"p.className\">\r\n    <a class=\"alain-ms__topbar-item-btn\" [link-to]=\"p\">{{ p.text }}</a>\r\n    <ul class=\"alain-ms__topbar-dd-menu\" *ngIf=\"p.links\">\r\n      <li *ngFor=\"let i of p.links\">\r\n        <a class=\"alain-ms__topbar-dd-item\" [link-to]=\"i\">{{ i.text }}</a>\r\n      </li>\r\n    </ul>\r\n  </div> -->\r\n  <!-- 购物车 -->\r\n  <!-- <div class=\"alain-ms__topbar-item hidden-mobile\" class=\"hidden-xs\">\r\n    <a class=\"alain-ms__topbar-item-btn alain-ms__topbar-item-icon\" routerLink=\"/\">\r\n      <i nz-icon nzType=\"shopping-cart\"></i>\r\n    </a>\r\n  </div> -->\r\n  <!-- 语言 -->\r\n  <ms-langs></ms-langs>\r\n  <!-- 用户 -->\r\n  <ms-user></ms-user>\r\n</div>\r\n"]}