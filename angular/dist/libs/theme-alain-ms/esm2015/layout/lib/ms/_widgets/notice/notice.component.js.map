{"version":3,"file":"notice.component.js","sourceRoot":"","sources":["../../../../../../../../../libs/theme-alain-ms/layout/src/lib/ms/_widgets/notice/notice.component.ts","../../../../../../../../../libs/theme-alain-ms/layout/src/lib/ms/_widgets/notice/notice.component.html"],"names":[],"mappings":"AAAA,OAAO,EAAE,uBAAuB,EAAE,SAAS,EAAE,MAAM,EAAE,MAAM,eAAe,CAAC;AAC3E,OAAO,EAAE,MAAM,EAAE,MAAM,iBAAiB,CAAC;AACzC,OAAO,EAAE,gBAAgB,EAAiB,MAAM,aAAa,CAAC;AAC9D,OAAO,EAAE,eAAe,EAAE,MAAM,cAAc,CAAC;AAC/C,OAAO,EAAE,gBAAgB,EAAE,MAAM,uBAAuB,CAAC;AACzD,OAAO,EAAoC,eAAe,EAAE,MAAM,+BAA+B,CAAC;;;;;;;;;ICH7E,6BAA8D;IAAA,YAAiB;IAAA,iBAAK;;;IAAtB,eAAiB;IAAjB,wCAAiB;;;IAQlG,6BAAsE;IACpE,+BAA0C;IAAA,YAAa;IAAA,iBAAM;IAC7D,gCAA0C;IAAA,YAAY;IAAA,iBAAO;IAC/D,iBAAI;;;IAHoD,8BAAa;IACzB,eAAa;IAAb,gCAAa;IACb,eAAY;IAAZ,+BAAY;;ADK1D,MAAM,OAAO,iBAAiB;IAY5B,YACU,GAAoB,EACpB,MAAc,EACY,YAA2B,EACtD,QAAyB,EACzB,GAAqB;QAJpB,QAAG,GAAH,GAAG,CAAiB;QACpB,WAAM,GAAN,MAAM,CAAQ;QACY,iBAAY,GAAZ,YAAY,CAAe;QACtD,aAAQ,GAAR,QAAQ,CAAiB;QACzB,QAAG,GAAH,GAAG,CAAkB;IAC3B,CAAC;IAjBJ,IAAI,IAAI;QACN,OAAO,IAAI,CAAC,GAAG,CAAC,QAAQ,CAAC,GAAG,CAAC,CAAC,CAAC,EAAE,EAAE;YACjC,CAAC,CAAC,IAAI,GAAG,IAAI,CAAC,CAAC,CAAC,UAAU,GAAG,CAAC,CAAC,EAAE,CAAC;YAClC,OAAO,CAAC,CAAC;QACX,CAAC,CAAC,CAAC;IACL,CAAC;IAED,IAAI,CAAC;QACH,OAAO,IAAI,CAAC,GAAG,CAAC,MAAM,CAAC,SAAS,CAAC,CAAC;IACpC,CAAC;IAUD,MAAM;QACJ,IAAI,CAAC,YAAY,CAAC,KAAK,EAAE,CAAC;QAC1B,IAAI,CAAC,MAAM,CAAC,aAAa,CAAC,IAAI,CAAC,YAAY,CAAC,SAAU,CAAC,CAAC;IAC1D,CAAC;;kFAvBU,iBAAiB,kGAelB,gBAAgB;sDAff,iBAAiB;;;QCjB9B,+BAAwC;QACtC,+BAAgC;QAC9B,YAAiB;QAAA,gEAAoF;QACvG,iBAAO;QACT,iBAAO;QACP,8BAAsC;QACpC,8BAAiC;QAC/B,YACA;QAAA,4BAA+C;QAAA,YAAuB;QAAA,iBAAI;QAC5E,iBAAM;QACN,8DAGI;QACJ,+BAAiC;QAC/B,6BAAyD;QAAA,aAAY;QAAA,iBAAI;QAC3E,iBAAM;QACR,iBAAM;;QAfF,eAAiB;QAAjB,+CAAiB;QAAK,eAAqB;QAArB,0CAAqB;QAK3C,eACA;QADA,4CACA;QAAuB,eAAuB;QAAvB,yCAAuB;QAAC,eAAuB;QAAvB,2CAAuB;QAEzB,eAAO;QAAP,kCAAO;QAKT,eAAa;QAAb,+BAAa;QAAC,eAAY;QAAZ,gCAAY;;uFDE5D,iBAAiB;cAV7B,SAAS;eAAC;gBACT,QAAQ,EAAE,WAAW;gBACrB,WAAW,EAAE,yBAAyB;gBACtC,IAAI,EAAE;oBACJ,+BAA+B,EAAE,MAAM;oBACvC,6BAA6B,EAAE,MAAM;oBACrC,0BAA0B,EAAE,MAAM;iBACnC;gBACD,eAAe,EAAE,uBAAuB,CAAC,MAAM;aAChD;;sBAgBI,MAAM;uBAAC,gBAAgB","sourcesContent":["import { ChangeDetectionStrategy, Component, Inject } from '@angular/core';\r\nimport { Router } from '@angular/router';\r\nimport { DA_SERVICE_TOKEN, ITokenService } from '@delon/auth';\r\nimport { SettingsService } from '@delon/theme';\r\nimport { NzMessageService } from 'ng-zorro-antd/message';\r\nimport { MSTopbarMessage, MSTopbarNavLink, MSTopbarService } from '../../services/topbar.service';\r\n\r\n@Component({\r\n  selector: 'ms-notice',\r\n  templateUrl: './notice.component.html',\r\n  host: {\r\n    '[class.alain-ms__topbar-item]': 'true',\r\n    '[class.alain-ms__topbar-dd]': 'true',\r\n    '[class.alain-ms__notice]': 'true',\r\n  },\r\n  changeDetection: ChangeDetectionStrategy.OnPush,\r\n})\r\nexport class MSNoticeComponent {\r\n  get list(): MSTopbarMessage[] {\r\n    return this.srv.messages.map((i) => {\r\n      i.link = this.l.messageUrl + i.id;\r\n      return i;\r\n    });\r\n  }\r\n\r\n  get l(): MSTopbarNavLink {\r\n    return this.srv.getNav('message');\r\n  }\r\n\r\n  constructor(\r\n    private srv: MSTopbarService,\r\n    private router: Router,\r\n    @Inject(DA_SERVICE_TOKEN) private tokenService: ITokenService,\r\n    public settings: SettingsService,\r\n    public msg: NzMessageService,\r\n  ) {}\r\n\r\n  logout(): void {\r\n    this.tokenService.clear();\r\n    this.router.navigateByUrl(this.tokenService.login_url!);\r\n  }\r\n}\r\n","<span class=\"alain-ms__topbar-item-btn\">\r\n  <span class=\"position-relative\">\r\n    {{ l.titleText }}<em *ngIf=\"list.length > 0\" class=\"alain-ms__topbar-item-num\">{{ list.length }}</em>\r\n  </span>\r\n</span>\r\n<div class=\"alain-ms__topbar-dd-menu\">\r\n  <div class=\"alain-ms__notice-hd\">\r\n    {{ l.title }}\r\n    <a class=\"brand-color\" [link-to]=\"l.subscribe\">{{ l.subscribe.title }}</a>\r\n  </div>\r\n  <a class=\"alain-ms__notice-item\" *ngFor=\"let i of list\" [link-to]=\"i\">\r\n    <div class=\"alain-ms__notice-item--title\">{{ i.title }}</div>\r\n    <span class=\"alain-ms__notice-item--time\">{{ i.time }}</span>\r\n  </a>\r\n  <div class=\"alain-ms__notice-fd\">\r\n    <a class=\"d-block pt-sm pb-xs text-center\" [link-to]=\"l\">{{ l.text }}</a>\r\n  </div>\r\n</div>\r\n"]}