{"version":3,"file":"page-nav.component.js","sourceRoot":"","sources":["../../../../../../../../../libs/theme-alain-ms/layout/src/lib/ms/shared/page-nav/page-nav.component.ts","../../../../../../../../../libs/theme-alain-ms/layout/src/lib/ms/shared/page-nav/page-nav.component.html"],"names":[],"mappings":"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","sourcesContent":["import { ChangeDetectionStrategy, ChangeDetectorRef, Component, Inject, Input, OnChanges } from '@angular/core';\r\nimport { Router } from '@angular/router';\r\n\r\nimport { ALAIN_I18N_TOKEN, MenuService, TitleService } from '@delon/theme';\r\n\r\n// import { I18NService } from '@core';\r\n\r\nimport { MSMenu, MSServiceNavConfig } from '../../../models/layout';\r\nimport { BrandService } from '../../ms.service';\r\n\r\n@Component({\r\n  selector: 'page-nav',\r\n  templateUrl: './page-nav.component.html',\r\n  changeDetection: ChangeDetectionStrategy.OnPush,\r\n})\r\nexport class MSPageNavComponent implements OnChanges {\r\n  private _config: MSServiceNavConfig = {};\r\n  @Input()\r\n  set config(val: MSServiceNavConfig) {\r\n    const { title, titleI18n, backHref, doc, docI18n } = val;\r\n    // this.titSrv.setTitle(docI18n ? this.i18n.fanyi(docI18n) : doc);\r\n    // this._config.title = titleI18n ? this.i18n.fanyi(titleI18n) : title;\r\n    this._config.title=title;\r\n    this._config.backHref = backHref || '';\r\n  }\r\n  get config(): MSServiceNavConfig {\r\n    return this._config;\r\n  }\r\n\r\n  private _menus: MSMenu[] = [];\r\n  @Input()\r\n  set list(list: MSMenu[]) {\r\n    this.menuSrv.add(list);\r\n    this.menuSrv.visit(list, (i) => (i.active = true));\r\n    this._menus = this.menuSrv.menus;\r\n  }\r\n  get list(): MSMenu[] {\r\n    return this._menus;\r\n  }\r\n\r\n  constructor(\r\n    private srv: BrandService,\r\n    private router: Router,\r\n    private titSrv: TitleService,\r\n    private menuSrv: MenuService,\r\n    //@Inject(ALAIN_I18N_TOKEN) private i18n: I18NService,\r\n    private cdr: ChangeDetectorRef,\r\n  ) {}\r\n\r\n  to(url: string, e: MouseEvent): void {\r\n    e.preventDefault();\r\n    if (!url) {\r\n      return;\r\n    }\r\n    this.router.navigateByUrl(url);\r\n  }\r\n\r\n  toggle(): void {\r\n    this.srv.hideNav = !this.srv.hideNav;\r\n    this.srv.triggerNotify('page-nav');\r\n  }\r\n\r\n  ngOnChanges(): void {\r\n    this.cdr.detectChanges();\r\n  }\r\n}\r\n","<div class=\"ms-page-nav__body\">\r\n  <div class=\"ms-page-nav__stage\">\r\n    <div class=\"ms-page-nav__scene ms-page-nav__scene-main\">\r\n      <div\r\n        class=\"ms-page-nav__title\"\r\n        [ngClass]=\"{ 'ms-page-nav__back': config.backHref }\"\r\n        (click)=\"to(config.backHref!, $event)\"\r\n        [title]=\"config.backHref ? ('ms.page-nav.back' | i18n) : ''\"\r\n      >\r\n        <i *ngIf=\"config.backHref\" nz-icon nzType=\"left\"></i>\r\n        {{ config.title | abpLocalization }}\r\n      </div>\r\n      <div class=\"ms-page-nav__list scrollbar\">\r\n        <ng-template #treeTpl let-ls let-level=\"level\">\r\n          <li *ngFor=\"let i of ls\">\r\n            <ng-container *ngIf=\"i.children.length == 0\">\r\n              <div\r\n                *ngIf=\"i.link\"\r\n                class=\"ms-page-nav__item\"\r\n                role=\"treeitem\"\r\n                routerLink=\"{{ i.link }}\"\r\n                routerLinkActive=\"ms-page-nav__item-active\"\r\n              >\r\n                <span class=\"ms-page-nav__item-icon\"></span>\r\n                <span class=\"ms-page-nav__item-tit\">{{ i.text }}</span>\r\n                <span *ngIf=\"i.badge\" class=\"ms-page-nav__item-badge\">{{ i.badge }}</span>\r\n              </div>\r\n              <a *ngIf=\"!i.link\" [href]=\"i.externalLink\" [target]=\"i.target\" class=\"ms-page-nav__item\" role=\"treeitem\">\r\n                <span class=\"ms-page-nav__item-icon\"></span>\r\n                <span class=\"ms-page-nav__item-tit\">{{ i.text }}</span>\r\n                <span *ngIf=\"i.badge\" class=\"ms-page-nav__item-badge\">{{ i.badge }}</span>\r\n              </a>\r\n            </ng-container>\r\n            <ng-container *ngIf=\"i.children.length > 0\">\r\n              <div class=\"ms-page-nav__item\" role=\"treeitem\" (click)=\"i.active = !i.active\">\r\n                <span class=\"ms-page-nav__item-icon\">\r\n                  <i nz-icon [nzType]=\"i.active ? 'caret-down' : 'caret-right'\"></i>\r\n                </span>\r\n                <span class=\"ms-page-nav__item-tit\">{{ i.text }}</span>\r\n              </div>\r\n              <ul role=\"tree\" class=\"list-unstyled\" [ngClass]=\"{ 'd-none': !i.active }\">\r\n                <ng-container *ngTemplateOutlet=\"treeTpl; context: { $implicit: i.children, level: level + 1 }\"></ng-container>\r\n              </ul>\r\n            </ng-container>\r\n          </li>\r\n        </ng-template>\r\n        <ul role=\"tree\" class=\"list-unstyled\">\r\n          <ng-container *ngTemplateOutlet=\"treeTpl; context: { $implicit: list, level: 1 }\"></ng-container>\r\n        </ul>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</div>\r\n<div class=\"ms-page-nav__control\" (click)=\"toggle()\">\r\n  <div class=\"ms-page-nav__control-wrap\">\r\n    <div class=\"ms-page-nav__control-bg\"></div>\r\n    <div class=\"ms-page-nav__control-btn\">\r\n      <i nz-icon nzType=\"menu-fold\"></i>\r\n    </div>\r\n  </div>\r\n</div>\r\n"]}