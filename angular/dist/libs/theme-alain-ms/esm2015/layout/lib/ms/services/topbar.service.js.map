{"version":3,"file":"topbar.service.js","sourceRoot":"","sources":["../../../../../../../../libs/theme-alain-ms/layout/src/lib/ms/services/topbar.service.ts"],"names":[],"mappings":"AAAA,OAAO,EAAU,UAAU,EAAE,MAAM,eAAe,CAAC;AACnD,uCAAuC;AACvC,OAAO,EAAoB,WAAW,EAAE,MAAM,cAAc,CAAC;AAC7D,OAAO,EAAc,EAAE,EAAE,MAAM,MAAM,CAAC;AACtC,OAAO,EAAE,GAAG,EAAE,MAAM,gBAAgB,CAAC;;;AAiCrC;;;;GAIG;AAEH,MAAM,OAAO,eAAe;IAmB1B,YACU,IAAiB;QAAjB,SAAI,GAAJ,IAAI,CAAa;IAErB,CAAC;IAnBP,IAAI,IAAI;QACN,OAAO,IAAI,CAAC,KAAK,CAAC;IACpB,CAAC;IAED,IAAI,QAAQ;QACV,OAAO,IAAI,CAAC,KAAK,CAAC,SAAU,CAAC;IAC/B,CAAC;IAED,OAAO;QACL,OAAO,IAAI,CAAC,KAAK,CAAC,CAAC,CAAC,EAAE,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,SAAS,EAAE,CAAC;IACxD,CAAC;IAED,MAAM,CAAC,GAAW;QAChB,OAAO,IAAI,CAAC,KAAK,CAAC,QAAS,CAAC,GAAG,CAAC,IAAI,EAAE,CAAC;IACzC,CAAC;IAOO,SAAS;QACf,OAAO,IAAI,CAAC,IAAI,CAAC,GAAG,CAAC,gCAAgC,CAAC,CAAC,IAAI,CACzD,GAAG,CAAC,CAAC,GAAQ,EAAE,EAAE;YACf,IAAI,CAAC,KAAK,GAAG,GAAG,CAAC;QACnB,CAAC,CAAC,CACH,CAAC;IACJ,CAAC;;;;YA/BF,UAAU,SAAC,EAAE,UAAU,EAAE,MAAM,EAAE;;;YAxCP,WAAW","sourcesContent":["import { Inject, Injectable } from '@angular/core';\r\n// import { I18NService } from '@core';\r\nimport { ALAIN_I18N_TOKEN, _HttpClient } from '@delon/theme';\r\nimport { Observable, of } from 'rxjs';\r\nimport { tap } from 'rxjs/operators';\r\nimport { MSLink } from '../../models/layout';\r\n\r\nexport interface MSTopbar {\r\n  [key: string]: any;\r\n\r\n  messagess?: MSTopbarMessage[];\r\n\r\n  navLinks?: { [key: string]: MSTopbarNavLink };\r\n}\r\n\r\nexport interface MSTopbarMessage extends MSLink {\r\n  [key: string]: any;\r\n\r\n  className?: string;\r\n\r\n  title?: string;\r\n\r\n  createdTime?: string;\r\n}\r\n\r\nexport interface MSTopbarNavLink extends MSLink {\r\n  [key: string]: any;\r\n\r\n  id?: string;\r\n\r\n  text?: string;\r\n\r\n  className?: string;\r\n  /** 二级菜单，只支持一层 */\r\n  links?: MSTopbarNavLink[];\r\n}\r\n\r\n/**\r\n * 顶部菜单所有数据，几个注意点：\r\n * - 当前处理的数据源格式为 `./assets/tmp/topbar-en-US.json`\r\n * - 最终处理数据以 `topbar.interface.ts` 系列接口为准\r\n */\r\n@Injectable({ providedIn: 'root' })\r\nexport class MSTopbarService {\r\n  private _data!: MSTopbar;\r\n\r\n  get data(): MSTopbar {\r\n    return this._data;\r\n  }\r\n\r\n  get messages(): MSTopbarMessage[] {\r\n    return this._data.messagess!;\r\n  }\r\n\r\n  getData(): Observable<MSTopbar> {\r\n    return this._data ? of(this._data) : this.getByHttp();\r\n  }\r\n\r\n  getNav(key: string): MSTopbarNavLink {\r\n    return this._data.navLinks![key] || {};\r\n  }\r\n\r\n  constructor(\r\n    private http: _HttpClient,\r\n    //  @Inject(ALAIN_I18N_TOKEN) private i18nSrv: I18NService\r\n     ) {}\r\n\r\n  private getByHttp(): Observable<any> {\r\n    return this.http.get(`./assets/tmp/topbar-zh-TW.json`).pipe(\r\n      tap((res: any) => {\r\n        this._data = res;\r\n      }),\r\n    );\r\n  }\r\n}\r\n"]}