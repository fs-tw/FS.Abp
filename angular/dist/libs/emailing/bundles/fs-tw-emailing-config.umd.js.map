{"version":3,"file":"fs-tw-emailing-config.umd.js","sources":["../../../../libs/emailing/config/src/components/emailing-settings/emailing-settings.component.html","../../../../libs/emailing/config/src/components/emailing-settings/emailing-settings.component.ts","../../../../libs/emailing/config/src/providers/setting-tab.provider.ts","../../../../libs/emailing/config/src/emailing-config.module.ts","../../../../libs/emailing/config/src/providers/route.provider.ts","../../../../libs/emailing/config/src/fs-tw-emailing-config.ts"],"sourcesContent":["<ng-container *ngIf=\"settings$ | async; let settings\">\r\n    <div (keyup.enter)=\"submit(settings)\">\r\n        <div class=\"form-group\">\r\n            <label>{{ 'AbpEmailing::DisplayName:Abp.Mailing.DefaultFromAddress' | abpLocalization }}</label>\r\n            <input type=\"text\" class=\"form-control\" [(ngModel)]=\"settings.defaultFromAddress\" />\r\n        </div>\r\n\r\n        <div class=\"form-group\">\r\n            <label>{{ 'AbpEmailing::DisplayName:Abp.Mailing.DefaultFromDisplayName' | abpLocalization }}</label>\r\n            <input type=\"text\" class=\"form-control\" [(ngModel)]=\"settings.defaultFromDisplayName\" />\r\n        </div>\r\n\r\n        <div class=\"form-group\">\r\n            <label>{{ 'AbpEmailing::DisplayName:Abp.Mailing.Smtp.Host' | abpLocalization }}</label>\r\n            <input type=\"text\" class=\"form-control\" [(ngModel)]=\"settings?.smtp.host\" />\r\n        </div>\r\n\r\n        <div class=\"form-group\">\r\n            <label>{{ 'AbpEmailing::DisplayName:Abp.Mailing.Smtp.Port' | abpLocalization }}</label>\r\n            <input type=\"text\" class=\"form-control\" [(ngModel)]=\"settings?.smtp.port\" />\r\n        </div>\r\n\r\n        <div class=\"form-group\">\r\n            <label>{{ 'AbpEmailing::DisplayName:Abp.Mailing.Smtp.UserName' | abpLocalization }}</label>\r\n            <input type=\"text\" class=\"form-control\" [(ngModel)]=\"settings?.smtp.userName\" />\r\n        </div>\r\n\r\n        <div class=\"form-group\">\r\n            <label>{{ 'AbpEmailing::DisplayName:Abp.Mailing.Smtp.Password' | abpLocalization }}</label>\r\n            <input type=\"text\" class=\"form-control\" [(ngModel)]=\"settings?.smtp.password\" />\r\n        </div>\r\n\r\n        <div class=\"form-group\">\r\n            <label>{{ 'AbpEmailing::DisplayName:Abp.Mailing.Smtp.Domain' | abpLocalization }}</label>\r\n            <input type=\"text\" class=\"form-control\" [(ngModel)]=\"settings?.smtp.domain\" />\r\n        </div>\r\n\r\n        <div class=\"custom-checkbox custom-control mb-2\">\r\n            <input type=\"checkbox\" id=\"EnableSsl\" name=\"EnableSsl\"\r\n                class=\"custom-control-input\" [(ngModel)]=\"settings?.smtp.enableSsl\" /><label\r\n                class=\"custom-control-label\" for=\"EnableSsl\">{{\r\n          'AbpEmailing::DisplayName:Abp.Mailing.Smtp.EnableSsl' | abpLocalization\r\n        }}</label>\r\n        </div>\r\n\r\n        <div class=\"custom-checkbox custom-control mb-2\">\r\n            <input type=\"checkbox\" id=\"UseDefaultCredentials\" name=\"UseDefaultCredentials\"\r\n                class=\"custom-control-input\" [(ngModel)]=\"settings?.smtp.useDefaultCredentials\" /><label\r\n                class=\"custom-control-label\" for=\"UseDefaultCredentials\">{{\r\n          'AbpEmailing::DisplayName:Abp.Mailing.Smtp.UseDefaultCredentials' | abpLocalization\r\n        }}</label>\r\n        </div>\r\n    </div>\r\n\r\n    <hr class=\"my-4\" />\r\n\r\n    <div>\r\n        <abp-button (click)=\"submit(settings)\" iconClass=\"fa fa-save\" [loading]=\"loading\">{{\r\n        'AbpAccount::Save' | abpLocalization\r\n      }}</abp-button>\r\n    </div>\r\n</ng-container>","import { AbpApplicationConfigurationService, ConfigStateService } from '@abp/ng.core';\r\nimport { ToasterService } from '@abp/ng.theme.shared';\r\nimport { Component, OnInit, Injector, ChangeDetectorRef } from '@angular/core';\r\nimport { Fs } from '@fs-tw/emailing/proxy';\r\nimport { Observable } from 'rxjs';\r\nimport { finalize } from 'rxjs/operators';\r\n\r\n@Component({\r\n  selector: 'lib-emailing-settings',\r\n  templateUrl: './emailing-settings.component.html'\r\n})\r\nexport class EmailingSettingsComponent implements OnInit {\r\n\r\n  service: Fs.Abp.Emailing.EmailingApiService;\r\n  settings$: Observable<Fs.Abp.Emailing.Dtos.EmailSettingsDto>;\r\n\r\n    // tslint:disable-next-line: variable-name\r\n    private _loading: boolean;\r\n    set loading(value: boolean) {\r\n      this._loading = value;\r\n      this.cdr.markForCheck();\r\n    }\r\n  \r\n    get loading() {\r\n      return this._loading;\r\n    }\r\n\r\n  constructor(\r\n    protected injector: Injector,\r\n    protected cdr: ChangeDetectorRef,\r\n    protected toaster: ToasterService,\r\n    private configState: ConfigStateService,\r\n    private appConfigService: AbpApplicationConfigurationService,\r\n  ) {\r\n    this.service = this.injector.get(Fs.Abp.Emailing.EmailingApiService);\r\n    this.settings$=this.service.getByEmailSettingsGet({});\r\n  }\r\n\r\n  ngOnInit(): void {\r\n  }\r\n  submit(newSettings: any) {\r\n    this.loading = true;\r\n    this.service\r\n      .updateByEmailSettingsAndProviderNameAndProviderKey(newSettings)\r\n      .pipe(finalize(() => (this.loading = false)))\r\n      .subscribe(() => {\r\n        this.toaster.success('AbpSettingManagement::SuccessfullySaved', null);\r\n        this.appConfigService.get().subscribe(res => this.configState.setState(res));\r\n      });\r\n  }\r\n}\r\n","import { SettingTabsService } from '@abp/ng.core';\r\nimport { APP_INITIALIZER } from '@angular/core';\r\nimport { EmailingSettingsComponent } from '../components/emailing-settings/emailing-settings.component';\r\nimport { eEmailingSettingTabNames } from '../enums/setting-tab-names';\r\n\r\nexport const EMAILING_SETTING_TAB_PROVIDERS = [\r\n  {\r\n    provide: APP_INITIALIZER,\r\n    useFactory: configureSettingTabs,\r\n    deps: [SettingTabsService],\r\n    multi: true,\r\n  },\r\n];\r\n\r\nexport function configureSettingTabs(settingtabs: SettingTabsService) {\r\n  return () => {\r\n    settingtabs.add([\r\n      {\r\n        name: eEmailingSettingTabNames.Emailing,\r\n        order: 3,\r\n        requiredPolicy: 'AbpEmailing.SettingManagement',\r\n        component: EmailingSettingsComponent,\r\n      },\r\n    ]);\r\n  };\r\n}\r\n","import { CoreModule } from '@abp/ng.core';\r\nimport { ThemeSharedModule } from '@abp/ng.theme.shared';\r\nimport { ModuleWithProviders, NgModule } from '@angular/core';\r\nimport { EmailingSettingsComponent } from './components/emailing-settings/emailing-settings.component';\r\nimport { EMAILING_ROUTE_PROVIDERS } from './providers/route.provider';\r\nimport { EMAILING_SETTING_TAB_PROVIDERS } from './providers/setting-tab.provider';\r\n\r\n@NgModule({\r\n  imports: [\r\n    CoreModule,\r\n    ThemeSharedModule\r\n  ],\r\n  declarations: [\r\n    EmailingSettingsComponent\r\n  ]\r\n}\r\n)\r\nexport class EmailingConfigModule {\r\n  static forRoot(): ModuleWithProviders<EmailingConfigModule> {\r\n    return {\r\n      ngModule: EmailingConfigModule,\r\n      providers: [\r\n        //EMAILING_ROUTE_PROVIDERS,\r\n        EMAILING_SETTING_TAB_PROVIDERS\r\n      ]\r\n    };\r\n  }\r\n}\r\n","import { eLayoutType, RoutesService } from '@abp/ng.core';\r\nimport { APP_INITIALIZER } from '@angular/core';\r\nimport { eEmailingRouteNames } from '../enums/route-names';\r\n\r\nexport const EMAILING_ROUTE_PROVIDERS = [\r\n  {\r\n    provide: APP_INITIALIZER,\r\n    useFactory: configureRoutes,\r\n    deps: [RoutesService],\r\n    multi: true,\r\n  },\r\n];\r\n\r\nexport function configureRoutes(routesService: RoutesService) {\r\n  return () => {\r\n    routesService.add([\r\n      {\r\n        path: '/emailing',\r\n        name: eEmailingRouteNames.Emailing,\r\n        iconClass: 'fas fa-book',\r\n        layout: eLayoutType.application,\r\n        order: 3,\r\n      },\r\n    ]);\r\n  };\r\n}\r\n","/**\n * Generated bundle index. Do not edit.\n */\n\nexport * from './index';\n"],"names":["i0.ɵɵelementContainerStart","i0.ɵɵelementStart","i0.ɵɵlistener","i0.ɵɵtext","i0.ɵɵelementEnd","i0.ɵɵelement","i0.ɵɵelementContainerEnd","i0.ɵɵadvance","i0.ɵɵtextInterpolate","i0.ɵɵproperty","Fs","finalize","i0.ɵɵtemplate","Component","APP_INITIALIZER","SettingTabsService","CoreModule","ThemeSharedModule","NgModule","RoutesService"],"mappings":"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"}