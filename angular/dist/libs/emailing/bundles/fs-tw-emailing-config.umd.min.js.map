{"version":3,"sources":["../../../../libs/emailing/config/src/components/emailing-settings/emailing-settings.component.html","../../../../libs/emailing/config/src/components/emailing-settings/emailing-settings.component.ts","../../../../libs/emailing/config/src/providers/setting-tab.provider.ts","../../../../libs/emailing/config/src/emailing-config.module.ts","../../../../libs/emailing/config/src/providers/route.provider.ts"],"names":["i0.ɵɵelementContainerStart","i0.ɵɵelementStart","i0.ɵɵlistener","i0.ɵɵtext","i0.ɵɵelementEnd","i0.ɵɵelement","i0.ɵɵelementContainerEnd","i0.ɵɵadvance","i0.ɵɵtextInterpolate","i0.ɵɵproperty","EmailingSettingsComponent","injector","cdr","toaster","configState","appConfigService","this","service","get","Fs","Abp","Emailing","EmailingApiService","settings$","getByEmailSettingsGet","Object","defineProperty","prototype","_loading","value","markForCheck","ngOnInit","submit","newSettings","_this","loading","updateByEmailSettingsAndProviderNameAndProviderKey","pipe","finalize","subscribe","success","res","setState","i0","ɵɵdirectiveInject","Injector","ChangeDetectorRef","i1","ToasterService","i2","ConfigStateService","AbpApplicationConfigurationService","selectors","decls","vars","consts","template","rf","ctx","i0.ɵɵtemplate","Component","selector","templateUrl","EMAILING_SETTING_TAB_PROVIDERS","provide","APP_INITIALIZER","useFactory","configureSettingTabs","deps","SettingTabsService","multi","settingtabs","add","name","order","requiredPolicy","component","EmailingConfigModule","forRoot","ngModule","providers","CoreModule","ThemeSharedModule","declarations","imports","NgModule","EMAILING_ROUTE_PROVIDERS","configureRoutes","RoutesService","routesService","path","iconClass","layout"],"mappings":"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","sourcesContent":["<ng-container *ngIf=\"settings$ | async; let settings\">\r\n    <div (keyup.enter)=\"submit(settings)\">\r\n        <div class=\"form-group\">\r\n            <label>{{ 'AbpEmailing::DisplayName:Abp.Mailing.DefaultFromAddress' | abpLocalization }}</label>\r\n            <input type=\"text\" class=\"form-control\" [(ngModel)]=\"settings.defaultFromAddress\" />\r\n        </div>\r\n\r\n        <div class=\"form-group\">\r\n            <label>{{ 'AbpEmailing::DisplayName:Abp.Mailing.DefaultFromDisplayName' | abpLocalization }}</label>\r\n            <input type=\"text\" class=\"form-control\" [(ngModel)]=\"settings.defaultFromDisplayName\" />\r\n        </div>\r\n\r\n        <div class=\"form-group\">\r\n            <label>{{ 'AbpEmailing::DisplayName:Abp.Mailing.Smtp.Host' | abpLocalization }}</label>\r\n            <input type=\"text\" class=\"form-control\" [(ngModel)]=\"settings?.smtp.host\" />\r\n        </div>\r\n\r\n        <div class=\"form-group\">\r\n            <label>{{ 'AbpEmailing::DisplayName:Abp.Mailing.Smtp.Port' | abpLocalization }}</label>\r\n            <input type=\"text\" class=\"form-control\" [(ngModel)]=\"settings?.smtp.port\" />\r\n        </div>\r\n\r\n        <div class=\"form-group\">\r\n            <label>{{ 'AbpEmailing::DisplayName:Abp.Mailing.Smtp.UserName' | abpLocalization }}</label>\r\n            <input type=\"text\" class=\"form-control\" [(ngModel)]=\"settings?.smtp.userName\" />\r\n        </div>\r\n\r\n        <div class=\"form-group\">\r\n            <label>{{ 'AbpEmailing::DisplayName:Abp.Mailing.Smtp.Password' | abpLocalization }}</label>\r\n            <input type=\"text\" class=\"form-control\" [(ngModel)]=\"settings?.smtp.password\" />\r\n        </div>\r\n\r\n        <div class=\"form-group\">\r\n            <label>{{ 'AbpEmailing::DisplayName:Abp.Mailing.Smtp.Domain' | abpLocalization }}</label>\r\n            <input type=\"text\" class=\"form-control\" [(ngModel)]=\"settings?.smtp.domain\" />\r\n        </div>\r\n\r\n        <div class=\"custom-checkbox custom-control mb-2\">\r\n            <input type=\"checkbox\" id=\"EnableSsl\" name=\"EnableSsl\"\r\n                class=\"custom-control-input\" [(ngModel)]=\"settings?.smtp.enableSsl\" /><label\r\n                class=\"custom-control-label\" for=\"EnableSsl\">{{\r\n          'AbpEmailing::DisplayName:Abp.Mailing.Smtp.EnableSsl' | abpLocalization\r\n        }}</label>\r\n        </div>\r\n\r\n        <div class=\"custom-checkbox custom-control mb-2\">\r\n            <input type=\"checkbox\" id=\"UseDefaultCredentials\" name=\"UseDefaultCredentials\"\r\n                class=\"custom-control-input\" [(ngModel)]=\"settings?.smtp.useDefaultCredentials\" /><label\r\n                class=\"custom-control-label\" for=\"UseDefaultCredentials\">{{\r\n          'AbpEmailing::DisplayName:Abp.Mailing.Smtp.UseDefaultCredentials' | abpLocalization\r\n        }}</label>\r\n        </div>\r\n    </div>\r\n\r\n    <hr class=\"my-4\" />\r\n\r\n    <div>\r\n        <abp-button (click)=\"submit(settings)\" iconClass=\"fa fa-save\" [loading]=\"loading\">{{\r\n        'AbpAccount::Save' | abpLocalization\r\n      }}</abp-button>\r\n    </div>\r\n</ng-container>","import { AbpApplicationConfigurationService, ConfigStateService } from '@abp/ng.core';\r\nimport { ToasterService } from '@abp/ng.theme.shared';\r\nimport { Component, OnInit, Injector, ChangeDetectorRef } from '@angular/core';\r\nimport { Fs } from '@fs-tw/emailing/proxy';\r\nimport { Observable } from 'rxjs';\r\nimport { finalize } from 'rxjs/operators';\r\n\r\n@Component({\r\n  selector: 'lib-emailing-settings',\r\n  templateUrl: './emailing-settings.component.html'\r\n})\r\nexport class EmailingSettingsComponent implements OnInit {\r\n\r\n  service: Fs.Abp.Emailing.EmailingApiService;\r\n  settings$: Observable<Fs.Abp.Emailing.Dtos.EmailSettingsDto>;\r\n\r\n    // tslint:disable-next-line: variable-name\r\n    private _loading: boolean;\r\n    set loading(value: boolean) {\r\n      this._loading = value;\r\n      this.cdr.markForCheck();\r\n    }\r\n  \r\n    get loading() {\r\n      return this._loading;\r\n    }\r\n\r\n  constructor(\r\n    protected injector: Injector,\r\n    protected cdr: ChangeDetectorRef,\r\n    protected toaster: ToasterService,\r\n    private configState: ConfigStateService,\r\n    private appConfigService: AbpApplicationConfigurationService,\r\n  ) {\r\n    this.service = this.injector.get(Fs.Abp.Emailing.EmailingApiService);\r\n    this.settings$=this.service.getByEmailSettingsGet({});\r\n  }\r\n\r\n  ngOnInit(): void {\r\n  }\r\n  submit(newSettings: any) {\r\n    this.loading = true;\r\n    this.service\r\n      .updateByEmailSettingsAndProviderNameAndProviderKey(newSettings)\r\n      .pipe(finalize(() => (this.loading = false)))\r\n      .subscribe(() => {\r\n        this.toaster.success('AbpSettingManagement::SuccessfullySaved', null);\r\n        this.appConfigService.get().subscribe(res => this.configState.setState(res));\r\n      });\r\n  }\r\n}\r\n","import { SettingTabsService } from '@abp/ng.core';\r\nimport { APP_INITIALIZER } from '@angular/core';\r\nimport { EmailingSettingsComponent } from '../components/emailing-settings/emailing-settings.component';\r\nimport { eEmailingSettingTabNames } from '../enums/setting-tab-names';\r\n\r\nexport const EMAILING_SETTING_TAB_PROVIDERS = [\r\n  {\r\n    provide: APP_INITIALIZER,\r\n    useFactory: configureSettingTabs,\r\n    deps: [SettingTabsService],\r\n    multi: true,\r\n  },\r\n];\r\n\r\nexport function configureSettingTabs(settingtabs: SettingTabsService) {\r\n  return () => {\r\n    settingtabs.add([\r\n      {\r\n        name: eEmailingSettingTabNames.Emailing,\r\n        order: 3,\r\n        requiredPolicy: 'AbpEmailing.SettingManagement',\r\n        component: EmailingSettingsComponent,\r\n      },\r\n    ]);\r\n  };\r\n}\r\n","import { CoreModule } from '@abp/ng.core';\r\nimport { ThemeSharedModule } from '@abp/ng.theme.shared';\r\nimport { ModuleWithProviders, NgModule } from '@angular/core';\r\nimport { EmailingSettingsComponent } from './components/emailing-settings/emailing-settings.component';\r\nimport { EMAILING_ROUTE_PROVIDERS } from './providers/route.provider';\r\nimport { EMAILING_SETTING_TAB_PROVIDERS } from './providers/setting-tab.provider';\r\n\r\n@NgModule({\r\n  imports: [\r\n    CoreModule,\r\n    ThemeSharedModule\r\n  ],\r\n  declarations: [\r\n    EmailingSettingsComponent\r\n  ]\r\n}\r\n)\r\nexport class EmailingConfigModule {\r\n  static forRoot(): ModuleWithProviders<EmailingConfigModule> {\r\n    return {\r\n      ngModule: EmailingConfigModule,\r\n      providers: [\r\n        //EMAILING_ROUTE_PROVIDERS,\r\n        EMAILING_SETTING_TAB_PROVIDERS\r\n      ]\r\n    };\r\n  }\r\n}\r\n","import { eLayoutType, RoutesService } from '@abp/ng.core';\r\nimport { APP_INITIALIZER } from '@angular/core';\r\nimport { eEmailingRouteNames } from '../enums/route-names';\r\n\r\nexport const EMAILING_ROUTE_PROVIDERS = [\r\n  {\r\n    provide: APP_INITIALIZER,\r\n    useFactory: configureRoutes,\r\n    deps: [RoutesService],\r\n    multi: true,\r\n  },\r\n];\r\n\r\nexport function configureRoutes(routesService: RoutesService) {\r\n  return () => {\r\n    routesService.add([\r\n      {\r\n        path: '/emailing',\r\n        name: eEmailingRouteNames.Emailing,\r\n        iconClass: 'fas fa-book',\r\n        layout: eLayoutType.application,\r\n        order: 3,\r\n      },\r\n    ]);\r\n  };\r\n}\r\n"]}