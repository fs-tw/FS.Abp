{"version":3,"file":"emailing-settings.component.js","sourceRoot":"","sources":["../../../../../../../libs/emailing/config/src/components/emailing-settings/emailing-settings.component.ts","../../../../../../../libs/emailing/config/src/components/emailing-settings/emailing-settings.component.html"],"names":[],"mappings":"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","sourcesContent":["import { AbpApplicationConfigurationService, ConfigStateService } from '@abp/ng.core';\r\nimport { ToasterService } from '@abp/ng.theme.shared';\r\nimport { Component, OnInit, Injector, ChangeDetectorRef } from '@angular/core';\r\nimport { Fs } from '@fs-tw/emailing/proxy';\r\nimport { Observable } from 'rxjs';\r\nimport { finalize } from 'rxjs/operators';\r\n\r\n@Component({\r\n  selector: 'lib-emailing-settings',\r\n  templateUrl: './emailing-settings.component.html'\r\n})\r\nexport class EmailingSettingsComponent implements OnInit {\r\n\r\n  service: Fs.Abp.Emailing.EmailingApiService;\r\n  settings$: Observable<Fs.Abp.Emailing.Dtos.EmailSettingsDto>;\r\n\r\n    // tslint:disable-next-line: variable-name\r\n    private _loading: boolean;\r\n    set loading(value: boolean) {\r\n      this._loading = value;\r\n      this.cdr.markForCheck();\r\n    }\r\n  \r\n    get loading() {\r\n      return this._loading;\r\n    }\r\n\r\n  constructor(\r\n    protected injector: Injector,\r\n    protected cdr: ChangeDetectorRef,\r\n    protected toaster: ToasterService,\r\n    private configState: ConfigStateService,\r\n    private appConfigService: AbpApplicationConfigurationService,\r\n  ) {\r\n    this.service = this.injector.get(Fs.Abp.Emailing.EmailingApiService);\r\n    this.settings$=this.service.getByEmailSettingsGet({});\r\n  }\r\n\r\n  ngOnInit(): void {\r\n  }\r\n  submit(newSettings: any) {\r\n    this.loading = true;\r\n    this.service\r\n      .updateByEmailSettingsAndProviderNameAndProviderKey(newSettings)\r\n      .pipe(finalize(() => (this.loading = false)))\r\n      .subscribe(() => {\r\n        this.toaster.success('AbpSettingManagement::SuccessfullySaved', null);\r\n        this.appConfigService.get().subscribe(res => this.configState.setState(res));\r\n      });\r\n  }\r\n}\r\n","<ng-container *ngIf=\"settings$ | async; let settings\">\r\n    <div (keyup.enter)=\"submit(settings)\">\r\n        <div class=\"form-group\">\r\n            <label>{{ 'AbpEmailing::DisplayName:Abp.Mailing.DefaultFromAddress' | abpLocalization }}</label>\r\n            <input type=\"text\" class=\"form-control\" [(ngModel)]=\"settings.defaultFromAddress\" />\r\n        </div>\r\n\r\n        <div class=\"form-group\">\r\n            <label>{{ 'AbpEmailing::DisplayName:Abp.Mailing.DefaultFromDisplayName' | abpLocalization }}</label>\r\n            <input type=\"text\" class=\"form-control\" [(ngModel)]=\"settings.defaultFromDisplayName\" />\r\n        </div>\r\n\r\n        <div class=\"form-group\">\r\n            <label>{{ 'AbpEmailing::DisplayName:Abp.Mailing.Smtp.Host' | abpLocalization }}</label>\r\n            <input type=\"text\" class=\"form-control\" [(ngModel)]=\"settings?.smtp.host\" />\r\n        </div>\r\n\r\n        <div class=\"form-group\">\r\n            <label>{{ 'AbpEmailing::DisplayName:Abp.Mailing.Smtp.Port' | abpLocalization }}</label>\r\n            <input type=\"text\" class=\"form-control\" [(ngModel)]=\"settings?.smtp.port\" />\r\n        </div>\r\n\r\n        <div class=\"form-group\">\r\n            <label>{{ 'AbpEmailing::DisplayName:Abp.Mailing.Smtp.UserName' | abpLocalization }}</label>\r\n            <input type=\"text\" class=\"form-control\" [(ngModel)]=\"settings?.smtp.userName\" />\r\n        </div>\r\n\r\n        <div class=\"form-group\">\r\n            <label>{{ 'AbpEmailing::DisplayName:Abp.Mailing.Smtp.Password' | abpLocalization }}</label>\r\n            <input type=\"text\" class=\"form-control\" [(ngModel)]=\"settings?.smtp.password\" />\r\n        </div>\r\n\r\n        <div class=\"form-group\">\r\n            <label>{{ 'AbpEmailing::DisplayName:Abp.Mailing.Smtp.Domain' | abpLocalization }}</label>\r\n            <input type=\"text\" class=\"form-control\" [(ngModel)]=\"settings?.smtp.domain\" />\r\n        </div>\r\n\r\n        <div class=\"custom-checkbox custom-control mb-2\">\r\n            <input type=\"checkbox\" id=\"EnableSsl\" name=\"EnableSsl\"\r\n                class=\"custom-control-input\" [(ngModel)]=\"settings?.smtp.enableSsl\" /><label\r\n                class=\"custom-control-label\" for=\"EnableSsl\">{{\r\n          'AbpEmailing::DisplayName:Abp.Mailing.Smtp.EnableSsl' | abpLocalization\r\n        }}</label>\r\n        </div>\r\n\r\n        <div class=\"custom-checkbox custom-control mb-2\">\r\n            <input type=\"checkbox\" id=\"UseDefaultCredentials\" name=\"UseDefaultCredentials\"\r\n                class=\"custom-control-input\" [(ngModel)]=\"settings?.smtp.useDefaultCredentials\" /><label\r\n                class=\"custom-control-label\" for=\"UseDefaultCredentials\">{{\r\n          'AbpEmailing::DisplayName:Abp.Mailing.Smtp.UseDefaultCredentials' | abpLocalization\r\n        }}</label>\r\n        </div>\r\n    </div>\r\n\r\n    <hr class=\"my-4\" />\r\n\r\n    <div>\r\n        <abp-button (click)=\"submit(settings)\" iconClass=\"fa fa-save\" [loading]=\"loading\">{{\r\n        'AbpAccount::Save' | abpLocalization\r\n      }}</abp-button>\r\n    </div>\r\n</ng-container>"]}