{"version":3,"file":"extensions.provider.js","sourceRoot":"","sources":["../../../../../../libs/form-management/config/src/providers/extensions.provider.ts"],"names":[],"mappings":"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","sourcesContent":["import { ConfigStateService } from '@abp/ng.core';\r\nimport {\r\n  ExtensionsService,\r\n  getObjectExtensionEntitiesFromStore,\r\n  mapEntitiesToContributors,\r\n  mergeWithDefaultActions,\r\n  mergeWithDefaultProps,\r\n} from '@abp/ng.theme.shared/extensions';\r\nimport { APP_INITIALIZER, Injector } from '@angular/core';\r\nimport { eFormmanagementRouteNames } from '../enums/route-names';\r\nimport { map, mapTo, tap } from 'rxjs/operators';\r\n\r\nimport { DEFAULT_DOCUMENTDEFINITION_CREATE_FORM_PROPS } from '../default/documentdefinition/default-documentdefinition-create-form-props';\r\nimport { DEFAULT_DOCUMENTDEFINITION_EDIT_FORM_PROPS } from '../default/documentdefinition/default-documentdefinition-edit-form-props';\r\nimport { DEFAULT_DOCUMENTDEFINITION_ENTITY_PROPS } from '../default/documentdefinition/default-documentdefinition-entity-props';\r\nimport { DEFAULT_DOCUMENTDEFINITION_ENTITY_ACTIONS } from '../default/documentdefinition/default-documentdefinition-entity-actions';\r\nimport { DEFAULT_DOCUMENTDEFINITION_TOOLBAR_ACTIONS } from '../default/documentdefinition/default-documentdefinition-toolbar-actions';\r\n\r\nimport { DEFAULT_FORMAL_CREATE_FORM_PROPS } from '../default/formal/default-formal-create-form-props';\r\nimport { DEFAULT_FORMAL_EDIT_FORM_PROPS } from '../default/formal/default-formal-edit-form-props';\r\nimport { DEFAULT_FORMAL_ENTITY_PROPS } from '../default/formal/default-formal-entity-props';\r\nimport { DEFAULT_FORMAL_ENTITY_ACTIONS } from '../default/formal/default-formal-entity-actions';\r\nimport { DEFAULT_FORMAL_TOOLBAR_ACTIONS } from '../default/formal/default-formal-toolbar-actions';\r\n\r\nimport { DEFAULT_GROUP_CREATE_FORM_PROPS } from '../default/group/default-group-create-form-props';\r\nimport { DEFAULT_GROUP_EDIT_FORM_PROPS } from '../default/group/default-group-edit-form-props';\r\nimport { DEFAULT_GROUP_ENTITY_PROPS } from '../default/group/default-group-entity-props';\r\nimport { DEFAULT_GROUP_ENTITY_ACTIONS } from '../default/group/default-group-entity-actions';\r\nimport { DEFAULT_GROUP_TOOLBAR_ACTIONS } from '../default/group/default-group-toolbar-actions';\r\n\r\nimport { DEFAULT_ITEM_CREATE_FORM_PROPS } from '../default/item/default-item-create-form-props';\r\nimport { DEFAULT_ITEM_EDIT_FORM_PROPS } from '../default/item/default-item-edit-form-props';\r\nimport { DEFAULT_ITEM_ENTITY_PROPS } from '../default/item/default-item-entity-props';\r\nimport { DEFAULT_ITEM_ENTITY_ACTIONS } from '../default/item/default-item-entity-actions';\r\nimport { DEFAULT_ITEM_TOOLBAR_ACTIONS } from '../default/item/default-item-toolbar-actions';\r\n\r\nimport { DEFAULT_RECORD_CREATE_FORM_PROPS } from '../default/record/default-record-create-form-props';\r\nimport { DEFAULT_RECORD_EDIT_FORM_PROPS } from '../default/record/default-record-edit-form-props';\r\nimport { DEFAULT_RECORD_ENTITY_PROPS } from '../default/record/default-record-entity-props';\r\nimport { DEFAULT_RECORD_ENTITY_ACTIONS } from '../default/record/default-record-entity-actions';\r\nimport { DEFAULT_RECORD_TOOLBAR_ACTIONS } from '../default/record/default-record-toolbar-actions';\r\n\r\nimport { DEFAULT_RECORDITEM_CREATE_FORM_PROPS } from '../default/recorditem/default-recorditem-create-form-props';\r\nimport { DEFAULT_RECORDITEM_EDIT_FORM_PROPS } from '../default/recorditem/default-recorditem-edit-form-props';\r\nimport { DEFAULT_RECORDITEM_ENTITY_PROPS } from '../default/recorditem/default-recorditem-entity-props';\r\nimport { DEFAULT_RECORDITEM_ENTITY_ACTIONS } from '../default/recorditem/default-recorditem-entity-actions';\r\nimport { DEFAULT_RECORDITEM_TOOLBAR_ACTIONS } from '../default/recorditem/default-recorditem-toolbar-actions';\r\n\r\nimport { DEFAULT_VERSION_CREATE_FORM_PROPS } from '../default/version/default-version-create-form-props';\r\nimport { DEFAULT_VERSION_EDIT_FORM_PROPS } from '../default/version/default-version-edit-form-props';\r\nimport { DEFAULT_VERSION_ENTITY_PROPS } from '../default/version/default-version-entity-props';\r\nimport { DEFAULT_VERSION_ENTITY_ACTIONS } from '../default/version/default-version-entity-actions';\r\nimport { DEFAULT_VERSION_TOOLBAR_ACTIONS } from '../default/version/default-version-toolbar-actions';\r\n\r\n\r\n\r\nexport const EXTENSIONS_PROVIDERS = [\r\n  {\r\n    provide: APP_INITIALIZER,\r\n    useFactory: configure,\r\n    deps: [Injector],\r\n    multi: true,\r\n  },\r\n];\r\n\r\nfunction configure(injector: Injector) {\r\n  return () => {\r\n    const extensions: ExtensionsService = injector.get(ExtensionsService);\r\n    const configState = injector.get(ConfigStateService);\r\n\r\n    return getObjectExtensionEntitiesFromStore(configState, 'Formmanagement')\r\n      .pipe(\r\n        map((entities) => ({})),\r\n        mapEntitiesToContributors(configState, 'Formmanagement'),\r\n        tap((objectExtensionContributors) => {\r\n          mergeWithDefaultActions(extensions.toolbarActions, {\r\n            [eFormmanagementRouteNames.DocumentDefinition]: DEFAULT_DOCUMENTDEFINITION_TOOLBAR_ACTIONS,\r\n            [eFormmanagementRouteNames.Formal]: DEFAULT_FORMAL_TOOLBAR_ACTIONS,\r\n            [eFormmanagementRouteNames.Group]: DEFAULT_GROUP_TOOLBAR_ACTIONS,\r\n            [eFormmanagementRouteNames.Item]: DEFAULT_ITEM_TOOLBAR_ACTIONS,\r\n            [eFormmanagementRouteNames.Record]: DEFAULT_RECORD_TOOLBAR_ACTIONS,\r\n            [eFormmanagementRouteNames.RecordItem]: DEFAULT_RECORDITEM_TOOLBAR_ACTIONS,\r\n            [eFormmanagementRouteNames.Version]: DEFAULT_VERSION_TOOLBAR_ACTIONS,\r\n            \r\n          });\r\n\r\n          mergeWithDefaultActions(extensions.entityActions, {\r\n            [eFormmanagementRouteNames.DocumentDefinition]: DEFAULT_DOCUMENTDEFINITION_ENTITY_ACTIONS,\r\n            [eFormmanagementRouteNames.Formal]: DEFAULT_FORMAL_ENTITY_ACTIONS,\r\n            [eFormmanagementRouteNames.Group]: DEFAULT_GROUP_ENTITY_ACTIONS,\r\n            [eFormmanagementRouteNames.Item]: DEFAULT_ITEM_ENTITY_ACTIONS,\r\n            [eFormmanagementRouteNames.Record]: DEFAULT_RECORD_ENTITY_ACTIONS,\r\n            [eFormmanagementRouteNames.RecordItem]: DEFAULT_RECORDITEM_ENTITY_ACTIONS,\r\n            [eFormmanagementRouteNames.Version]: DEFAULT_VERSION_ENTITY_ACTIONS,\r\n           \r\n          });\r\n\r\n          mergeWithDefaultProps(extensions.entityProps, {\r\n            [eFormmanagementRouteNames.DocumentDefinition]: DEFAULT_DOCUMENTDEFINITION_ENTITY_PROPS,\r\n            [eFormmanagementRouteNames.Formal]: DEFAULT_FORMAL_ENTITY_PROPS,\r\n            [eFormmanagementRouteNames.Group]: DEFAULT_GROUP_ENTITY_PROPS,\r\n            [eFormmanagementRouteNames.Item]: DEFAULT_ITEM_ENTITY_PROPS,\r\n            [eFormmanagementRouteNames.Record]: DEFAULT_RECORD_ENTITY_PROPS,\r\n            [eFormmanagementRouteNames.RecordItem]: DEFAULT_RECORDITEM_ENTITY_PROPS,\r\n            [eFormmanagementRouteNames.Version]: DEFAULT_VERSION_ENTITY_PROPS,\r\n           \r\n          });\r\n\r\n          mergeWithDefaultProps(extensions.createFormProps, {\r\n            [eFormmanagementRouteNames.DocumentDefinition]: DEFAULT_DOCUMENTDEFINITION_CREATE_FORM_PROPS,\r\n            [eFormmanagementRouteNames.Formal]: DEFAULT_FORMAL_CREATE_FORM_PROPS,\r\n            [eFormmanagementRouteNames.Group]: DEFAULT_GROUP_CREATE_FORM_PROPS,\r\n            [eFormmanagementRouteNames.Item]: DEFAULT_ITEM_CREATE_FORM_PROPS,\r\n            [eFormmanagementRouteNames.Record]: DEFAULT_RECORD_CREATE_FORM_PROPS,\r\n            [eFormmanagementRouteNames.RecordItem]: DEFAULT_RECORDITEM_CREATE_FORM_PROPS,\r\n            [eFormmanagementRouteNames.Version]: DEFAULT_VERSION_CREATE_FORM_PROPS,\r\n\r\n          });\r\n\r\n          mergeWithDefaultProps(extensions.editFormProps, {\r\n            [eFormmanagementRouteNames.DocumentDefinition]: DEFAULT_DOCUMENTDEFINITION_EDIT_FORM_PROPS,\r\n            [eFormmanagementRouteNames.Formal]: DEFAULT_FORMAL_EDIT_FORM_PROPS,\r\n            [eFormmanagementRouteNames.Group]: DEFAULT_GROUP_EDIT_FORM_PROPS,\r\n            [eFormmanagementRouteNames.Item]: DEFAULT_ITEM_EDIT_FORM_PROPS,\r\n            [eFormmanagementRouteNames.Record]: DEFAULT_RECORD_EDIT_FORM_PROPS,\r\n            [eFormmanagementRouteNames.RecordItem]: DEFAULT_RECORDITEM_EDIT_FORM_PROPS,\r\n            [eFormmanagementRouteNames.Version]: DEFAULT_VERSION_EDIT_FORM_PROPS,\r\n\r\n          });\r\n        }),\r\n        mapTo(true)\r\n      )\r\n      .toPromise();\r\n  };\r\n}\r\n"]}