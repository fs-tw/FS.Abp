{"version":3,"file":"auth-wrapper.component.js","sourceRoot":"","sources":["../../../../../../../libs/account/src/lib/components/auth-wrapper/auth-wrapper.component.ts","../../../../../../../libs/account/src/lib/components/auth-wrapper/auth-wrapper.component.html"],"names":[],"mappings":"AAAA,OAAO,EAAe,mBAAmB,EAAE,mBAAmB,EAAE,kBAAkB,EAAE,MAAM,cAAc,CAAC;AACzG,OAAO,EAAE,SAAS,EAAE,KAAK,EAAU,WAAW,EAAE,MAAM,eAAe,CAAC;AACtE,OAAO,EAAU,KAAK,EAAE,MAAM,aAAa,CAAC;;;;;;;ICCtC,iCAA0F;;;;IAD5F,6BAA0F;IACxF,0GAA0F;IAC5F,0BAAe;;;IADI,eAAsD;IAAtD,wFAAsD;;;IASnE,8DAA4D;;;IAE9D,gEAA8D;;;IAPhE,8BAGC;IACC,8BAA2B;IACzB,yFAA4D;IAC9D,iBAAM;IACN,yFAA8D;IAChE,iBAAM;;;IAHW,eAAgC;IAAhC,wDAAgC;IAElC,eAAkC;IAAlC,0DAAkC;;;IAOrD,+BAAiC;IAC/B,8BAAQ;IAAA,YAAyD;;IAAA,iBAAS;IAC1E,YACF;;IAAA,iBAAM;;IAFI,eAAyD;IAAzD,6EAAyD;IACjE,eACF;IADE,kHACF;;;ADXF,MAAM,OAAO,oBAAoB;IAc/B,YACkB,YAAiC,EACzC,KAAY,EACZ,YAAiC,EACjC,kBAAsC;QAH9B,iBAAY,GAAZ,YAAY,CAAqB;QACzC,UAAK,GAAL,KAAK,CAAO;QACZ,iBAAY,GAAZ,YAAY,CAAqB;QACjC,uBAAkB,GAAlB,kBAAkB,CAAoB;QARhD,qBAAgB,GAAG,IAAI,CAAC;QAExB,iBAAY,gDAAgC;QAQ1C,IAAI,CAAC,sBAAsB,GAAG,IAAI,CAAC,kBAAkB,CAAC,QAAQ,CAAC,wBAAwB,CAAC,CAAC;IAC3F,CAAC;IAED,QAAQ;QACN,IAAI,CAAC,YAAY,CAAC,MAAM,CACtB,IAAI,CAAC,kBAAkB,CAAC,WAAW,CAAC,8BAA8B,CAAC,EACnE,KAAK,CAAC,EAAE;YACN,IAAI,KAAK,EAAE;gBACT,IAAI,CAAC,gBAAgB,GAAG,KAAK,CAAC,WAAW,EAAE,KAAK,OAAO,CAAC;aACzD;QACH,CAAC,CACF,CAAC;IACJ,CAAC;;wFAhCU,oBAAoB;yDAApB,oBAAoB,wLAFpB,CAAC,mBAAmB,CAAC;;QCXlC,8BAAiB;QACf,8BAAkC;QAChC,uFAEe;;QAEf,8BAAmC;QACjC,qEAQM;QACR,iBAAM;QACR,iBAAM;QACR,iBAAM;QAEN,sHAKc;;;QAvBK,eAAyE;QAAzE,8GAAyE;QAMnF,eAAwB;QAAxB,2CAAwB,iBAAA;;uFDKpB,oBAAoB;cANhC,SAAS;eAAC;gBACT,QAAQ,EAAE,kBAAkB;gBAC5B,WAAW,EAAE,+BAA+B;gBAC5C,QAAQ,EAAE,gBAAgB;gBAC1B,SAAS,EAAE,CAAC,mBAAmB,CAAC;aACjC;6JAIU,cAAc;kBADtB,KAAK;YAIG,gBAAgB;kBADxB,KAAK","sourcesContent":["import { ConfigState, SubscriptionService, MultiTenancyService, ConfigStateService } from '@abp/ng.core';\r\nimport { Component, Input, OnInit, TemplateRef } from '@angular/core';\r\nimport { Select, Store } from '@ngxs/store';\r\nimport { Observable } from 'rxjs';\r\nimport { eAccountComponents } from '../../enums/components';\r\nimport { Account } from '../../models/account';\r\n\r\n@Component({\r\n  selector: 'abp-auth-wrapper',\r\n  templateUrl: './auth-wrapper.component.html',\r\n  exportAs: 'abpAuthWrapper',\r\n  providers: [SubscriptionService],\r\n})\r\nexport class AuthWrapperComponent\r\n  implements Account.AuthWrapperComponentInputs, Account.AuthWrapperComponentOutputs, OnInit {\r\n  @Input()\r\n  readonly mainContentRef: TemplateRef<any>;\r\n\r\n  @Input()\r\n  readonly cancelContentRef: TemplateRef<any>;\r\n\r\n  isMultiTenancyEnabled$: Observable<boolean>;\r\n\r\n  enableLocalLogin = true;\r\n\r\n  tenantBoxKey = eAccountComponents.TenantBox;\r\n\r\n  constructor(\r\n    public readonly multiTenancy: MultiTenancyService,\r\n    private store: Store,\r\n    private subscription: SubscriptionService,\r\n    private configStateService: ConfigStateService\r\n  ) {\r\n    this.isMultiTenancyEnabled$ = this.configStateService.getDeep$('multiTenancy.isEnabled');\r\n  }\r\n\r\n  ngOnInit() {\r\n    this.subscription.addOne(\r\n      this.configStateService.getSetting$('Abp.Account.EnableLocalLogin'),\r\n      value => {\r\n        if (value) {\r\n          this.enableLocalLogin = value.toLowerCase() !== 'false';\r\n        }\r\n      },\r\n    );\r\n  }\r\n}\r\n","<div class=\"row\">\r\n  <div class=\"mx-auto col col-md-5\">\r\n    <ng-container *ngIf=\"(isMultiTenancyEnabled$ | async) && multiTenancy.isTenantBoxVisible\">\r\n      <abp-tenant-box *abpReplaceableTemplate=\"{ componentKey: tenantBoxKey }\"></abp-tenant-box>\r\n    </ng-container>\r\n\r\n    <div class=\"abp-account-container\">\r\n      <div\r\n        *ngIf=\"enableLocalLogin; else disableLocalLoginTemplate\"\r\n        class=\"card mt-3 shadow-sm rounded\"\r\n      >\r\n        <div class=\"card-body p-5\">\r\n          <ng-content *ngTemplateOutlet=\"mainContentRef\"></ng-content>\r\n        </div>\r\n        <ng-content *ngTemplateOutlet=\"cancelContentRef\"></ng-content>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</div>\r\n\r\n<ng-template #disableLocalLoginTemplate>\r\n  <div class=\"alert alert-warning\">\r\n    <strong>{{ 'AbpAccount::InvalidLoginRequest' | abpLocalization }}</strong>\r\n    {{ 'AbpAccount::ThereAreNoLoginSchemesConfiguredForThisClient' | abpLocalization }}\r\n  </div>\r\n</ng-template>\r\n"]}