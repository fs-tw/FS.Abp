!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@abp/ng.core"),require("@abp/ng.theme.shared"),require("@angular/core"),require("@ng-bootstrap/ng-bootstrap"),require("@ngx-validate/core"),require("@angular/router"),require("@angular/forms"),require("rxjs"),require("rxjs/operators"),require("snq"),require("angular-oauth2-oidc"),require("@ngxs/store"),require("@angular/common/http"),require("@angular/common"),require("@angular/animations")):"function"==typeof define&&define.amd?define("@fs-tw/account",["exports","@abp/ng.core","@abp/ng.theme.shared","@angular/core","@ng-bootstrap/ng-bootstrap","@ngx-validate/core","@angular/router","@angular/forms","rxjs","rxjs/operators","snq","angular-oauth2-oidc","@ngxs/store","@angular/common/http","@angular/common","@angular/animations"],t):t(((e="undefined"!=typeof globalThis?globalThis:e||self)["fs-tw"]=e["fs-tw"]||{},e["fs-tw"].account={}),e.i1,e.i3$1,e.ng.core,e.ngBootstrap,e.i9,e.ng.router,e.ng.forms,e.rxjs,e.rxjs.operators,e.snq,e.i2,e.i2$1,e.ng.common.http,e.ng.common,e.ng.animations)}(this,(function(e,t,n,r,o,a,i,p,l,c,s,u,d,m,f,v){"use strict";function g(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var b=g(s),h=function(e,t){return(h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)};
/*! *****************************************************************************
    Copyright (c) Microsoft Corporation.

    Permission to use, copy, modify, and/or distribute this software for any
    purpose with or without fee is hereby granted.

    THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
    REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
    AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
    INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
    LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
    OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
    PERFORMANCE OF THIS SOFTWARE.
    ***************************************************************************** */function S(e,t,n,r){return new(n||(n=Promise))((function(o,a){function i(e){try{l(r.next(e))}catch(e){a(e)}}function p(e){try{l(r.throw(e))}catch(e){a(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,p)}l((r=r.apply(e,t||[])).next())}))}function y(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:p(0),throw:p(1),return:p(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function p(a){return function(p){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(o=i.trys,(o=o.length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,p])}}}Object.create;function C(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i}function x(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(C(arguments[t]));return e}Object.create;localStorage;var w=function(e){function n(){var t=e.apply(this,x(arguments))||this;return t.isInternalAuth=!0,t}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}h(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}(n,e),n.prototype.login=function(){this.injector.get(i.Router).navigateByUrl("/account/login")},n.prototype.checkIfInternalAuth=function(){return!0},n.prototype.logout=function(){var e=this,n=this.injector.get(t.RestService),r=this.injector.get(t.ConfigStateService),o=this.injector.get(t.AbpApplicationConfigurationService),a=r.getDeep("environment.oAuthConfig.issuer");return n.request({method:"GET",url:"/api/account/logout"},null,a).pipe(c.tap((function(){return e.oAuthService.logOut()})),c.switchMap((function(){return o.get().pipe(c.tap((function(e){return r.setState(e)})))})))},n.prototype.destroy=function(){},n}(t.AuthFlowStrategy),A=function(){function e(e,n,r,o,a,i,p,l){var c=this;this.injector=e,this.environment=n,this.oAuthService=r,this.abpApplicationConfigurationService=o,this.router=a,this.sessionStateService=i,this.configStateService=p,this.options=l,this.setStrategy=function(){var e=c.environment.getEnvironment().oAuthConfig.responseType||"password";c.flow!==e&&(c.strategy&&c.strategy.destroy(),c.flow=e,c.strategy="password"===e?new w(c.injector):t.AUTH_FLOW_STRATEGY.Code(c.injector))},this.setStrategy(),this.listenToSetEnvironment()}return e.prototype.initLogin=function(){this.strategy.login()},Object.defineProperty(e.prototype,"isInternalAuth",{get:function(){return this.strategy.isInternalAuth},enumerable:!1,configurable:!0}),e.prototype.listenToSetEnvironment=function(){this.environment.createOnUpdateStream((function(e){return e.oAuthConfig})).subscribe(this.setStrategy)},e.prototype.init=function(){return S(this,void 0,void 0,(function(){return y(this,(function(e){switch(e.label){case 0:return[4,this.strategy.init()];case 1:return[2,e.sent()]}}))}))},e.prototype.logout=function(){return this.strategy.logout()},e.prototype.login=function(e,t){var n=this,r=this.sessionStateService.getTenant();return l.from(this.oAuthService.fetchTokenUsingPasswordFlow(e,t,new m.HttpHeaders(Object.assign({},r&&r.id&&{__tenant:r.id})))).pipe(c.switchMap((function(){return n.abpApplicationConfigurationService.get().pipe(c.tap((function(e){return n.configStateService.setState(e)})))})),c.tap((function(){var e=b.default((function(){return window.history.state.redirectUrl}))||(n.options||{}).redirectUrl||"/";n.router.navigateByUrl(e)})),c.take(1))},e}();A.ɵfac=function(e){return new(e||A)(r.ɵɵinject(r.Injector),r.ɵɵinject(t.EnvironmentService),r.ɵɵinject(u.OAuthService),r.ɵɵinject(t.AbpApplicationConfigurationService),r.ɵɵinject(i.Router),r.ɵɵinject(t.SessionStateService),r.ɵɵinject(t.ConfigStateService),r.ɵɵinject("ACCOUNT_OPTIONS",8))},A.ɵprov=r.ɵɵdefineInjectable({token:A,factory:A.ɵfac,providedIn:"root"}),("undefined"==typeof ngDevMode||ngDevMode)&&r.ɵsetClassMetadata(A,[{type:r.Injectable,args:[{providedIn:"root"}]}],(function(){return[{type:r.Injector},{type:t.EnvironmentService},{type:u.OAuthService},{type:t.AbpApplicationConfigurationService},{type:i.Router},{type:t.SessionStateService},{type:t.ConfigStateService},{type:void 0,decorators:[{type:r.Optional},{type:r.Inject,args:["ACCOUNT_OPTIONS"]}]}]}),null);var I=function(){function e(e){this.rest=e,this.apiName="AbpAccount"}return e.prototype.findTenant=function(e){var t={method:"GET",url:"/api/abp/multi-tenancy/tenants/by-name/"+e};return this.rest.request(t,{apiName:this.apiName})},e.prototype.register=function(e){var t={method:"POST",url:"/api/account/register",body:e};return this.rest.request(t,{skipHandleError:!0,apiName:this.apiName})},e}();function E(e,t){1&e&&(r.ɵɵelementStart(0,"h5"),r.ɵɵtext(1,"Switch Tenant"),r.ɵɵelementEnd())}function T(e,t){if(1&e){var n=r.ɵɵgetCurrentView();r.ɵɵelementStart(0,"form",14),r.ɵɵlistener("ngSubmit",(function(){return r.ɵɵrestoreView(n),r.ɵɵnextContext(2).save()})),r.ɵɵelementStart(1,"div",15),r.ɵɵelementStart(2,"div",16),r.ɵɵelementStart(3,"label",17),r.ɵɵtext(4),r.ɵɵpipe(5,"abpLocalization"),r.ɵɵelementEnd(),r.ɵɵelementStart(6,"input",18),r.ɵɵlistener("ngModelChange",(function(e){return r.ɵɵrestoreView(n),r.ɵɵnextContext(2).name=e})),r.ɵɵelementEnd(),r.ɵɵelementEnd(),r.ɵɵelementStart(7,"p"),r.ɵɵtext(8),r.ɵɵpipe(9,"abpLocalization"),r.ɵɵelementEnd(),r.ɵɵelementEnd(),r.ɵɵelementEnd()}if(2&e){var o=r.ɵɵnextContext(2);r.ɵɵadvance(4),r.ɵɵtextInterpolate(r.ɵɵpipeBind1(5,3,"AbpUiMultiTenancy::Name")),r.ɵɵadvance(2),r.ɵɵproperty("ngModel",o.name),r.ɵɵadvance(2),r.ɵɵtextInterpolate(r.ɵɵpipeBind1(9,5,"AbpUiMultiTenancy::SwitchTenantHint"))}}function M(e,t){if(1&e){var n=r.ɵɵgetCurrentView();r.ɵɵelementStart(0,"button",19,20),r.ɵɵtext(2),r.ɵɵpipe(3,"abpLocalization"),r.ɵɵelementEnd(),r.ɵɵelementStart(4,"abp-button",21),r.ɵɵlistener("click",(function(){return r.ɵɵrestoreView(n),r.ɵɵnextContext(2).save()})),r.ɵɵelementStart(5,"span"),r.ɵɵtext(6),r.ɵɵpipe(7,"abpLocalization"),r.ɵɵelementEnd(),r.ɵɵelementEnd()}if(2&e){var o=r.ɵɵnextContext().ngIf,a=r.ɵɵnextContext();r.ɵɵadvance(2),r.ɵɵtextInterpolate1(" ",r.ɵɵpipeBind1(3,3,"AbpTenantManagement::Cancel")," "),r.ɵɵadvance(2),r.ɵɵproperty("disabled",(null==o?null:o.name)===a.name),r.ɵɵadvance(2),r.ɵɵtextInterpolate(r.ɵɵpipeBind1(7,5,"AbpTenantManagement::Save"))}}function N(e,t){if(1&e){var n=r.ɵɵgetCurrentView();r.ɵɵelementContainerStart(0),r.ɵɵelement(1,"div",1),r.ɵɵelementStart(2,"div",2),r.ɵɵelementStart(3,"div",3),r.ɵɵelementStart(4,"div",4),r.ɵɵelementStart(5,"div",5),r.ɵɵelementStart(6,"span",6),r.ɵɵtext(7),r.ɵɵpipe(8,"abpLocalization"),r.ɵɵelementEnd(),r.ɵɵelement(9,"br"),r.ɵɵelementStart(10,"h6",7),r.ɵɵelementStart(11,"i"),r.ɵɵtext(12),r.ɵɵpipe(13,"abpLocalization"),r.ɵɵelementEnd(),r.ɵɵelementEnd(),r.ɵɵelementEnd(),r.ɵɵelementStart(14,"div",8),r.ɵɵelementStart(15,"a",9),r.ɵɵlistener("click",(function(){return r.ɵɵrestoreView(n),r.ɵɵnextContext().onSwitch()})),r.ɵɵtext(16),r.ɵɵpipe(17,"abpLocalization"),r.ɵɵelementEnd(),r.ɵɵelementEnd(),r.ɵɵelementEnd(),r.ɵɵelementEnd(),r.ɵɵelementEnd(),r.ɵɵelementStart(18,"abp-modal",10),r.ɵɵlistener("visibleChange",(function(e){return r.ɵɵrestoreView(n),r.ɵɵnextContext().isModalVisible=e})),r.ɵɵtemplate(19,E,2,0,"ng-template",null,11,r.ɵɵtemplateRefExtractor),r.ɵɵtemplate(21,T,10,7,"ng-template",null,12,r.ɵɵtemplateRefExtractor),r.ɵɵtemplate(23,M,8,7,"ng-template",null,13,r.ɵɵtemplateRefExtractor),r.ɵɵelementEnd(),r.ɵɵelementContainerEnd()}if(2&e){var o=t.ngIf,a=r.ɵɵnextContext();r.ɵɵadvance(7),r.ɵɵtextInterpolate(r.ɵɵpipeBind1(8,5,"AbpUiMultiTenancy::Tenant")),r.ɵɵadvance(5),r.ɵɵtextInterpolate(o.name||r.ɵɵpipeBind1(13,7,"AbpUiMultiTenancy::NotSelected")),r.ɵɵadvance(4),r.ɵɵtextInterpolate(r.ɵɵpipeBind1(17,9,"AbpUiMultiTenancy::Switch")),r.ɵɵadvance(2),r.ɵɵproperty("visible",a.isModalVisible)("busy",a.modalBusy)}}I.ɵfac=function(e){return new(e||I)(r.ɵɵinject(t.RestService))},I.ɵprov=r.ɵɵdefineInjectable({token:I,factory:I.ɵfac,providedIn:"root"}),("undefined"==typeof ngDevMode||ngDevMode)&&r.ɵsetClassMetadata(I,[{type:r.Injectable,args:[{providedIn:"root"}]}],(function(){return[{type:t.RestService}]}),null);var j=function(){return{}},P=function(){function e(e,t,n,r,o,a){this.toasterService=e,this.accountService=t,this.sessionStateService=n,this.subscriptionService=r,this.abpApplicationConfigurationService=o,this.configStateService=a,this.currentTenant$=this.sessionStateService.getTenant$()}return e.prototype.onSwitch=function(){var e=this.sessionStateService.getTenant();this.name=(e||{}).name,this.isModalVisible=!0},e.prototype.save=function(){var e=this;if(!this.name)return this.setTenant(null),void(this.isModalVisible=!1);this.modalBusy=!0,this.accountService.findTenant(this.name).pipe(c.finalize((function(){return e.modalBusy=!1}))).subscribe((function(t){var n=t.success,r=t.tenantId,o=t.name;n?(e.setTenant({id:r,name:o}),e.isModalVisible=!1):e.showError()}))},e.prototype.setTenant=function(e){var t=this;this.sessionStateService.setTenant(e),this.subscriptionService.addOne(this.sessionStateService.getTenant$(),(function(e){t.abpApplicationConfigurationService.get().pipe(c.tap((function(e){return t.configStateService.setState(e)}))).subscribe()}))},e.prototype.showError=function(){this.toasterService.error("AbpUiMultiTenancy::GivenTenantIsNotAvailable","AbpUi::Error",{messageLocalizationParams:[this.name]})},e}();function L(e,t){1&e&&r.ɵɵelement(0,"abp-tenant-box")}P.ɵfac=function(e){return new(e||P)(r.ɵɵdirectiveInject(n.ToasterService),r.ɵɵdirectiveInject(I),r.ɵɵdirectiveInject(t.SessionStateService),r.ɵɵdirectiveInject(t.SubscriptionService),r.ɵɵdirectiveInject(t.AbpApplicationConfigurationService),r.ɵɵdirectiveInject(t.ConfigStateService))},P.ɵcmp=r.ɵɵdefineComponent({type:P,selectors:[["abp-tenant-box"]],decls:2,vars:4,consts:[[4,"ngIf"],[2,"height","1em"],[1,"card","shadow-sm","rounded","mb-3"],[1,"card-body","px-5"],[1,"row"],[1,"col"],[1,"text-uppercase","text-muted",2,"font-size","0.8em"],[1,"m-0","d-inline-block"],[1,"col-auto"],["id","AbpTenantSwitchLink","href","javascript:void(0);",1,"btn","btn-sm","mt-3","btn-outline-primary",3,"click"],["size","md",3,"visible","busy","visibleChange"],["abpHeader",""],["abpBody",""],["abpFooter",""],[3,"ngSubmit"],[1,"mt-2"],[1,"form-group"],["for","name"],["type","text","id","name","name","tenant","autofocus","",1,"form-control",3,"ngModel","ngModelChange"],["type","button",1,"btn","btn-secondary"],["abpClose",""],["type","abp-button","iconClass","fa fa-check",3,"disabled","click"]],template:function(e,t){1&e&&(r.ɵɵtemplate(0,N,25,11,"ng-container",0),r.ɵɵpipe(1,"async")),2&e&&r.ɵɵproperty("ngIf",r.ɵɵpipeBind1(1,1,t.currentTenant$)||r.ɵɵpureFunction0(3,j))},directives:[f.NgIf,n.ModalComponent,p.ɵangular_packages_forms_forms_y,p.NgControlStatusGroup,p.NgForm,p.DefaultValueAccessor,t.AutofocusDirective,p.NgControlStatus,p.NgModel,n.ButtonComponent],pipes:[f.AsyncPipe,t.LocalizationPipe],encapsulation:2}),("undefined"==typeof ngDevMode||ngDevMode)&&r.ɵsetClassMetadata(P,[{type:r.Component,args:[{selector:"abp-tenant-box",templateUrl:"./tenant-box.component.html"}]}],(function(){return[{type:n.ToasterService},{type:I},{type:t.SessionStateService},{type:t.SubscriptionService},{type:t.AbpApplicationConfigurationService},{type:t.ConfigStateService}]}),null);var R=function(e){return{componentKey:e}};function D(e,t){if(1&e&&(r.ɵɵelementContainerStart(0),r.ɵɵtemplate(1,L,1,0,"abp-tenant-box",6),r.ɵɵelementContainerEnd()),2&e){var n=r.ɵɵnextContext();r.ɵɵadvance(1),r.ɵɵproperty("abpReplaceableTemplate",r.ɵɵpureFunction1(1,R,n.tenantBoxKey))}}function B(e,t){1&e&&r.ɵɵprojection(0,0,["*ngTemplateOutlet","mainContentRef"])}function O(e,t){1&e&&r.ɵɵprojection(0,1,["*ngTemplateOutlet","cancelContentRef"])}function z(e,t){if(1&e&&(r.ɵɵelementStart(0,"div",7),r.ɵɵelementStart(1,"div",8),r.ɵɵtemplate(2,B,1,0,"ng-content",9),r.ɵɵelementEnd(),r.ɵɵtemplate(3,O,1,0,"ng-content",9),r.ɵɵelementEnd()),2&e){var n=r.ɵɵnextContext();r.ɵɵadvance(2),r.ɵɵproperty("ngTemplateOutlet",n.mainContentRef),r.ɵɵadvance(1),r.ɵɵproperty("ngTemplateOutlet",n.cancelContentRef)}}function F(e,t){1&e&&(r.ɵɵelementStart(0,"div",10),r.ɵɵelementStart(1,"strong"),r.ɵɵtext(2),r.ɵɵpipe(3,"abpLocalization"),r.ɵɵelementEnd(),r.ɵɵtext(4),r.ɵɵpipe(5,"abpLocalization"),r.ɵɵelementEnd()),2&e&&(r.ɵɵadvance(2),r.ɵɵtextInterpolate(r.ɵɵpipeBind1(3,2,"AbpAccount::InvalidLoginRequest")),r.ɵɵadvance(2),r.ɵɵtextInterpolate1(" ",r.ɵɵpipeBind1(5,4,"AbpAccount::ThereAreNoLoginSchemesConfiguredForThisClient")," "))}var V=["*","*"],k=function(){function e(e,t,n,r){this.multiTenancy=e,this.store=t,this.subscription=n,this.configStateService=r,this.enableLocalLogin=!0,this.tenantBoxKey="Account.TenantBoxComponent",this.isMultiTenancyEnabled$=this.configStateService.getDeep$("multiTenancy.isEnabled")}return e.prototype.ngOnInit=function(){var e=this;this.subscription.addOne(this.configStateService.getSetting$("Abp.Account.EnableLocalLogin"),(function(t){t&&(e.enableLocalLogin="false"!==t.toLowerCase())}))},e}();function _(e,t){if(1&e&&r.ɵɵelement(0,"abp-auth-wrapper",3),2&e){r.ɵɵnextContext();var n=r.ɵɵreference(2),o=r.ɵɵreference(4);r.ɵɵproperty("mainContentRef",n)("cancelContentRef",o)}}function U(e,t){1&e&&(r.ɵɵelementStart(0,"strong"),r.ɵɵtext(1),r.ɵɵpipe(2,"abpLocalization"),r.ɵɵelementStart(3,"a",15),r.ɵɵtext(4),r.ɵɵpipe(5,"abpLocalization"),r.ɵɵelementEnd(),r.ɵɵelementEnd()),2&e&&(r.ɵɵadvance(1),r.ɵɵtextInterpolate1(" ",r.ɵɵpipeBind1(2,2,"AbpAccount::AreYouANewUser")," "),r.ɵɵadvance(3),r.ɵɵtextInterpolate(r.ɵɵpipeBind1(5,4,"AbpAccount::Register")))}function G(e,t){if(1&e){var n=r.ɵɵgetCurrentView();r.ɵɵelementStart(0,"h4"),r.ɵɵtext(1),r.ɵɵpipe(2,"abpLocalization"),r.ɵɵelementEnd(),r.ɵɵtemplate(3,U,6,6,"strong",4),r.ɵɵelementStart(4,"form",5),r.ɵɵlistener("ngSubmit",(function(){return r.ɵɵrestoreView(n),r.ɵɵnextContext().onSubmit()})),r.ɵɵelementStart(5,"div",6),r.ɵɵelementStart(6,"label",7),r.ɵɵtext(7),r.ɵɵpipe(8,"abpLocalization"),r.ɵɵelementEnd(),r.ɵɵelement(9,"input",8),r.ɵɵelementEnd(),r.ɵɵelementStart(10,"div",6),r.ɵɵelementStart(11,"label",9),r.ɵɵtext(12),r.ɵɵpipe(13,"abpLocalization"),r.ɵɵelementEnd(),r.ɵɵelement(14,"input",10),r.ɵɵelementEnd(),r.ɵɵelementStart(15,"div",11),r.ɵɵelementStart(16,"label",12),r.ɵɵelement(17,"input",13),r.ɵɵtext(18),r.ɵɵpipe(19,"abpLocalization"),r.ɵɵelementEnd(),r.ɵɵelementEnd(),r.ɵɵelementStart(20,"abp-button",14),r.ɵɵtext(21),r.ɵɵpipe(22,"abpLocalization"),r.ɵɵelementEnd(),r.ɵɵelementEnd()}if(2&e){var o=r.ɵɵnextContext();r.ɵɵadvance(1),r.ɵɵtextInterpolate(r.ɵɵpipeBind1(2,8,"AbpAccount::Login")),r.ɵɵadvance(2),r.ɵɵproperty("ngIf",o.isSelfRegistrationEnabled),r.ɵɵadvance(1),r.ɵɵproperty("formGroup",o.form),r.ɵɵadvance(3),r.ɵɵtextInterpolate(r.ɵɵpipeBind1(8,10,"AbpAccount::UserNameOrEmailAddress")),r.ɵɵadvance(5),r.ɵɵtextInterpolate(r.ɵɵpipeBind1(13,12,"AbpAccount::Password")),r.ɵɵadvance(6),r.ɵɵtextInterpolate1(" ",r.ɵɵpipeBind1(19,14,"AbpAccount::RememberMe")," "),r.ɵɵadvance(2),r.ɵɵproperty("loading",o.inProgress),r.ɵɵadvance(1),r.ɵɵtextInterpolate1(" ",r.ɵɵpipeBind1(22,16,"AbpAccount::Login")," ")}}function q(e,t){1&e&&(r.ɵɵelementStart(0,"div",16),r.ɵɵelementStart(1,"a",17),r.ɵɵelementStart(2,"button",18),r.ɵɵtext(3),r.ɵɵpipe(4,"abpLocalization"),r.ɵɵelementEnd(),r.ɵɵelementEnd(),r.ɵɵelementEnd()),2&e&&(r.ɵɵadvance(3),r.ɵɵtextInterpolate1(" ",r.ɵɵpipeBind1(4,1,"AbpAccount::Cancel")," "))}k.ɵfac=function(e){return new(e||k)(r.ɵɵdirectiveInject(t.MultiTenancyService),r.ɵɵdirectiveInject(d.Store),r.ɵɵdirectiveInject(t.SubscriptionService),r.ɵɵdirectiveInject(t.ConfigStateService))},k.ɵcmp=r.ɵɵdefineComponent({type:k,selectors:[["abp-auth-wrapper"]],inputs:{mainContentRef:"mainContentRef",cancelContentRef:"cancelContentRef"},exportAs:["abpAuthWrapper"],features:[r.ɵɵProvidersFeature([t.SubscriptionService])],ngContentSelectors:V,decls:8,vars:5,consts:[[1,"row"],[1,"mx-auto","col","col-md-5"],[4,"ngIf"],[1,"abp-account-container"],["class","card mt-3 shadow-sm rounded",4,"ngIf","ngIfElse"],["disableLocalLoginTemplate",""],[4,"abpReplaceableTemplate"],[1,"card","mt-3","shadow-sm","rounded"],[1,"card-body","p-5"],[4,"ngTemplateOutlet"],[1,"alert","alert-warning"]],template:function(e,t){if(1&e&&(r.ɵɵprojectionDef(V),r.ɵɵelementStart(0,"div",0),r.ɵɵelementStart(1,"div",1),r.ɵɵtemplate(2,D,2,3,"ng-container",2),r.ɵɵpipe(3,"async"),r.ɵɵelementStart(4,"div",3),r.ɵɵtemplate(5,z,4,2,"div",4),r.ɵɵelementEnd(),r.ɵɵelementEnd(),r.ɵɵelementEnd(),r.ɵɵtemplate(6,F,6,6,"ng-template",null,5,r.ɵɵtemplateRefExtractor)),2&e){var n=r.ɵɵreference(7);r.ɵɵadvance(2),r.ɵɵproperty("ngIf",r.ɵɵpipeBind1(3,3,t.isMultiTenancyEnabled$)&&t.multiTenancy.isTenantBoxVisible),r.ɵɵadvance(3),r.ɵɵproperty("ngIf",t.enableLocalLogin)("ngIfElse",n)}},directives:[f.NgIf,t.ReplaceableTemplateDirective,P,f.NgTemplateOutlet],pipes:[f.AsyncPipe,t.LocalizationPipe],encapsulation:2}),("undefined"==typeof ngDevMode||ngDevMode)&&r.ɵsetClassMetadata(k,[{type:r.Component,args:[{selector:"abp-auth-wrapper",templateUrl:"./auth-wrapper.component.html",exportAs:"abpAuthWrapper",providers:[t.SubscriptionService]}]}],(function(){return[{type:t.MultiTenancyService},{type:d.Store},{type:t.SubscriptionService},{type:t.ConfigStateService}]}),{mainContentRef:[{type:r.Input}],cancelContentRef:[{type:r.Input}]});var K=function(e){return{value:e}},W=function(e,t){return{mainContentRef:e,cancelContentRef:t}},$=function(e,t){return{componentKey:e,inputs:t}},H=p.Validators.maxLength,J=(p.Validators.minLength,p.Validators.required),Y=function(){function e(e,t,n,r,o,a){this.fb=e,this.oauthService=t,this.store=n,this.toasterService=r,this.authService=o,this.configStateService=a,this.isSelfRegistrationEnabled=!0,this.authWrapperKey="Account.AuthWrapperComponent"}return e.prototype.ngOnInit=function(){this.isSelfRegistrationEnabled="false"!==(this.configStateService.getSetting("Abp.Account.IsSelfRegistrationEnabled")||"").toLowerCase(),this.form=this.fb.group({username:["",[J,H(255)]],password:["",[J,H(128)]],remember:[!1]})},e.prototype.onSubmit=function(){var e=this;this.form.invalid||(this.inProgress=!0,this.authService.login(this.form.get("username").value,this.form.get("password").value).pipe(c.catchError((function(t){return e.toasterService.error(b.default((function(){return t.error.error_description}))||b.default((function(){return t.error.error.message}),"AbpAccount::DefaultErrorMessage"),"Error",{life:7e3}),l.throwError(t)})),c.finalize((function(){return e.inProgress=!1}))).subscribe((function(){})))},e}();function Q(e,t){1&e&&(r.ɵɵelementStart(0,"div",2),r.ɵɵelementStart(1,"label",8),r.ɵɵtext(2),r.ɵɵpipe(3,"abpLocalization"),r.ɵɵelementEnd(),r.ɵɵelementStart(4,"span"),r.ɵɵtext(5," * "),r.ɵɵelementEnd(),r.ɵɵelement(6,"input",9),r.ɵɵelementEnd()),2&e&&(r.ɵɵadvance(2),r.ɵɵtextInterpolate(r.ɵɵpipeBind1(3,1,"AbpIdentity::DisplayName:CurrentPassword")))}Y.ɵfac=function(e){return new(e||Y)(r.ɵɵdirectiveInject(p.FormBuilder),r.ɵɵdirectiveInject(u.OAuthService),r.ɵɵdirectiveInject(d.Store),r.ɵɵdirectiveInject(n.ToasterService),r.ɵɵdirectiveInject(A),r.ɵɵdirectiveInject(t.ConfigStateService))},Y.ɵcmp=r.ɵɵdefineComponent({type:Y,selectors:[["abp-login"]],decls:5,vars:11,consts:[[3,"mainContentRef","cancelContentRef",4,"abpReplaceableTemplate"],["mainContentRef",""],["cancelContentRef",""],[3,"mainContentRef","cancelContentRef"],[4,"ngIf"],["validateOnSubmit","",1,"mt-4",3,"formGroup","ngSubmit"],[1,"form-group"],["for","login-input-user-name-or-email-address"],["type","text","id","login-input-user-name-or-email-address","formControlName","username","autocomplete","username","autofocus","",1,"form-control"],["for","login-input-password"],["type","password","id","login-input-password","formControlName","password","autocomplete","current-password",1,"form-control"],["validationTarget","","validationStyle","",1,"form-check"],["for","login-input-remember-me",1,"form-check-label"],["type","checkbox","id","login-input-remember-me","formControlName","remember",1,"form-check-input"],["buttonType","submit","name","Action","buttonClass","btn-block btn-lg mt-3 btn btn-primary",3,"loading"],["routerLink","/account/register",1,"text-decoration-none"],[1,"card-footer","text-center","border-0"],["routerLink","/"],["type","button","name","Action","value","Cancel",1,"px-2","py-0","btn","btn-link"]],template:function(e,t){if(1&e&&(r.ɵɵtemplate(0,_,1,2,"abp-auth-wrapper",0),r.ɵɵtemplate(1,G,23,18,"ng-template",null,1,r.ɵɵtemplateRefExtractor),r.ɵɵtemplate(3,q,5,3,"ng-template",null,2,r.ɵɵtemplateRefExtractor)),2&e){var n=r.ɵɵreference(2),o=r.ɵɵreference(4);r.ɵɵproperty("abpReplaceableTemplate",r.ɵɵpureFunction2(8,$,t.authWrapperKey,r.ɵɵpureFunction2(5,W,r.ɵɵpureFunction1(1,K,n),r.ɵɵpureFunction1(3,K,o))))}},directives:[t.ReplaceableTemplateDirective,k,f.NgIf,p.ɵangular_packages_forms_forms_y,p.NgControlStatusGroup,t.FormSubmitDirective,p.FormGroupDirective,a.ValidationGroupDirective,p.DefaultValueAccessor,p.NgControlStatus,p.FormControlName,a.ValidationDirective,t.AutofocusDirective,a.ValidationTargetDirective,a.ValidationStyleDirective,p.CheckboxControlValueAccessor,n.ButtonComponent,i.RouterLinkWithHref],pipes:[t.LocalizationPipe],encapsulation:2}),("undefined"==typeof ngDevMode||ngDevMode)&&r.ɵsetClassMetadata(Y,[{type:r.Component,args:[{selector:"abp-login",templateUrl:"./login.component.html"}]}],(function(){return[{type:p.FormBuilder},{type:u.OAuthService},{type:d.Store},{type:n.ToasterService},{type:A},{type:t.ConfigStateService}]}),null);var X=p.Validators.required,Z=["newPassword","repeatNewPassword"],ee=function(){function e(e,t,n,r){this.fb=e,this.store=t,this.toasterService=n,this.injector=r,this.mapErrorsFn=function(e,t,n){return Z.indexOf(String(n.name))<0?e:e.concat(t.filter((function(e){return"passwordMismatch"===e.key})))}}return e.prototype.ngOnInit=function(){this.hideCurrentPassword=!this.store.selectSnapshot(t.ProfileState.getProfile).hasPassword;var e=n.getPasswordValidators(this.injector);this.form=this.fb.group({password:["",X],newPassword:["",{validators:x([X],e)}],repeatNewPassword:["",{validators:x([X],e)}]},{validators:[a.comparePasswords(Z)]}),this.hideCurrentPassword&&this.form.removeControl("password")},e.prototype.onSubmit=function(){var e=this;this.form.invalid||(this.inProgress=!0,this.store.dispatch(new t.ChangePassword(Object.assign(Object.assign({},!this.hideCurrentPassword&&{currentPassword:this.form.get("password").value}),{newPassword:this.form.get("newPassword").value}))).pipe(c.finalize((function(){return e.inProgress=!1}))).subscribe({next:function(){e.form.reset(),e.toasterService.success("AbpAccount::PasswordChangedMessage","",{life:5e3}),e.hideCurrentPassword&&(e.hideCurrentPassword=!1,e.form.addControl("password",new p.FormControl("",[X])))},error:function(t){e.toasterService.error(b.default((function(){return t.error.error.message}),"AbpAccount::DefaultErrorMessage"))}}))},e}();function te(e,t){if(1&e){var n=r.ɵɵgetCurrentView();r.ɵɵelementStart(0,"form",1),r.ɵɵlistener("ngSubmit",(function(){return r.ɵɵrestoreView(n),r.ɵɵnextContext().submit()})),r.ɵɵelementStart(1,"div",2),r.ɵɵelementStart(2,"label",3),r.ɵɵtext(3),r.ɵɵpipe(4,"abpLocalization"),r.ɵɵelementEnd(),r.ɵɵelementStart(5,"span"),r.ɵɵtext(6," * "),r.ɵɵelementEnd(),r.ɵɵelementStart(7,"input",4),r.ɵɵlistener("keydown.space",(function(e){return e.preventDefault()})),r.ɵɵelementEnd(),r.ɵɵelementEnd(),r.ɵɵelementStart(8,"div",5),r.ɵɵelementStart(9,"div",6),r.ɵɵelementStart(10,"div",2),r.ɵɵelementStart(11,"label",7),r.ɵɵtext(12),r.ɵɵpipe(13,"abpLocalization"),r.ɵɵelementEnd(),r.ɵɵelement(14,"input",8),r.ɵɵelementEnd(),r.ɵɵelementEnd(),r.ɵɵelementStart(15,"div",6),r.ɵɵelementStart(16,"div",2),r.ɵɵelementStart(17,"label",9),r.ɵɵtext(18),r.ɵɵpipe(19,"abpLocalization"),r.ɵɵelementEnd(),r.ɵɵelement(20,"input",10),r.ɵɵelementEnd(),r.ɵɵelementEnd(),r.ɵɵelementEnd(),r.ɵɵelementStart(21,"div",2),r.ɵɵelementStart(22,"label",11),r.ɵɵtext(23),r.ɵɵpipe(24,"abpLocalization"),r.ɵɵelementEnd(),r.ɵɵelementStart(25,"span"),r.ɵɵtext(26," * "),r.ɵɵelementEnd(),r.ɵɵelement(27,"input",12),r.ɵɵelementEnd(),r.ɵɵelementStart(28,"div",2),r.ɵɵelementStart(29,"label",13),r.ɵɵtext(30),r.ɵɵpipe(31,"abpLocalization"),r.ɵɵelementEnd(),r.ɵɵelement(32,"input",14),r.ɵɵelementEnd(),r.ɵɵelementStart(33,"abp-button",15),r.ɵɵtext(34),r.ɵɵpipe(35,"abpLocalization"),r.ɵɵelementEnd(),r.ɵɵelementEnd()}if(2&e){var o=r.ɵɵnextContext();r.ɵɵproperty("formGroup",o.form),r.ɵɵadvance(3),r.ɵɵtextInterpolate(r.ɵɵpipeBind1(4,9,"AbpIdentity::DisplayName:UserName")),r.ɵɵadvance(9),r.ɵɵtextInterpolate(r.ɵɵpipeBind1(13,11,"AbpIdentity::DisplayName:Name")),r.ɵɵadvance(6),r.ɵɵtextInterpolate(r.ɵɵpipeBind1(19,13,"AbpIdentity::DisplayName:Surname")),r.ɵɵadvance(5),r.ɵɵtextInterpolate(r.ɵɵpipeBind1(24,15,"AbpIdentity::DisplayName:Email")),r.ɵɵadvance(7),r.ɵɵtextInterpolate(r.ɵɵpipeBind1(31,17,"AbpIdentity::DisplayName:PhoneNumber")),r.ɵɵadvance(3),r.ɵɵproperty("loading",o.inProgress)("disabled",null==o.form?null:o.form.invalid),r.ɵɵadvance(1),r.ɵɵtextInterpolate1(" ",r.ɵɵpipeBind1(35,19,"AbpIdentity::Save"),"")}}ee.ɵfac=function(e){return new(e||ee)(r.ɵɵdirectiveInject(p.FormBuilder),r.ɵɵdirectiveInject(d.Store),r.ɵɵdirectiveInject(n.ToasterService),r.ɵɵdirectiveInject(r.Injector))},ee.ɵcmp=r.ɵɵdefineComponent({type:ee,selectors:[["abp-change-password-form"]],exportAs:["abpChangePasswordForm"],decls:19,vars:14,consts:[["validateOnSubmit","",3,"formGroup","mapErrorsFn","ngSubmit"],["class","form-group",4,"ngIf"],[1,"form-group"],["for","new-password"],["type","password","id","new-password","formControlName","newPassword","autocomplete","new-password",1,"form-control"],["for","confirm-new-password"],["type","password","id","confirm-new-password","formControlName","repeatNewPassword","autocomplete","new-password",1,"form-control"],["iconClass","fa fa-check","buttonClass","btn btn-primary color-white","buttonType","submit",3,"loading","disabled"],["for","current-password"],["type","password","id","current-password","formControlName","password","autofocus","","autocomplete","current-password",1,"form-control"]],template:function(e,t){1&e&&(r.ɵɵelementStart(0,"form",0),r.ɵɵlistener("ngSubmit",(function(){return t.onSubmit()})),r.ɵɵtemplate(1,Q,7,3,"div",1),r.ɵɵelementStart(2,"div",2),r.ɵɵelementStart(3,"label",3),r.ɵɵtext(4),r.ɵɵpipe(5,"abpLocalization"),r.ɵɵelementEnd(),r.ɵɵelementStart(6,"span"),r.ɵɵtext(7," * "),r.ɵɵelementEnd(),r.ɵɵelement(8,"input",4),r.ɵɵelementEnd(),r.ɵɵelementStart(9,"div",2),r.ɵɵelementStart(10,"label",5),r.ɵɵtext(11),r.ɵɵpipe(12,"abpLocalization"),r.ɵɵelementEnd(),r.ɵɵelementStart(13,"span"),r.ɵɵtext(14," * "),r.ɵɵelementEnd(),r.ɵɵelement(15,"input",6),r.ɵɵelementEnd(),r.ɵɵelementStart(16,"abp-button",7),r.ɵɵtext(17),r.ɵɵpipe(18,"abpLocalization"),r.ɵɵelementEnd(),r.ɵɵelementEnd()),2&e&&(r.ɵɵproperty("formGroup",t.form)("mapErrorsFn",t.mapErrorsFn),r.ɵɵadvance(1),r.ɵɵproperty("ngIf",!t.hideCurrentPassword),r.ɵɵadvance(3),r.ɵɵtextInterpolate(r.ɵɵpipeBind1(5,8,"AbpIdentity::DisplayName:NewPassword")),r.ɵɵadvance(7),r.ɵɵtextInterpolate(r.ɵɵpipeBind1(12,10,"AbpIdentity::DisplayName:NewPasswordConfirm")),r.ɵɵadvance(5),r.ɵɵproperty("loading",t.inProgress)("disabled",null==t.form?null:t.form.invalid),r.ɵɵadvance(1),r.ɵɵtextInterpolate(r.ɵɵpipeBind1(18,12,"AbpIdentity::Save")))},directives:[p.ɵangular_packages_forms_forms_y,p.NgControlStatusGroup,t.FormSubmitDirective,p.FormGroupDirective,a.ValidationGroupDirective,f.NgIf,p.DefaultValueAccessor,p.NgControlStatus,p.FormControlName,a.ValidationDirective,n.ButtonComponent,t.AutofocusDirective],pipes:[t.LocalizationPipe],encapsulation:2}),("undefined"==typeof ngDevMode||ngDevMode)&&r.ɵsetClassMetadata(ee,[{type:r.Component,args:[{selector:"abp-change-password-form",templateUrl:"./change-password.component.html",exportAs:"abpChangePasswordForm"}]}],(function(){return[{type:p.FormBuilder},{type:d.Store},{type:n.ToasterService},{type:r.Injector}]}),null);var ne=p.Validators.maxLength,re=p.Validators.required,oe=p.Validators.email,ae=function(){function e(e,t,n){this.fb=e,this.store=t,this.toasterService=n}return e.prototype.ngOnInit=function(){this.buildForm()},e.prototype.buildForm=function(){var e=this.store.selectSnapshot(t.ProfileState.getProfile);this.form=this.fb.group({userName:[e.userName,[re,ne(256)]],email:[e.email,[re,oe,ne(256)]],name:[e.name||"",[ne(64)]],surname:[e.surname||"",[ne(64)]],phoneNumber:[e.phoneNumber||"",[ne(16)]]})},e.prototype.submit=function(){var e=this;this.form.invalid||(this.inProgress=!0,this.store.dispatch(new t.UpdateProfile(this.form.value)).pipe(c.finalize((function(){return e.inProgress=!1}))).subscribe((function(){e.toasterService.success("AbpAccount::PersonalSettingsSaved","Success",{life:5e3})})))},e}();ae.ɵfac=function(e){return new(e||ae)(r.ɵɵdirectiveInject(p.FormBuilder),r.ɵɵdirectiveInject(d.Store),r.ɵɵdirectiveInject(n.ToasterService))},ae.ɵcmp=r.ɵɵdefineComponent({type:ae,selectors:[["abp-personal-settings-form"]],exportAs:["abpPersonalSettingsForm"],decls:1,vars:1,consts:[["validateOnSubmit","",3,"formGroup","ngSubmit",4,"ngIf"],["validateOnSubmit","",3,"formGroup","ngSubmit"],[1,"form-group"],["for","username"],["type","text","id","username","formControlName","userName","autofocus","",1,"form-control",3,"keydown.space"],[1,"row"],[1,"col","col-md-6"],["for","name"],["type","text","id","name","formControlName","name",1,"form-control"],["for","surname"],["type","text","id","surname","formControlName","surname",1,"form-control"],["for","email-address"],["type","text","id","email-address","formControlName","email",1,"form-control"],["for","phone-number"],["type","text","id","phone-number","formControlName","phoneNumber",1,"form-control"],["buttonType","submit","iconClass","fa fa-check","buttonClass","btn btn-primary color-white",3,"loading","disabled"]],template:function(e,t){1&e&&r.ɵɵtemplate(0,te,36,21,"form",0),2&e&&r.ɵɵproperty("ngIf",t.form)},directives:[f.NgIf,p.ɵangular_packages_forms_forms_y,p.NgControlStatusGroup,t.FormSubmitDirective,p.FormGroupDirective,a.ValidationGroupDirective,p.DefaultValueAccessor,p.NgControlStatus,p.FormControlName,a.ValidationDirective,t.AutofocusDirective,n.ButtonComponent],pipes:[t.LocalizationPipe],encapsulation:2}),("undefined"==typeof ngDevMode||ngDevMode)&&r.ɵsetClassMetadata(ae,[{type:r.Component,args:[{selector:"abp-personal-settings-form",templateUrl:"./personal-settings.component.html",exportAs:"abpPersonalSettingsForm"}]}],(function(){return[{type:p.FormBuilder},{type:d.Store},{type:n.ToasterService}]}),null);var ie=function(e){return{active:e}};function pe(e,t){if(1&e){var n=r.ɵɵgetCurrentView();r.ɵɵelementStart(0,"li",10),r.ɵɵlistener("click",(function(){return r.ɵɵrestoreView(n),r.ɵɵnextContext().selectedTab=0})),r.ɵɵelementStart(1,"a",8),r.ɵɵtext(2),r.ɵɵpipe(3,"abpLocalization"),r.ɵɵelementEnd(),r.ɵɵelementEnd()}if(2&e){var o=r.ɵɵnextContext();r.ɵɵadvance(1),r.ɵɵproperty("ngClass",r.ɵɵpureFunction1(4,ie,0===o.selectedTab)),r.ɵɵadvance(1),r.ɵɵtextInterpolate(r.ɵɵpipeBind1(3,2,"AbpUi::ChangePassword"))}}function le(e,t){1&e&&r.ɵɵelement(0,"abp-change-password-form")}var ce=function(e){return{componentKey:e}};function se(e,t){if(1&e&&(r.ɵɵelementStart(0,"div",13),r.ɵɵelementStart(1,"div",14),r.ɵɵelementStart(2,"h4"),r.ɵɵtext(3),r.ɵɵpipe(4,"abpLocalization"),r.ɵɵelement(5,"hr"),r.ɵɵelementEnd(),r.ɵɵtemplate(6,le,1,0,"abp-change-password-form",15),r.ɵɵelementEnd(),r.ɵɵelementEnd()),2&e){var n=r.ɵɵnextContext(2);r.ɵɵproperty("@fadeIn",void 0),r.ɵɵadvance(3),r.ɵɵtextInterpolate1(" ",r.ɵɵpipeBind1(4,3,"AbpIdentity::ChangePassword")," "),r.ɵɵadvance(3),r.ɵɵproperty("abpReplaceableTemplate",r.ɵɵpureFunction1(5,ce,n.changePasswordKey))}}function ue(e,t){1&e&&r.ɵɵelement(0,"abp-personal-settings-form")}function de(e,t){if(1&e&&(r.ɵɵelementStart(0,"div",13),r.ɵɵelementStart(1,"div",14),r.ɵɵelementStart(2,"h4"),r.ɵɵtext(3),r.ɵɵpipe(4,"abpLocalization"),r.ɵɵelement(5,"hr"),r.ɵɵelementEnd(),r.ɵɵtemplate(6,ue,1,0,"abp-personal-settings-form",15),r.ɵɵelementEnd(),r.ɵɵelementEnd()),2&e){var n=r.ɵɵnextContext(2);r.ɵɵproperty("@fadeIn",void 0),r.ɵɵadvance(3),r.ɵɵtextInterpolate1(" ",r.ɵɵpipeBind1(4,3,"AbpIdentity::PersonalSettings")," "),r.ɵɵadvance(3),r.ɵɵproperty("abpReplaceableTemplate",r.ɵɵpureFunction1(5,ce,n.personalSettingsKey))}}function me(e,t){if(1&e&&(r.ɵɵelementStart(0,"div",11),r.ɵɵtemplate(1,se,7,7,"div",12),r.ɵɵtemplate(2,de,7,7,"div",12),r.ɵɵelementEnd()),2&e){var n=r.ɵɵnextContext();r.ɵɵadvance(1),r.ɵɵproperty("ngIf",0===n.selectedTab),r.ɵɵadvance(1),r.ɵɵproperty("ngIf",1===n.selectedTab)}}var fe=function(){function e(e){this.store=e,this.selectedTab=0,this.changePasswordKey="Account.ChangePasswordComponent",this.personalSettingsKey="Account.PersonalSettingsComponent"}return e.prototype.ngOnInit=function(){var e=this;this.store.dispatch(new t.GetProfile).subscribe((function(){e.isProfileLoaded=!0,e.store.selectSnapshot(t.ProfileState.getProfile).isExternal&&(e.hideChangePasswordTab=!0,e.selectedTab=1)}))},e}();function ve(e,t){if(1&e&&r.ɵɵelement(0,"abp-auth-wrapper",2),2&e){r.ɵɵnextContext();var n=r.ɵɵreference(2);r.ɵɵproperty("mainContentRef",n)}}function ge(e,t){if(1&e){var n=r.ɵɵgetCurrentView();r.ɵɵelementStart(0,"form",5),r.ɵɵlistener("ngSubmit",(function(){return r.ɵɵrestoreView(n),r.ɵɵnextContext(2).onSubmit()})),r.ɵɵelementStart(1,"div",6),r.ɵɵelementStart(2,"label",7),r.ɵɵtext(3),r.ɵɵpipe(4,"abpLocalization"),r.ɵɵelementEnd(),r.ɵɵelementStart(5,"span"),r.ɵɵtext(6," * "),r.ɵɵelementEnd(),r.ɵɵelement(7,"input",8),r.ɵɵelementEnd(),r.ɵɵelementStart(8,"div",6),r.ɵɵelementStart(9,"label",9),r.ɵɵtext(10),r.ɵɵpipe(11,"abpLocalization"),r.ɵɵelementEnd(),r.ɵɵelementStart(12,"span"),r.ɵɵtext(13," * "),r.ɵɵelementEnd(),r.ɵɵelement(14,"input",10),r.ɵɵelementEnd(),r.ɵɵelementStart(15,"div",6),r.ɵɵelementStart(16,"label",11),r.ɵɵtext(17),r.ɵɵpipe(18,"abpLocalization"),r.ɵɵelementEnd(),r.ɵɵelementStart(19,"span"),r.ɵɵtext(20," * "),r.ɵɵelementEnd(),r.ɵɵelement(21,"input",12),r.ɵɵelementEnd(),r.ɵɵelementStart(22,"abp-button",13),r.ɵɵtext(23),r.ɵɵpipe(24,"abpLocalization"),r.ɵɵelementEnd(),r.ɵɵelementEnd()}if(2&e){var o=r.ɵɵnextContext(2);r.ɵɵproperty("formGroup",o.form),r.ɵɵadvance(3),r.ɵɵtextInterpolate(r.ɵɵpipeBind1(4,6,"AbpAccount::UserName")),r.ɵɵadvance(7),r.ɵɵtextInterpolate(r.ɵɵpipeBind1(11,8,"AbpAccount::EmailAddress")),r.ɵɵadvance(7),r.ɵɵtextInterpolate(r.ɵɵpipeBind1(18,10,"AbpAccount::Password")),r.ɵɵadvance(5),r.ɵɵproperty("loading",o.inProgress),r.ɵɵadvance(1),r.ɵɵtextInterpolate1(" ",r.ɵɵpipeBind1(24,12,"AbpAccount::Register")," ")}}function be(e,t){if(1&e&&(r.ɵɵelementStart(0,"h4"),r.ɵɵtext(1),r.ɵɵpipe(2,"abpLocalization"),r.ɵɵelementEnd(),r.ɵɵelementStart(3,"strong"),r.ɵɵtext(4),r.ɵɵpipe(5,"abpLocalization"),r.ɵɵelementStart(6,"a",3),r.ɵɵtext(7),r.ɵɵpipe(8,"abpLocalization"),r.ɵɵelementEnd(),r.ɵɵelementEnd(),r.ɵɵtemplate(9,ge,25,14,"form",4)),2&e){var n=r.ɵɵnextContext();r.ɵɵadvance(1),r.ɵɵtextInterpolate(r.ɵɵpipeBind1(2,4,"AbpAccount::Register")),r.ɵɵadvance(3),r.ɵɵtextInterpolate1(" ",r.ɵɵpipeBind1(5,6,"AbpAccount::AlreadyRegistered")," "),r.ɵɵadvance(3),r.ɵɵtextInterpolate(r.ɵɵpipeBind1(8,8,"AbpAccount::Login")),r.ɵɵadvance(2),r.ɵɵproperty("ngIf",n.isSelfRegistrationEnabled)}}fe.ɵfac=function(e){return new(e||fe)(r.ɵɵdirectiveInject(d.Store))},fe.ɵcmp=r.ɵɵdefineComponent({type:fe,selectors:[["abp-manage-profile"]],decls:12,vars:9,consts:[["id","AbpContentToolbar"],[1,"card","border-0","shadow-sm","min-h-400",3,"abpLoading"],[1,"card-body"],[1,"row"],[1,"col-12","col-md-3"],["id","nav-tab","role","tablist",1,"nav","flex-column","nav-pills"],["class","nav-item",3,"click",4,"ngIf"],[1,"nav-item","mb-2",3,"click"],["role","tab","href","javascript:void(0)",1,"nav-link",3,"ngClass"],["class","col-12 col-md-9",4,"ngIf"],[1,"nav-item",3,"click"],[1,"col-12","col-md-9"],["class","tab-content",4,"ngIf"],[1,"tab-content"],["role","tabpanel",1,"tab-pane","active"],[4,"abpReplaceableTemplate"]],template:function(e,t){1&e&&(r.ɵɵelement(0,"div",0),r.ɵɵelementStart(1,"div",1),r.ɵɵelementStart(2,"div",2),r.ɵɵelementStart(3,"div",3),r.ɵɵelementStart(4,"div",4),r.ɵɵelementStart(5,"ul",5),r.ɵɵtemplate(6,pe,4,6,"li",6),r.ɵɵelementStart(7,"li",7),r.ɵɵlistener("click",(function(){return t.selectedTab=1})),r.ɵɵelementStart(8,"a",8),r.ɵɵtext(9),r.ɵɵpipe(10,"abpLocalization"),r.ɵɵelementEnd(),r.ɵɵelementEnd(),r.ɵɵelementEnd(),r.ɵɵelementEnd(),r.ɵɵtemplate(11,me,3,2,"div",9),r.ɵɵelementEnd(),r.ɵɵelementEnd(),r.ɵɵelementEnd()),2&e&&(r.ɵɵadvance(1),r.ɵɵproperty("abpLoading",!t.isProfileLoaded),r.ɵɵadvance(5),r.ɵɵproperty("ngIf",!t.hideChangePasswordTab&&t.isProfileLoaded),r.ɵɵadvance(2),r.ɵɵproperty("ngClass",r.ɵɵpureFunction1(7,ie,1===t.selectedTab)),r.ɵɵadvance(1),r.ɵɵtextInterpolate(r.ɵɵpipeBind1(10,5,"AbpAccount::PersonalSettings")),r.ɵɵadvance(2),r.ɵɵproperty("ngIf",t.isProfileLoaded))},directives:[n.LoadingDirective,f.NgIf,f.NgClass,t.ReplaceableTemplateDirective,ee,ae],pipes:[t.LocalizationPipe],styles:[".min-h-400[_ngcontent-%COMP%] {\n        min-height: 400px;\n      }"],data:{animation:[v.trigger("fadeIn",[v.transition(":enter",v.useAnimation(n.fadeIn))])]}}),("undefined"==typeof ngDevMode||ngDevMode)&&r.ɵsetClassMetadata(fe,[{type:r.Component,args:[{selector:"abp-manage-profile",templateUrl:"./manage-profile.component.html",animations:[v.trigger("fadeIn",[v.transition(":enter",v.useAnimation(n.fadeIn))])],styles:["\n      .min-h-400 {\n        min-height: 400px;\n      }\n    "]}]}],(function(){return[{type:d.Store}]}),null);var he=function(e){return{value:e}},Se=function(e){return{mainContentRef:e}},ye=function(e,t){return{componentKey:e,inputs:t}},Ce=p.Validators.maxLength,xe=p.Validators.required,we=p.Validators.email,Ae=function(){function e(e,t,n,r,o,a,i){this.fb=e,this.accountService=t,this.oauthService=n,this.store=r,this.toasterService=o,this.authService=a,this.injector=i,this.isSelfRegistrationEnabled=!0,this.authWrapperKey="Account.AuthWrapperComponent"}return e.prototype.ngOnInit=function(){this.form=this.fb.group({username:["",[xe,Ce(255)]],password:["",x([xe],n.getPasswordValidators(this.injector))],email:["",[xe,we]]})},e.prototype.onSubmit=function(){var e=this;if(!this.form.invalid){this.inProgress=!0;var t={userName:this.form.get("username").value,password:this.form.get("password").value,emailAddress:this.form.get("email").value,appName:"Angular"};this.accountService.register(t).pipe(c.switchMap((function(){return e.authService.login(t.userName,t.password)})),c.catchError((function(t){return e.toasterService.error(b.default((function(){return t.error.error_description}))||b.default((function(){return t.error.error.message}),"AbpAccount::DefaultErrorMessage"),"Error",{life:7e3}),l.throwError(t)})),c.finalize((function(){return e.inProgress=!1}))).subscribe()}},e}();Ae.ɵfac=function(e){return new(e||Ae)(r.ɵɵdirectiveInject(p.FormBuilder),r.ɵɵdirectiveInject(I),r.ɵɵdirectiveInject(u.OAuthService),r.ɵɵdirectiveInject(d.Store),r.ɵɵdirectiveInject(n.ToasterService),r.ɵɵdirectiveInject(A),r.ɵɵdirectiveInject(r.Injector))},Ae.ɵcmp=r.ɵɵdefineComponent({type:Ae,selectors:[["abp-register"]],decls:3,vars:8,consts:[[3,"mainContentRef",4,"abpReplaceableTemplate"],["mainContentRef",""],[3,"mainContentRef"],["routerLink","/account/login",1,"text-decoration-none"],["validateOnSubmit","","class","mt-4",3,"formGroup","ngSubmit",4,"ngIf"],["validateOnSubmit","",1,"mt-4",3,"formGroup","ngSubmit"],[1,"form-group"],["for","input-user-name"],["autofocus","","type","text","id","input-user-name","formControlName","username","autocomplete","username",1,"form-control"],["for","input-email-address"],["type","email","id","input-email-address","formControlName","email",1,"form-control"],["for","input-password"],["type","password","id","input-password","formControlName","password","autocomplete","current-password",1,"form-control"],["buttonType","submit","name","Action","buttonClass","btn-block btn-lg mt-3 btn btn-primary",3,"loading"]],template:function(e,t){if(1&e&&(r.ɵɵtemplate(0,ve,1,1,"abp-auth-wrapper",0),r.ɵɵtemplate(1,be,10,10,"ng-template",null,1,r.ɵɵtemplateRefExtractor)),2&e){var n=r.ɵɵreference(2);r.ɵɵproperty("abpReplaceableTemplate",r.ɵɵpureFunction2(5,ye,t.authWrapperKey,r.ɵɵpureFunction1(3,Se,r.ɵɵpureFunction1(1,he,n))))}},directives:[t.ReplaceableTemplateDirective,k,i.RouterLinkWithHref,f.NgIf,p.ɵangular_packages_forms_forms_y,p.NgControlStatusGroup,t.FormSubmitDirective,p.FormGroupDirective,a.ValidationGroupDirective,p.DefaultValueAccessor,t.AutofocusDirective,p.NgControlStatus,p.FormControlName,a.ValidationDirective,n.ButtonComponent],pipes:[t.LocalizationPipe],encapsulation:2}),("undefined"==typeof ngDevMode||ngDevMode)&&r.ɵsetClassMetadata(Ae,[{type:r.Component,args:[{selector:"abp-register",templateUrl:"./register.component.html"}]}],(function(){return[{type:p.FormBuilder},{type:I},{type:u.OAuthService},{type:d.Store},{type:n.ToasterService},{type:A},{type:r.Injector}]}),null);var Ie=function(){function e(e){this.authService=e}return e.prototype.canActivate=function(){return!!this.authService.isInternalAuth||(this.authService.initLogin(),!1)},e}();Ie.ɵfac=function(e){return new(e||Ie)(r.ɵɵinject(A))},Ie.ɵprov=r.ɵɵdefineInjectable({token:Ie,factory:Ie.ɵfac}),("undefined"==typeof ngDevMode||ngDevMode)&&r.ɵsetClassMetadata(Ie,[{type:r.Injectable}],(function(){return[{type:A}]}),null);var Ee=[{path:"",pathMatch:"full",redirectTo:"login"},{path:"",component:t.DynamicLayoutComponent,children:[{path:"login",component:t.ReplaceableRouteContainerComponent,canActivate:[Ie],data:{replaceableComponent:{key:"Account.LoginComponent",defaultComponent:Y}}},{path:"register",component:t.ReplaceableRouteContainerComponent,canActivate:[Ie],data:{replaceableComponent:{key:"Account.RegisterComponent",defaultComponent:Ae}}},{path:"manage-profile",component:t.ReplaceableRouteContainerComponent,canActivate:[t.AuthGuard],data:{replaceableComponent:{key:"Account.ManageProfileComponent",defaultComponent:fe}}}]}],Te=function(){};Te.ɵfac=function(e){return new(e||Te)},Te.ɵmod=r.ɵɵdefineNgModule({type:Te}),Te.ɵinj=r.ɵɵdefineInjector({imports:[[i.RouterModule.forChild(Ee)],i.RouterModule]}),("undefined"==typeof ngJitMode||ngJitMode)&&r.ɵɵsetNgModuleScope(Te,{imports:[i.RouterModule],exports:[i.RouterModule]}),("undefined"==typeof ngDevMode||ngDevMode)&&r.ɵsetClassMetadata(Te,[{type:r.NgModule,args:[{imports:[i.RouterModule.forChild(Ee)],exports:[i.RouterModule]}]}],null,null);var Me=new r.InjectionToken("ACCOUNT_OPTIONS");function Ne(e){return Object.assign({redirectUrl:"/"},e)}var je=function(){function e(e){this.environmentService=e}return e.prototype.canActivate=function(e,t){var n=this.environmentService.getEnvironment();return"code"!==n.oAuthConfig.responseType||(window.location.href=n.oAuthConfig.issuer+"/Account/Manage?returnUrl="+window.location.href,!1)},e}();je.ɵfac=function(e){return new(e||je)(r.ɵɵinject(t.EnvironmentService))},je.ɵprov=r.ɵɵdefineInjectable({token:je,factory:je.ɵfac}),("undefined"==typeof ngDevMode||ngDevMode)&&r.ɵsetClassMetadata(je,[{type:r.Injectable}],(function(){return[{type:t.EnvironmentService}]}),null);var Pe=function(){function e(){}return e.forChild=function(t){return{ngModule:e,providers:[Ie,je,{provide:Me,useValue:t},{provide:"ACCOUNT_OPTIONS",useFactory:Ne,deps:[Me]}]}},e.forLazy=function(n){return new t.LazyModuleFactory(e.forChild(n))},e}();Pe.ɵfac=function(e){return new(e||Pe)},Pe.ɵmod=r.ɵɵdefineNgModule({type:Pe}),Pe.ɵinj=r.ɵɵdefineInjector({imports:[[t.CoreModule,Te,n.ThemeSharedModule,o.NgbDropdownModule,a.NgxValidateCoreModule]]}),("undefined"==typeof ngJitMode||ngJitMode)&&r.ɵɵsetNgModuleScope(Pe,{declarations:[k,Y,Ae,P,ee,fe,ae],imports:[t.CoreModule,Te,n.ThemeSharedModule,o.NgbDropdownModule,a.NgxValidateCoreModule]}),("undefined"==typeof ngDevMode||ngDevMode)&&r.ɵsetClassMetadata(Pe,[{type:r.NgModule,args:[{declarations:[k,Y,Ae,P,ee,fe,ae],imports:[t.CoreModule,Te,n.ThemeSharedModule,o.NgbDropdownModule,a.NgxValidateCoreModule],exports:[]}]}],null,null),e.ACCOUNT_OPTIONS=Me,e.AccountModule=Pe,e.AccountService=I,e.AuthService=A,e.AuthenticationFlowGuard=Ie,e.ChangePasswordComponent=ee,e.LoginComponent=Y,e.ManageProfileComponent=fe,e.ManageProfileGuard=je,e.PersonalSettingsComponent=ae,e.RegisterComponent=Ae,e.TenantBoxComponent=P,Object.defineProperty(e,"__esModule",{value:!0})}));
//# sourceMappingURL=fs-tw-account.umd.min.js.map