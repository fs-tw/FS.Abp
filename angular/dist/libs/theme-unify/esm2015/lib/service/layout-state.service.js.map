{"version":3,"file":"layout-state.service.js","sourceRoot":"","sources":["../../../../../../libs/theme-unify/src/lib/service/layout-state.service.ts"],"names":[],"mappings":"AAAA,OAAO,EAAc,UAAU,EAAE,MAAM,eAAe,CAAC;AACvD,OAAO,EAAwB,mBAAmB,EAAgB,MAAM,cAAc,CAAA;AACtF,OAAO,EAAE,aAAa,EAAE,MAAM,cAAc,CAAA;;;AAS5C,MAAM,OAAO,kBAAkB;IAY7B,cAAc;IACd,kCAAkC;IAClC,IAAI;IAEJ,eAAe;IACf,uDAAuD;IACvD,IAAI;IAEJ,YACU,mBAAwC;QAAxC,wBAAmB,GAAnB,mBAAmB,CAAqB;QApB1C,UAAK,GAAG,IAAI,aAAa,CAAC,EAAkB,CAAC,CAAC;IAuBtD,CAAC;IApBD,gBAAgB;QACd,OAAO,IAAI,CAAC,KAAK,CAAC,KAAK,CAAC,aAAa,CAAC;IACxC,CAAC;IAED,iBAAiB;QACf,OAAO,IAAI,CAAC,KAAK,CAAC,UAAU,CAAC,KAAK,CAAC,EAAE,CAAC,KAAK,CAAC,aAAa,CAAC,CAAC;IAC7D,CAAC;;oFAVU,kBAAkB;0DAAlB,kBAAkB,WAAlB,kBAAkB,mBAFjB,MAAM;uFAEP,kBAAkB;cAH9B,UAAU;eAAC;gBACV,UAAU,EAAE,MAAM;aACnB","sourcesContent":["import { ElementRef, Injectable } from '@angular/core';\r\nimport { StyleContentStrategy, DomInsertionService, DOM_STRATEGY } from '@abp/ng.core'\r\nimport { InternalStore } from '@abp/ng.core'\r\nimport { BehaviorSubject, from, Observable } from 'rxjs';\r\nimport { Layout } from '../models/layout'\r\n//import { TheProjectThemeSettingsService, Settings, UpdateTheProjectThemeSettingsDto } from '@fs/theme.the-project/proxy'\r\nimport { map, take } from 'rxjs/operators';\r\n\r\n@Injectable({\r\n  providedIn: 'root',\r\n})\r\nexport class LayoutStateService {\r\n  private store = new InternalStore({} as Layout.State);\r\n  AppComponent:ElementRef;\r\n\r\n  getThemeSettings() {\r\n    return this.store.state.themeSettings;\r\n  }\r\n\r\n  getThemeSettings$() {\r\n    return this.store.sliceState(state => state.themeSettings);\r\n  }\r\n\r\n  // getSkin() {\r\n  //   return this.store.state.skin;\r\n  // }\r\n\r\n  // getSkin$() {\r\n  //   return this.store.sliceState(state => state.skin);\r\n  // }\r\n\r\n  constructor(\r\n    private domInsertionService: DomInsertionService,\r\n    //private theProjectThemeSettingsService: TheProjectThemeSettingsService,\r\n  ) {\r\n  }\r\n  // setSkin(skin: Settings.TheProjectSkin) {\r\n  //   if (this.store.state.skin === skin) {\r\n  //     return;\r\n  //   }\r\n  //   this.loadSkin(skin)\r\n  //     .pipe(take(1))\r\n  //     .subscribe(element => {\r\n  //       const { skinElement } = this.store.state;\r\n  //       this.removeSkin(skinElement);\r\n  //       this.store.patch({\r\n  //         skin: skin,\r\n  //         skinElement: element,\r\n  //       });\r\n  //     });\r\n  // }\r\n  //fetchThemeSettings() {\r\n    // this.theProjectThemeSettingsService.get().subscribe(themeSettings => {\r\n    //   this.setSkin(themeSettings.skin);\r\n    //   this.store.patch({ themeSettings });\r\n    // });\r\n  //}\r\n  // updateThemeSettings(themeSettings: UpdateTheProjectThemeSettingsDto) {\r\n  //   this.theProjectThemeSettingsService\r\n  //     .updateByInput(themeSettings)\r\n  //     .subscribe(() => this.store.patch({ themeSettings: { skin: themeSettings.skin } }));\r\n  // }\r\n\r\n  // private loadSkin(skin: Settings.TheProjectSkin): Observable<HTMLStyleElement> {\r\n  //   const custom: HTMLLinkElement = document.querySelector('link[href*=custom]');\r\n  //   const domStrategy = DOM_STRATEGY.AppendToHead()\r\n  //     ? DOM_STRATEGY.BeforeElement(custom)\r\n  //     : DOM_STRATEGY.AppendToHead();\r\n\r\n  //   return this.getSkinJs(skin).pipe(\r\n  //     map(content => {\r\n  //       const strategy = new StyleContentStrategy(content, domStrategy);\r\n  //       return this.domInsertionService.insertContent(strategy);\r\n  //     }),\r\n  //   );\r\n  // }\r\n  // private getSkinJs = (skin: Settings.TheProjectSkin): Observable<string> => {\r\n  //   let leptonJs: Promise<{ default: string }>;\r\n  //   switch (skin) {\r\n  //     case Settings.TheProjectSkin.blue:\r\n  //       leptonJs = import(\r\n  //         /* webpackChunkName: \"theme.blue\" */\r\n  //         /* webpackMode: \"lazy\" */\r\n  //         '@fs/theme.the-project/dist/assets/template/css/skins/blue'\r\n  //       );\r\n  //       break;\r\n  //     case Settings.TheProjectSkin.brown:\r\n  //       leptonJs = import(\r\n  //         /* webpackChunkName: \"theme.brown\" */\r\n  //         /* webpackMode: \"lazy\" */\r\n  //         '@fs/theme.the-project/dist/assets/template/css/skins/brown'\r\n  //       );\r\n  //       break;\r\n  //     case Settings.TheProjectSkin.cool_green:\r\n  //       leptonJs = import(\r\n  //         /* webpackChunkName: \"theme.cool_green\" */\r\n  //         /* webpackMode: \"lazy\" */\r\n  //         '@fs/theme.the-project/dist/assets/template/css/skins/cool_green'\r\n  //       );\r\n  //       break;\r\n  //     case Settings.TheProjectSkin.dark_cyan:\r\n  //       leptonJs = import(\r\n  //         /* webpackChunkName: \"theme.dark_cyan\" */\r\n  //         /* webpackMode: \"lazy\" */\r\n  //         '@fs/theme.the-project/dist/assets/template/css/skins/dark_cyan'\r\n  //       );\r\n  //       break;\r\n  //     case Settings.TheProjectSkin.dark_red:\r\n  //       leptonJs = import(\r\n  //         /* webpackChunkName: \"theme.dark_red\" */\r\n  //         /* webpackMode: \"lazy\" */\r\n  //         '@fs/theme.the-project/dist/assets/template/css/skins/dark_red'\r\n  //       );\r\n  //       break;\r\n  //     case Settings.TheProjectSkin.gold:\r\n  //       leptonJs = import(\r\n  //         /* webpackChunkName: \"theme.gold\" */\r\n  //         /* webpackMode: \"lazy\" */\r\n  //         '@fs/theme.the-project/dist/assets/template/css/skins/gold'\r\n  //       );\r\n  //       break;\r\n  //     case Settings.TheProjectSkin.gray:\r\n  //       leptonJs = import(\r\n  //         /* webpackChunkName: \"theme.gray\" */\r\n  //         /* webpackMode: \"lazy\" */\r\n  //         '@fs/theme.the-project/dist/assets/template/css/skins/gray'\r\n  //       );\r\n  //       break;\r\n  //     case Settings.TheProjectSkin.green:\r\n  //       leptonJs = import(\r\n  //         /* webpackChunkName: \"theme.green\" */\r\n  //         /* webpackMode: \"lazy\" */\r\n  //         '@fs/theme.the-project/dist/assets/template/css/skins/green'\r\n  //       );\r\n  //       break;\r\n  //     case Settings.TheProjectSkin.light_blue:\r\n  //       leptonJs = import(\r\n  //         /* webpackChunkName: \"theme.light_blue\" */\r\n  //         /* webpackMode: \"lazy\" */\r\n  //         '@fs/theme.the-project/dist/assets/template/css/skins/light_blue'\r\n  //       );\r\n  //       break;\r\n  //     case Settings.TheProjectSkin.orange:\r\n  //       leptonJs = import(\r\n  //         /* webpackChunkName: \"theme.orange\" */\r\n  //         /* webpackMode: \"lazy\" */\r\n  //         '@fs/theme.the-project/dist/assets/template/css/skins/orange'\r\n  //       );\r\n  //       break;\r\n  //     case Settings.TheProjectSkin.pink:\r\n  //       leptonJs = import(\r\n  //         /* webpackChunkName: \"theme.pink\" */\r\n  //         /* webpackMode: \"lazy\" */\r\n  //         '@fs/theme.the-project/dist/assets/template/css/skins/pink'\r\n  //       );\r\n  //       break;\r\n  //     case Settings.TheProjectSkin.purple:\r\n  //       leptonJs = import(\r\n  //         /* webpackChunkName: \"theme.purple\" */\r\n  //         /* webpackMode: \"lazy\" */\r\n  //         '@fs/theme.the-project/dist/assets/template/css/skins/purple'\r\n  //       );\r\n  //       break;\r\n  //     case Settings.TheProjectSkin.red:\r\n  //       leptonJs = import(\r\n  //         /* webpackChunkName: \"theme.red\" */\r\n  //         /* webpackMode: \"lazy\" */\r\n  //         '@fs/theme.the-project/dist/assets/template/css/skins/red'\r\n  //       );\r\n  //       break;\r\n  //     case Settings.TheProjectSkin.vivid_red:\r\n  //       leptonJs = import(\r\n  //         /* webpackChunkName: \"theme.vivid_red\" */\r\n  //         /* webpackMode: \"lazy\" */\r\n  //         '@fs/theme.the-project/dist/assets/template/css/skins/vivid_red'\r\n  //       );\r\n  //       break;\r\n  //     default:\r\n  //       return;\r\n  //   }\r\n\r\n  //   return from(leptonJs).pipe(map(m => m.default));\r\n  // };\r\n  // private removeSkin(element: HTMLStyleElement) {\r\n  //   if (element) this.domInsertionService.removeContent(element);\r\n  // }\r\n}"]}