<nz-card>

  <div nz-row>
    <div nz-col nzSpan="5">
      <button nz-button [routerLink]="['/cms/post']" [queryParams]="{blog: i.blogCodeId}" [nzType]="'default'"
        [nzSize]="'large'">
        <i class="anticon anticon-left"></i>
        <span>返回</span>
      </button>

    </div>
    <div nz-col nzSpan="10">

      <form nz-form #f="ngForm" se-container="1" labelWidth="150">

        <se label="公告類型">
          <nz-select [(ngModel)]="i.blogCodeId" name="blogCodeId">
            <nz-option *ngFor="let newItem of news" [nzValue]="newItem.id" [nzLabel]="newItem.displayName"></nz-option>
          </nz-select>
        </se>

        <se label="標題" error="必填" required>
          <input type="text" nz-input [(ngModel)]="i.title" name="title" required>
        </se>

        <se label="副標題">
          <input type="text" nz-input [(ngModel)]="i.subtitle" name="Subtitle">
        </se>

        <se label="顯示類型" required>
          <nz-select [(ngModel)]="i.displayMode" name="type">
            <nz-option [nzValue]="0" nzLabel="內文"></nz-option>
            <nz-option [nzValue]="1" nzLabel="連結"></nz-option>
          </nz-select>
        </se>

        <se label="內文" *ngIf="i.displayMode == 0">
          <textarea nz-input name="content" [(ngModel)]="i.content"
            [nzAutosize]="{ minRows: 2, maxRows: 6 }"></textarea>
        </se>

        <se label="連結" *ngIf="i.displayMode == 1">
          <input type="text" nz-input [(ngModel)]="i.url" name="url">
        </se>


        <se label="發佈時間" required>
          <nz-date-picker [(ngModel)]="i.published_At" name="published_At"></nz-date-picker>
        </se>


        <se label="上傳圖片">
          <nz-upload [nzBeforeUpload]="beforeUpload" nzType="drag" [nzMultiple]="true" nzListType="picture">

            <p class="ant-upload-drag-icon">
              <i nz-icon type="inbox"></i>
            </p>
            <p class="ant-upload-text">請將檔案拖移至此，或按下此圖示上傳檔案</p>
          </nz-upload>

          <nz-table #rowSelectionTable [(nzData)]="showList" *ngIf="showList.length > 0" nzSimple="false">
            <thead>
              <tr>
                <th>封面圖</th>
                <th>圖片</th>
                <th>設定</th>
              </tr>
            </thead>
            <tbody>
              <tr *ngFor="let data of showList">
                <td nzShowCheckbox [(nzChecked)]="data.isCover" (nzCheckedChange)="refreshStatus(data)">
                </td>
                <td>
                  <img *ngIf="data.url" [src]="data.url" (click)="showModal(data.url)" style= "height: 200px;cursor:pointer;">                  
                </td>
                <td>
                  <a (click)="delete(data,data.needDelete)">刪除</a>                 
                </td>
              </tr>
            </tbody>
          </nz-table>
        </se>       

        <se>
          <button nz-button nzType="primary" (click)="save()" [disabled]="f.invalid">
            <span *ngIf="!selectPostId">建立</span>
            <span *ngIf="selectPostId">更新</span>
          </button>         
        </se>
      </form>

    </div>
    <!-- <div nz-col nzSpan="7"></div> -->
  </div>
</nz-card>



<!-- <nz-modal [(nzVisible)]="isVisible" nzTitle="The first Modal" (nzOnCancel)="handleCancel()">
  <img [src]="selectImage"  style= "height: 200px;">
</nz-modal> -->



<nz-modal
[(nzVisible)]="isVisible"
[nzTitle]="modalTitle"
[nzContent]="modalContent"
[nzFooter]="modalFooter"
(nzOnCancel)="handleCancel()"
nzWidth = "800"
>
<ng-template #modalTitle>
  圖片
</ng-template>

<ng-template #modalContent>
  <div style="align-items: center;"  style="overflow-y:scroll;">
    <img [src]="selectImage" style="height: 400px;">
  </div>
  
</ng-template>

<ng-template #modalFooter>  
  
</ng-template>
</nz-modal>