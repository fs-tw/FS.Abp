{"version":3,"file":"main.component.js","sourceRoot":"../../../../../libs/crm/ng-alain/src/","sources":["lib/customer/main/main.component.ts"],"names":[],"mappings":"AAAA,OAAO,EAAE,SAAS,EAAU,SAAS,EAAE,MAAM,eAAe,CAAC;AAC7D,OAAO,EAAE,WAAW,EAAE,MAAM,cAAc,CAAC;AAC3C,OAAO,EAAY,WAAW,EAAyB,MAAM,eAAe,CAAC;AAG7E,OAAO,EAAE,mBAAmB,EAAC,MAAM,kBAAkB,CAAC;AAEtD,MAAM,GAAG,GAAgB;IACvB,CAAC,EAAE,EAAE,IAAI,EAAE,IAAI,EAAE,KAAK,EAAE,OAAO,EAAE;IACjC,CAAC,EAAE,EAAE,IAAI,EAAE,IAAI,EAAE,KAAK,EAAE,KAAK,EAAE;CAChC,CAAC;AACF,MAAM,UAAU,GAAgB;IAC9B,CAAC,EAAE,EAAE,IAAI,EAAE,GAAG,EAAE,KAAK,EAAE,OAAO,EAAE;IAChC,CAAC,EAAE,EAAE,IAAI,EAAE,GAAG,EAAE,KAAK,EAAE,KAAK,EAAE;IAC9B,CAAC,EAAE,EAAE,IAAI,EAAE,IAAI,EAAE;CAClB,CAAC;AAOF,MAAM,OAAO,aAAa;IA0BxB;IACE,sCAAsC;IACtB,IAAiB,EACzB,eAAoC;QAD5B,SAAI,GAAJ,IAAI,CAAa;QACzB,oBAAe,GAAf,eAAe,CAAqB;QAxB9C,YAAO,GAAe;YACpB,EAAE,KAAK,EAAE,IAAI,EAAE,KAAK,EAAE,IAAI,EAAC;YAC3B,mCAAmC;YACnC,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,eAAe,EAAE;YACxC,EAAE,KAAK,EAAE,IAAI,EAAE,KAAK,EAAE,QAAQ,EAAG,IAAI,EAAE,KAAK,EAAE,GAAG,EAAE,UAAU,EAAC;YAC9D,EAAE,KAAK,EAAE,IAAI,EAAE,KAAK,EAAE,UAAU,EAAC;YACjC,EAAE,KAAK,EAAE,IAAI,EAAE,KAAK,EAAE,OAAO,EAAE;YAC/B,EAAE,KAAK,EAAE,MAAM,EAAE,KAAK,EAAE,gBAAgB,EAAE;YAC1C,EAAE,KAAK,EAAE,IAAI,EAAE,KAAK,EAAE,eAAe,EAAG,IAAI,EAAE,KAAK,EAAE,GAAG,EAAE,GAAG,EAAC;YAC9D,EAAE,KAAK,EAAE,IAAI,EAAE,KAAK,EAAE,SAAS,EAAE;YACjC,EAAE,KAAK,EAAE,IAAI,EAAE,KAAK,EAAE,OAAO,EAAE;YAC/B,EAAE,KAAK,EAAE,IAAI,EAAE,KAAK,EAAE,UAAU,EAAE;SAGnC,CAAC;QAEF,UAAK,GAAG,EAAE,CAAC;QACX,UAAK,GAAG,CAAC,CAAC;QASR,2CAA2C;IAC7C,CAAC;IAGD,QAAQ;QACN,MAAM,qBAAqB,GAAG,KAAK,CAAC,EAAE,CAAC,IAAI,CAAC,eAAe,CAAC,wBAAwB,CAAC,KAAK,CAAC,CAAC;QAE5F,IAAI,CAAC,IAAI,CAAC,WAAW,CAAC,qBAAqB,CAAC,CAAC,SAAS,CAAC,GAAG,CAAA,EAAE;YAC1D,GAAG,CAAC,KAAK,GAAG,GAAG,CAAC,KAAK,CAAC,MAAM,CAAC,CAAC,CAAA,EAAE,CAAA,CAAC,CAAC,aAAa,IAAI,CAAC,CAAC,CAAC;YACtD,IAAI,CAAC,KAAK,GAAG,GAAG,CAAC,KAAK,CAAC;YACvB,IAAI,CAAC,KAAK,GAAG,GAAG,CAAC,UAAU,CAAC;QAC9B,CAAC,CAAC,CAAA;IAEJ,CAAC;IAGD,WAAW;IACX,CAAC;;;YArDF,SAAS,SAAC;gBACT,wDAAoC;gBAEpC,SAAS,EAAC,CAAC,WAAW,CAAC;;aACxB;;;YApBQ,WAAW;YAIX,mBAAmB;;;iBAqBzB,SAAS,SAAC,IAAI,EAAE,EAAE,MAAM,EAAE,KAAK,EAAE","sourcesContent":["import { Component, OnInit, ViewChild } from '@angular/core';\r\nimport { ListService } from '@abp/ng.core';\r\nimport { STModule, STComponent, STColumn, STColumnTag } from '@delon/abc/st';\r\n//import { NzModalService } from 'ng-zorro-antd/modal';\r\nimport * as _ from 'lodash';\r\nimport { CustomersApiService} from '@fs-tw/crm/proxy';\r\n\r\nconst TAG: STColumnTag = {\r\n  1: { text: '個人', color: 'green' },\r\n  2: { text: '企業', color: 'red' }\r\n};\r\nconst GENDER_TAG: STColumnTag = {\r\n  0: { text: '男', color: 'green' },\r\n  1: { text: '女', color: 'red' },\r\n  2: { text: '其他' }\r\n};\r\n\r\n@Component({\r\n  templateUrl: './main.component.html',\r\n  styleUrls: ['./main.component.less'],\r\n  providers:[ListService]\r\n})\r\nexport class MainComponent implements OnInit {\r\n\r\n\r\n \r\n  @ViewChild('st', { static: false }) private st: STComponent;\r\n  columns: STColumn[] = [\r\n    { title: '編號', index: 'no'},\r\n    // { title: '企業名稱', index: 'name'},\r\n    { title: '聯絡人', index: 'contactPerson' },\r\n    { title: '性別', index: 'gender' , type: 'tag', tag: GENDER_TAG},\r\n    { title: '年齡', index: 'ageRange'},\r\n    { title: '電話', index: 'phone' },\r\n    { title: '來源管道', index: 'pipelineSource' },\r\n    { title: '類型', index: 'discriminator' , type: 'tag', tag: TAG},\r\n    { title: '地址', index: 'address' },\r\n    { title: '信箱', index: 'email' },\r\n    { title: '職稱', index: 'jobTitle' },\r\n    \r\n    \r\n  ];\r\n\r\n  datas = [];\r\n  count = 0;\r\n\r\n\r\n\r\n  constructor(\r\n    //private modalService:NzModalService,\r\n    public readonly list: ListService,\r\n    private customerService: CustomersApiService,\r\n  ) {\r\n    //this.modalService.error({nzTitle:'abp'});\r\n  }\r\n\r\n\r\n  ngOnInit() {\r\n    const customerStreamCreator = query => this.customerService.getListByCustomerGetList(query);\r\n\r\n    this.list.hookToQuery(customerStreamCreator).subscribe(res=>{\r\n      res.items = res.items.filter(x=>x.discriminator == 1);\r\n      this.datas = res.items;\r\n      this.count = res.totalCount;\r\n    })\r\n\r\n  }\r\n  \r\n\r\n  ngOnDestroy() {\r\n  }\r\n}\r\n"]}